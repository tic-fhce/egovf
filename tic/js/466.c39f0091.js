"use strict";(self["webpackChunkegovf"]=self["webpackChunkegovf"]||[]).push([[466],{7590:function(e,t,a){a.d(t,{A:function(){return l}});var o=a(4373),i=a(1660);const s=i.fw;class l{getPerfil(e){return o.A.get(s+"biometrico/getPerfil",{params:{cif:e}})}getListarCifCero(){return o.A.get(s+"biometrico/listarCifCero")}getHorario(e,t){return o.A.get(s+"horario/getHorario",{params:{gestion:e,cif:t}})}updateBiometrico(e){return o.A.put(s+"biometrico/updateBiometrico",e)}getAvisoAll(){return o.A.get(s+"aviso/getAvisoAll")}getAviso(){return o.A.get(s+"aviso/getAviso")}getObsUsuario(e,t,a){return o.A.get(s+"obs/getObsUsuario",{params:{cif:e,gestion:t,mes:a}})}addObsEmpleado(e){const t={id:0,cif:e.cif,sexo:0,uidobs:e.uidobs,fechainicio:e.fechainicio,fechafin:e.fechafin,gestion:e.fechainicio.substring(0,4),mes:e.fechainicio.substring(5,7),di:e.fechainicio.substring(8,10),df:e.fechafin.substring(8,10),detalle:e.detalle,imagen:e.imagen,tipo:e.tipo,horaEntrada:e.horaEntrada,hentrada:e.horaEntrada.substring(0,2),mentrada:e.horaEntrada.substring(3,5),horaSalida:e.horaSalida,hsalida:e.horaSalida.substring(0,2),msalida:e.horaSalida.substring(3,5),url:e.url,estado:0};return o.A.post(s+"obs/addObs",t)}updateObs(e){const t={id:e.id,idObs:e.id,cif:e.cif,sexo:e.sexo,uidobs:e.uidobs,fechainicio:e.fechainicio,fechafin:e.fechafin,gestion:e.fechainicio.substring(0,4),mes:e.fechainicio.substring(5,7),di:e.fechainicio.substring(8,10),df:e.fechafin.substring(8,10),detalle:e.detalle,imagen:e.imagen,tipo:e.tipo,horaEntrada:e.horaEntrada,hentrada:e.horaEntrada.substring(0,2),mentrada:e.horaEntrada.substring(3,5),horaSalida:e.horaSalida,hsalida:e.horaSalida.substring(0,2),msalida:e.horaSalida.substring(3,5),url:e.url,estado:0};return o.A.put(s+"obs/updateObs",t)}updateObsBio(e){const t={id:e.id,cif:e.cif,idObs:e.idObs,horaEntrada:e.horaEntrada,horaSalida:e.horaSalida,hentrada:e.hentrada,hsalida:e.hsalida,mentrada:e.mentrada,msalida:e.msalida,estado:e.estado};return o.A.put(s+"obsbio/updateObsBio",t)}updateObsEmpleado(e){const t={id:e.id,idObs:e.idObs,cif:e.cif,sexo:e.sexo,uidobs:e.uidobs,fechainicio:e.fechainicio,fechafin:e.fechafin,gestion:e.fechainicio.substring(0,4),mes:e.fechainicio.substring(5,7),di:e.fechainicio.substring(8,10),df:e.fechafin.substring(8,10),detalle:e.detalle,imagen:e.imagen,tipo:e.tipo,horaEntrada:e.horaEntrada,horaSalida:e.horaSalida,hentrada:e.horaEntrada.substring(0,2),mentrada:e.horaEntrada.substring(3,5),hsalida:e.horaSalida.substring(0,2),msalida:e.horaSalida.substring(3,5),url:e.url,estado:e.estado,idtipo:e.idtipo};return o.A.put(s+"obs/updateObsEmpleado",t)}getListaHorario(e,t){return o.A.get(s+"horario/getListaHorario",{params:{cif:e,gestion:t}})}getReporteMes(e){return o.A.get(s+"marcado/reporteMes",{params:{cif:e.cif,gestion:e.gestion,mes:e.mes,di:e.di,df:e.df}})}getReporteMesDia(e){return o.A.get(s+"marcado/reporteMesDia",{params:{cif:e.cif,gestion:e.gestion,mes:e.mes,di:e.di,df:e.df}})}addHorario(e){const t={cif:e.cif,fecha:e.fecha,salida:e.salida,tipo:e.tipo,lem:e.lem,lsm:e.lsm,let:e.let,lst:e.lst,mem:e.mem,msm:e.msm,met:e.met,mst:e.mst,miem:e.miem,mism:e.mism,miet:e.miet,mist:e.mist,jem:e.jem,jsm:e.jsm,jet:e.jet,jst:e.jst,vem:e.vem,vsm:e.vsm,vet:e.vet,vst:e.vst,sem:e.sem,ssm:e.ssm,set:e.set,sst:e.sst,dem:e.dem,dsm:e.dsm,det:e.det,dst:e.dst};return o.A.post(s+"horario/addHorario",t)}addObs(e){const t={id:0,idObs:0,cif:e.cif,sexo:0,uidobs:e.uidobs,fechainicio:e.fechainicio,fechafin:e.fechafin,gestion:e.fechainicio.substring(0,4),mes:e.fechainicio.substring(5,7),di:e.fechainicio.substring(8,10),df:e.fechafin.substring(8,10),detalle:e.detalle,imagen:e.imagen,tipo:e.tipo,horaEntrada:e.horaEntrada,hEntrada:e.horaEntrada.substring(0,2),mEntrada:e.horaEntrada.substring(3,5),horaSalida:e.horaSalida,hSalida:e.horaSalida.substring(0,2),mSalida:e.horaSalida.substring(3,5),url:e.url,estado:1};return o.A.post(s+"obs/addObs",t)}updateObs1(e){const t={id:e.id,cif:e.cif,uidobs:e.uidobs,fechainicio:e.fechainicio,fechafin:e.fechafin,gestion:e.gestion,mes:e.mes,di:e.di,df:e.df,detalle:e.detalle,imagen:e.imagen,tipo:e.tipo,hora:e.hora,h:e.h,m:e.m,url:e.url,estado:e.estado,tipoId:e.tipoId};return o.A.put(s+"obs/updateObs",t)}getListaObs(e){return o.A.get(s+"obs/getListaObs",{params:{gestion:e}})}getListaObsEmpleado(e){return o.A.get(s+"obs/getListaObsEmpleado",{params:{gestion:e}})}getListaObsEliminado(){return o.A.get(s+"obs/getListaObsEliminado")}addObsAll(e){const t={id:0,cif:e.cif,sexo:e.sexo,uidobs:e.uidobs,fechainicio:e.fechainicio,fechafin:e.fechafin,gestion:e.fechainicio.substring(0,4),mes:e.fechainicio.substring(5,7),di:e.fechainicio.substring(8,10),df:e.fechafin.substring(8,10),detalle:e.detalle,imagen:e.imagen,tipo:e.tipo,horaEntrada:e.horaEntrada,hEntrada:e.horaEntrada.substring(0,2),mEntrada:e.horaEntrada.substring(3,5),horaSalida:e.horaSalida,hSalida:e.horaSalida.substring(0,2),mSalida:e.horaSalida.substring(3,5),url:e.url,estado:1,idtipo:1};return o.A.post(s+"obs/addObsAll",t)}addAviso(e){const t={titulo:e.titulo,detalle:e.detalle,icon:e.icon,estado:1};return o.A.post(s+"aviso/addAviso",t)}updateAviso(e){const t={id:e.id,titulo:e.titulo,detalle:e.detalle,icon:e.icon,estado:e.estado};return o.A.put(s+"aviso/updateAviso",t)}getRecord(e){return o.A.get(s+"marcado/reporteTotal",{params:{gestion:e.gestion,mes:e.mes,tipo:e.tipo}})}updateTipo(e,t){return o.A.put(s+"biometrico/updateTipo",null,{params:{cif:e,tipo:t}})}getListarBiometrico(){return o.A.get(s+"biometrico/listarBiometrico")}getLBiometricoTipo(e){return o.A.get(s+"biometrico/listarBiometricoTipo",{params:{tipo:e}})}updateBiometricoEliminar(e){const t={id:0,user_id:0,nombre:"",cif:e.cif,estado:0,horario_id:0,lugar:"",id_tipo:0,detalle:"",sexo:0};return o.A.put(s+"biometrico/updateBiometrico",t)}getObs(e,t,a){return o.A.get(s+"obs/getObs",{params:{cif:e,gestion:t,mes:a}})}estadoBiometrico(e){return o.A.put(s+"biometrico/estadoBiometrico",e)}getListaEquipo(){return o.A.get(s+"equipo/listar")}addEquipo(e){return o.A.post(s+"equipo/addEquipo",e)}updateEquipo(e){return o.A.put(s+"equipo/updateEquipo",e)}}},1958:function(e,t,a){a.r(t),a.d(t,{default:function(){return Y}});var o=a(6768);const i=(0,o.Lk)("br",null,null,-1);function s(e,t,a,s,l,d){const r=(0,o.g2)("ComponenteDatosPersonalesVue"),n=(0,o.g2)("ComponenteMEmpVue");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(r,{cifCiudadano:l.cifCiudadano,egovfp:l.egovf},null,8,["cifCiudadano","egovfp"]),i,(0,o.bF)(n,{emp:l.egovf},null,8,["emp"])],64)}a(4114);var l=a(2453),d=a(4232),r=a(5130);const n={class:"d-flex align-items-center"},u={class:"mb-0 fs-6 text-white"},c=(0,o.Lk)("label",{class:"d-none d-md-flex me-auto"},"Modulos",-1),m=(0,o.Lk)("label",{class:"d-none d-md-flex me-auto"},"Contratos",-1),h=(0,o.Lk)("br",null,null,-1),f=(0,o.Lk)("br",null,null,-1),p={class:"table"},b=(0,o.Lk)("thead",null,[(0,o.Lk)("tr",null,[(0,o.Lk)("th",null,"#"),(0,o.Lk)("th",null,"N° Contrato"),(0,o.Lk)("th",null,"Servicio"),(0,o.Lk)("th",null,"Cargo"),(0,o.Lk)("th",null,"Detalle"),(0,o.Lk)("th")])],-1),g=(0,o.Lk)("br",null,null,-1),k={class:"small text-medium-emphasis"},C={class:"clearfix"},v={class:"float-start"},F={class:"float-end"},_={class:"text-medium-emphasis"},E=(0,o.Lk)("tfoot",null,[(0,o.Lk)("tr")],-1),A=(0,o.Lk)("hr",null,null,-1),M=["value"],S=(0,o.Lk)("hr",null,null,-1),L=["value"],w=(0,o.Lk)("option",null,null,-1),V=["value"],D=(0,o.Lk)("hr",null,null,-1),U=["value"],x=["value"];function T(e,t,a,i,s,l){const T=(0,o.g2)("CIcon"),y=(0,o.g2)("CDropdownToggle"),$=(0,o.g2)("CButton"),W=(0,o.g2)("CDropdownItem"),O=(0,o.g2)("CDropdownDivider"),B=(0,o.g2)("CDropdownMenu"),I=(0,o.g2)("CDropdown"),q=(0,o.g2)("CCardHeader"),N=(0,o.g2)("CAlert"),z=(0,o.g2)("CWidgetStatsB"),P=(0,o.g2)("CCol"),X=(0,o.g2)("CNavLink"),R=(0,o.g2)("CNavItem"),j=(0,o.g2)("CNav"),G=(0,o.g2)("CCardSubtitle"),H=(0,o.g2)("CCardBody"),K=(0,o.g2)("CCardFooter"),Q=(0,o.g2)("CCard"),J=(0,o.g2)("CRow"),Y=(0,o.g2)("CTabPane"),Z=(0,o.g2)("CProgress"),ee=(0,o.g2)("CTabContent"),te=(0,o.g2)("CModalTitle"),ae=(0,o.g2)("CModalHeader"),oe=(0,o.g2)("ComponenteNombres"),ie=(0,o.g2)("CInputGroupText"),se=(0,o.g2)("CFormSelect"),le=(0,o.g2)("CInputGroup"),de=(0,o.g2)("CModalBody"),re=(0,o.g2)("CModalFooter"),ne=(0,o.g2)("CForm"),ue=(0,o.g2)("CModal"),ce=(0,o.g2)("CFormInput"),me=(0,o.g2)("CFormTextarea");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(J,null,{default:(0,o.k6)((()=>[(0,o.bF)(P,{lg:12},{default:(0,o.k6)((()=>[(0,o.bF)(Q,null,{default:(0,o.k6)((()=>[(0,o.bF)(q,{class:"headercolor d-flex justify-content-between align-items-center"},{default:(0,o.k6)((()=>[(0,o.Lk)("div",n,[(0,o.bF)(T,{icon:"cil-list",size:"lg",class:"me-2 text-light"}),(0,o.Lk)("label",u,(0,d.v_)(s.titulo),1)]),(0,o.bF)(I,{variant:"btn-group"},{default:(0,o.k6)((()=>[(0,o.bF)(y,{color:"dark",class:"font border-0 shadow-sm",size:"sm"},{default:(0,o.k6)((()=>[(0,o.bF)(T,{icon:"cil-menu",color:"dark",class:"me-2 text-success"}),(0,o.eW)("Opciones")])),_:1}),(0,o.bF)(B,null,{default:(0,o.k6)((()=>[(0,o.bF)(W,null,{default:(0,o.k6)((()=>[(0,o.bF)($,{onClick:t[0]||(t[0]=e=>l.clickModalModulo(!0)),size:"sm"},{default:(0,o.k6)((()=>[(0,o.bF)(T,{icon:"cil-medical-cross",class:"me-2"}),(0,o.eW)(" Agregar Modulo")])),_:1})])),_:1}),(0,o.bF)(O),(0,o.bF)(W,null,{default:(0,o.k6)((()=>[(0,o.bF)($,{onClick:t[1]||(t[1]=e=>l.clickModalContrato(!0)),size:"sm"},{default:(0,o.k6)((()=>[(0,o.bF)(T,{icon:"cil-medical-cross",class:"me-2"}),(0,o.eW)(" Agregar Contrato")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,o.bF)(H,null,{default:(0,o.k6)((()=>[(0,o.bF)(P,{xs:12},{default:(0,o.k6)((()=>[(0,o.bF)(z,{class:"mb-3",progress:{color:l.esFechaPasada(s.empleado.salida),value:this.total}},{text:(0,o.k6)((()=>[(0,o.bF)(N,{color:l.esFechaPasada(s.empleado.salida),class:"py-1 my-0 d-inline-block"},{default:(0,o.k6)((()=>[(0,o.eW)(" Fecha de Culminacion : "+(0,d.v_)(s.empleado.salida),1)])),_:1},8,["color"]),(0,o.eW)(" "+(0,d.v_)(this.total)+" % ",1),100===this.total?((0,o.uX)(),(0,o.Wv)($,{key:0,color:"danger",class:"font",size:"sm",onClick:t[2]||(t[2]=e=>l.updateEstado())},{default:(0,o.k6)((()=>[(0,o.eW)("Eliminar Empleado")])),_:1})):(0,o.Q3)("",!0)])),title:(0,o.k6)((()=>[(0,o.eW)("Inicio del Contrato : "+(0,d.v_)(s.empleado.fecha),1)])),value:(0,o.k6)((()=>[(0,o.eW)((0,d.v_)(s.empleado.empleado),1)])),_:1},8,["progress"])])),_:1}),(0,o.bF)(P,{xs:12},{default:(0,o.k6)((()=>[(0,o.bF)(j,{variant:"tabs",class:"nav nav-tabs"},{default:(0,o.k6)((()=>[(0,o.bF)(R,null,{default:(0,o.k6)((()=>[(0,o.bF)(X,{active:1==s.tab,onClick:t[3]||(t[3]=e=>l.clicktab(1))},{default:(0,o.k6)((()=>[(0,o.bF)($,{size:"sm"},{default:(0,o.k6)((()=>[(0,o.bF)(T,{icon:"cil-command"}),c])),_:1})])),_:1},8,["active"])])),_:1}),(0,o.bF)(R,null,{default:(0,o.k6)((()=>[(0,o.bF)(X,{active:2==s.tab,onClick:t[4]||(t[4]=e=>l.clicktab(2))},{default:(0,o.k6)((()=>[(0,o.bF)($,{size:"sm"},{default:(0,o.k6)((()=>[(0,o.bF)(T,{icon:"cil-handshake"}),m])),_:1})])),_:1},8,["active"])])),_:1})])),_:1}),(0,o.bF)(ee,null,{default:(0,o.k6)((()=>[(0,o.bF)(Y,{visible:1==s.tab},{default:(0,o.k6)((()=>[(0,o.bF)(J,null,{default:(0,o.k6)((()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(s.listaModuloCif,(e=>((0,o.uX)(),(0,o.Wv)(P,{lg:3,class:"text-center",key:e.id},{default:(0,o.k6)((()=>[h,(0,o.bF)(Q,null,{default:(0,o.k6)((()=>[(0,o.bF)(q,{class:"headercolor text-center"},{default:(0,o.k6)((()=>[(0,o.eW)((0,d.v_)(e.nombre),1)])),_:2},1024),(0,o.bF)(H,{class:"text-center"},{default:(0,o.k6)((()=>[(0,o.bF)(T,{customClassName:"nav-icon",icon:e.imagen,class:"menuicon"},null,8,["icon"]),(0,o.bF)(G,{class:"mb-2 text-body-secondary"},{default:(0,o.k6)((()=>[(0,o.eW)((0,d.v_)(e.detalle),1)])),_:2},1024)])),_:2},1024),(0,o.bF)(K,{class:"text-center"},{default:(0,o.k6)((()=>[(0,o.bF)($,{color:"success",size:"sm",class:"font",onClick:t=>l.getModulo(e.ruta)},{default:(0,o.k6)((()=>[(0,o.eW)((0,d.v_)(e.nombre),1)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1},8,["visible"]),(0,o.bF)(Y,{visible:2==s.tab},{default:(0,o.k6)((()=>[f,(0,o.bF)(P,{xs:12,class:"table-responsive"},{default:(0,o.k6)((()=>[(0,o.Lk)("table",p,[b,(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(s.contratos,(e=>((0,o.uX)(),(0,o.CE)("tr",{key:e.id},[(0,o.Lk)("td",null,(0,d.v_)(e.id),1),(0,o.Lk)("td",null,[(0,o.eW)((0,d.v_)(e.numero_contrato),1),g,(0,o.Lk)("label",k,(0,d.v_)(e.unidad),1)]),(0,o.Lk)("td",null,[(0,o.eW)((0,d.v_)(e.servicio)+" ",1),(0,o.bF)(Z,{thin:"",color:"success",value:100}),(0,o.Lk)("div",C,[(0,o.Lk)("div",v,[(0,o.Lk)("strong",null,(0,d.v_)(e.gestion),1)]),(0,o.Lk)("div",F,[(0,o.Lk)("small",_,(0,d.v_)(e.inicio)+" | "+(0,d.v_)(e.fin),1)])])]),(0,o.Lk)("td",null,(0,d.v_)(e.cargo),1),(0,o.Lk)("td",null,(0,d.v_)(e.detalle),1),(0,o.Lk)("td",null,[(0,o.bF)($,{color:"warning",class:"font",size:"sm",onClick:t=>l.getContrato(e.id)},{default:(0,o.k6)((()=>[(0,o.bF)(T,{icon:"cil-pencil"})])),_:2},1032,["onClick"])])])))),128))]),E])])),_:1})])),_:1},8,["visible"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,o.bF)(ue,{visible:s.modalModulo,onClose:t[10]||(t[10]=e=>l.clickModalModulo(!1))},{default:(0,o.k6)((()=>[(0,o.bF)(ne,{onSubmit:t[9]||(t[9]=(0,r.D$)((e=>l.addEmpleadoModulo()),["prevent"]))},{default:(0,o.k6)((()=>[(0,o.bF)(ae,{class:"headercolor",dismiss:"",onClose:t[5]||(t[5]=e=>l.clickModalModulo(!1))},{default:(0,o.k6)((()=>[(0,o.bF)(te,null,{default:(0,o.k6)((()=>[(0,o.Lk)("h6",null,[(0,o.bF)(T,{icon:"cil-medical-cross",class:"me-2"}),(0,o.eW)(" Agregar Modulos")])])),_:1})])),_:1}),(0,o.bF)(de,null,{default:(0,o.k6)((()=>[(0,o.bF)(oe,{datos:s.datos},null,8,["datos"]),A,(0,o.bF)(le,{class:"mb-3"},{default:(0,o.k6)((()=>[(0,o.bF)(ie,{as:"label"},{default:(0,o.k6)((()=>[(0,o.eW)("Modulo")])),_:1}),(0,o.bF)(se,{modelValue:s.id_modulo,"onUpdate:modelValue":[t[6]||(t[6]=e=>s.id_modulo=e),t[7]||(t[7]=e=>s.id_modulo=Number(e))],"model-value":String(s.id_modulo),required:"true"},{default:(0,o.k6)((()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(s.listaModulo,(e=>((0,o.uX)(),(0,o.CE)("option",{value:e.id,key:e.id},(0,d.v_)(e.detalle),9,M)))),128))])),_:1},8,["modelValue","model-value"])])),_:1})])),_:1}),(0,o.bF)(re,null,{default:(0,o.k6)((()=>[(0,o.bF)($,{onClick:t[8]||(t[8]=e=>l.clickModalModulo(!1)),color:"danger",size:"sm",class:"font"},{default:(0,o.k6)((()=>[(0,o.bF)(T,{icon:"cil-x",class:"me-2"}),(0,o.eW)("Cancelar")])),_:1}),(0,o.bF)($,{type:"submit",color:"success",size:"sm",class:"font"},{default:(0,o.k6)((()=>[(0,o.bF)(T,{icon:"cil-check-alt",class:"me-2"}),(0,o.eW)("Agregar Modulo ")])),_:1})])),_:1})])),_:1})])),_:1},8,["visible"]),(0,o.bF)(ue,{visible:s.modalContrato,onClose:t[23]||(t[23]=e=>l.clickModalContrato(!1))},{default:(0,o.k6)((()=>[(0,o.bF)(ne,{onSubmit:t[22]||(t[22]=(0,r.D$)((e=>l.addContrato()),["prevent"]))},{default:(0,o.k6)((()=>[(0,o.bF)(ae,{class:"headercolor",dismiss:"",onClose:t[11]||(t[11]=e=>l.clickModalContrato(!1))},{default:(0,o.k6)((()=>[(0,o.bF)(te,null,{default:(0,o.k6)((()=>[(0,o.Lk)("h6",null,[(0,o.bF)(T,{icon:"cil-clipboard",class:"me-2",size:"lg"}),(0,o.eW)(" Agregar Contrato")])])),_:1})])),_:1}),(0,o.bF)(de,null,{default:(0,o.k6)((()=>[(0,o.bF)(oe,{datos:s.datos},null,8,["datos"]),S,(0,o.bF)(le,{class:"mb-3"},{default:(0,o.k6)((()=>[(0,o.bF)(ie,{as:"label"},{default:(0,o.k6)((()=>[(0,o.eW)("Numero de Contrato")])),_:1}),(0,o.bF)(ce,{type:"text",modelValue:s.contrato.numerocontrato,"onUpdate:modelValue":t[12]||(t[12]=e=>s.contrato.numerocontrato=e),placeholder:"Numero de contrato",required:"true"},null,8,["modelValue"])])),_:1}),(0,o.bF)(le,{class:"mb-3"},{default:(0,o.k6)((()=>[(0,o.bF)(ie,{as:"label"},{default:(0,o.k6)((()=>[(0,o.eW)("Servicios Prestados")])),_:1}),(0,o.bF)(me,{modelValue:s.contrato.servicio,"onUpdate:modelValue":t[13]||(t[13]=e=>s.contrato.servicio=e),required:"true",rows:"5"},null,8,["modelValue"])])),_:1}),(0,o.bF)(le,{class:"mb-3"},{default:(0,o.k6)((()=>[(0,o.bF)(ie,{as:"label"},{default:(0,o.k6)((()=>[(0,o.eW)("Cargo")])),_:1}),(0,o.bF)(ce,{type:"text",modelValue:s.contrato.cargo,"onUpdate:modelValue":t[14]||(t[14]=e=>s.contrato.cargo=e),placeholder:"Cargo del Empleado",required:"true"},null,8,["modelValue"])])),_:1}),(0,o.bF)(le,{class:"mb-3"},{default:(0,o.k6)((()=>[(0,o.bF)(ie,{as:"label"},{default:(0,o.k6)((()=>[(0,o.eW)("Tipo de Empleado")])),_:1}),(0,o.bF)(se,{modelValue:s.contrato.idTipoEmpleado,"onUpdate:modelValue":[t[15]||(t[15]=e=>s.contrato.idTipoEmpleado=e),t[16]||(t[16]=e=>s.contrato.idTipoEmpleado=Number(e))],"model-value":String(s.contrato.idTipoEmpleado),required:"true"},{default:(0,o.k6)((()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(s.listaTipoEmpleado,(e=>((0,o.uX)(),(0,o.CE)("option",{value:e.id,key:e.id},(0,d.v_)(e.detalle),9,L)))),128))])),_:1},8,["modelValue","model-value"])])),_:1}),(0,o.bF)(le,{class:"mb-3"},{default:(0,o.k6)((()=>[(0,o.bF)(ie,{as:"label"},{default:(0,o.k6)((()=>[(0,o.eW)("Unidad")])),_:1}),(0,o.bF)(se,{modelValue:s.contrato.unidad,"onUpdate:modelValue":t[17]||(t[17]=e=>s.contrato.unidad=e),"model-value":String(s.contrato.unidad),required:"true"},{default:(0,o.k6)((()=>[w,((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(s.listaUnidades,(e=>((0,o.uX)(),(0,o.CE)("option",{value:e.unidad,key:e.id},(0,d.v_)(e.unidad),9,V)))),128))])),_:1},8,["modelValue","model-value"])])),_:1}),(0,o.bF)(le,{class:"mb-3"},{default:(0,o.k6)((()=>[(0,o.bF)(ie,{as:"label"},{default:(0,o.k6)((()=>[(0,o.eW)("Fecha de Inicio")])),_:1}),(0,o.bF)(ce,{type:"date",modelValue:s.contrato.inicio,"onUpdate:modelValue":t[18]||(t[18]=e=>s.contrato.inicio=e),placeholder:"Inicio",required:"true"},null,8,["modelValue"])])),_:1}),(0,o.bF)(le,{class:"mb-3"},{default:(0,o.k6)((()=>[(0,o.bF)(ie,{as:"label"},{default:(0,o.k6)((()=>[(0,o.eW)("Fecha de Conclucion")])),_:1}),(0,o.bF)(ce,{type:"date",modelValue:s.contrato.fin,"onUpdate:modelValue":t[19]||(t[19]=e=>s.contrato.fin=e),placeholder:"Inicio",required:"true"},null,8,["modelValue"])])),_:1}),(0,o.bF)(le,{class:"mb-3"},{default:(0,o.k6)((()=>[(0,o.bF)(ie,{as:"label"},{default:(0,o.k6)((()=>[(0,o.eW)("Detalle")])),_:1}),(0,o.bF)(ce,{type:"text",modelValue:s.contrato.detalle,"onUpdate:modelValue":t[20]||(t[20]=e=>s.contrato.detalle=e),placeholder:"Detalle del Contrato",required:"true"},null,8,["modelValue"])])),_:1})])),_:1}),(0,o.bF)(re,null,{default:(0,o.k6)((()=>[(0,o.bF)($,{onClick:t[21]||(t[21]=e=>l.clickModalContrato(!1)),color:"danger",class:"font",size:"sm"},{default:(0,o.k6)((()=>[(0,o.bF)(T,{icon:"cil-x",class:"me-2"}),(0,o.eW)("Cancelar")])),_:1}),(0,o.bF)($,{type:"submit",class:"font",color:"success",size:"sm"},{default:(0,o.k6)((()=>[(0,o.bF)(T,{icon:"cil-check-alt",class:"me-2"}),(0,o.eW)("Agregar Contrato ")])),_:1})])),_:1})])),_:1})])),_:1},8,["visible"]),(0,o.bF)(ue,{visible:s.modalEditarContrato,onClose:t[37]||(t[37]=e=>l.clickModalEditarContrato(!1))},{default:(0,o.k6)((()=>[(0,o.bF)(ne,{onSubmit:t[36]||(t[36]=(0,r.D$)((e=>l.updateContrato()),["prevent"]))},{default:(0,o.k6)((()=>[(0,o.bF)(ae,{class:"headercolor",dismiss:"",onClose:t[24]||(t[24]=e=>l.clickModalEditarContrato(!1))},{default:(0,o.k6)((()=>[(0,o.bF)(te,null,{default:(0,o.k6)((()=>[(0,o.Lk)("h6",null,[(0,o.bF)(T,{icon:"cil-pencil",class:"me-2"}),(0,o.eW)("Editar Contrato")])])),_:1})])),_:1}),(0,o.bF)(de,null,{default:(0,o.k6)((()=>[(0,o.bF)(oe,{datos:s.datos},null,8,["datos"]),D,(0,o.bF)(le,{class:"mb-3"},{default:(0,o.k6)((()=>[(0,o.bF)(ie,{as:"label"},{default:(0,o.k6)((()=>[(0,o.eW)("Numero de Contrato")])),_:1}),(0,o.bF)(ce,{type:"text",modelValue:s.setContrato.numerocontrato,"onUpdate:modelValue":t[25]||(t[25]=e=>s.setContrato.numerocontrato=e),placeholder:"Numero de contrato",required:"true"},null,8,["modelValue"])])),_:1}),(0,o.bF)(le,{class:"mb-3"},{default:(0,o.k6)((()=>[(0,o.bF)(ie,{as:"label"},{default:(0,o.k6)((()=>[(0,o.eW)("Servicios Prestados")])),_:1}),(0,o.bF)(me,{modelValue:s.setContrato.servicio,"onUpdate:modelValue":t[26]||(t[26]=e=>s.setContrato.servicio=e),required:"true",rows:"5"},null,8,["modelValue"])])),_:1}),(0,o.bF)(le,{class:"mb-3"},{default:(0,o.k6)((()=>[(0,o.bF)(ie,{as:"label"},{default:(0,o.k6)((()=>[(0,o.eW)("Cargo ")])),_:1}),(0,o.bF)(ce,{type:"text",modelValue:s.setContrato.cargo,"onUpdate:modelValue":t[27]||(t[27]=e=>s.setContrato.cargo=e),placeholder:"Cargo del empleado",required:"true"},null,8,["modelValue"])])),_:1}),(0,o.bF)(le,{class:"mb-3"},{default:(0,o.k6)((()=>[(0,o.bF)(ie,{as:"label"},{default:(0,o.k6)((()=>[(0,o.eW)("Tipo de Empleado")])),_:1}),(0,o.bF)(se,{modelValue:s.setContrato.idTipoEmpleado,"onUpdate:modelValue":[t[28]||(t[28]=e=>s.setContrato.idTipoEmpleado=e),t[29]||(t[29]=e=>s.setContrato.idTipoEmpleado=Number(e))],"model-value":String(s.setContrato.idTipoEmpleado),required:"true"},{default:(0,o.k6)((()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(s.listaTipoEmpleado,(e=>((0,o.uX)(),(0,o.CE)("option",{value:e.id,key:e.id},(0,d.v_)(e.detalle),9,U)))),128))])),_:1},8,["modelValue","model-value"])])),_:1}),(0,o.bF)(le,{class:"mb-3"},{default:(0,o.k6)((()=>[(0,o.bF)(ie,{as:"label"},{default:(0,o.k6)((()=>[(0,o.eW)("Unidad")])),_:1}),(0,o.bF)(se,{modelValue:s.setContrato.unidad,"onUpdate:modelValue":t[30]||(t[30]=e=>s.setContrato.unidad=e),"model-value":String(s.setContrato.unidad),required:"true"},{default:(0,o.k6)((()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(s.listaUnidades,(e=>((0,o.uX)(),(0,o.CE)("option",{value:e.unidad,key:e.id},(0,d.v_)(e.unidad),9,x)))),128))])),_:1},8,["modelValue","model-value"])])),_:1}),(0,o.bF)(le,{class:"mb-3"},{default:(0,o.k6)((()=>[(0,o.bF)(ie,{as:"label"},{default:(0,o.k6)((()=>[(0,o.eW)("Fecha de Inicio ")])),_:1}),(0,o.bF)(ce,{type:"date",modelValue:s.setContrato.inicio,"onUpdate:modelValue":t[31]||(t[31]=e=>s.setContrato.inicio=e),placeholder:"Fecha de Inicio",required:"true"},null,8,["modelValue"])])),_:1}),(0,o.bF)(le,{class:"mb-3"},{default:(0,o.k6)((()=>[(0,o.bF)(ie,{as:"label"},{default:(0,o.k6)((()=>[(0,o.eW)("Fecha de Conclucion ")])),_:1}),(0,o.bF)(ce,{type:"date",modelValue:s.setContrato.fin,"onUpdate:modelValue":t[32]||(t[32]=e=>s.setContrato.fin=e),placeholder:"Fecha Fin",required:"true"},null,8,["modelValue"])])),_:1}),(0,o.bF)(le,{class:"mb-3"},{default:(0,o.k6)((()=>[(0,o.bF)(ie,{as:"label"},{default:(0,o.k6)((()=>[(0,o.eW)("Gestion ")])),_:1}),(0,o.bF)(ce,{type:"text",modelValue:s.setContrato.gestion,"onUpdate:modelValue":t[33]||(t[33]=e=>s.setContrato.gestion=e),placeholder:"Gestion",required:"true"},null,8,["modelValue"])])),_:1}),(0,o.bF)(le,{class:"mb-3"},{default:(0,o.k6)((()=>[(0,o.bF)(ie,{as:"label"},{default:(0,o.k6)((()=>[(0,o.eW)("Detalle")])),_:1}),(0,o.bF)(ce,{type:"text",modelValue:s.setContrato.detalle,"onUpdate:modelValue":t[34]||(t[34]=e=>s.setContrato.detalle=e),placeholder:"Detalle del Contrato",required:"true"},null,8,["modelValue"])])),_:1})])),_:1}),(0,o.bF)(re,null,{default:(0,o.k6)((()=>[(0,o.bF)($,{onClick:t[35]||(t[35]=e=>l.clickModalEditarContrato(!1)),color:"danger",class:"font",size:"sm"},{default:(0,o.k6)((()=>[(0,o.bF)(T,{icon:"cil-x",class:"me-2"}),(0,o.eW)("Cancelar ")])),_:1}),(0,o.bF)($,{type:"submit",color:"success",class:"font",size:"sm"},{default:(0,o.k6)((()=>[(0,o.bF)(T,{icon:"cil-check-alt",class:"me-2"}),(0,o.eW)("Actualizar Contrato")])),_:1})])),_:1})])),_:1})])),_:1},8,["visible"])],64)}var y=a(3817),$=a(6025),W=a(1133),O=a(9115),B=a(4373),I=a(1660);const q=I.j6;class N{headersUsuario(e){B.A.defaults.headers.common["Authorization"]="Bearer "+e}getMenu(e){return console.log(e),B.A.get(q+"menu/getMenu",{params:{cif:e}})}getMenuModulo(e,t){return B.A.get(q+"menu/getMenuModulo",{params:{cif:e,titulo:t}})}addMenuUsuario(e,t){const a={cif:e,idmenu:t,estado:1};return B.A.post(q+"menu/addMenuUsuario",a)}updateMenuUsuario(e,t,a,o){const i={id:e,_01cif:t,_02idmenu:a,_03estado:o};return B.A.put(q+"updateMenuUsuario",i)}}var z=a(7590),P=a(8329),X=a(3903),R={name:"ComponenteMEmpVue",props:["emp"],components:{ComponenteNombres:y.A,CDropdown:X.ji},data(){return{titulo:"Modulos Del Empleado",modalModulo:!1,modalContrato:!1,modalEditarContrato:!1,empleadoService:null,unidadService:null,usuarioService:null,moduloService:null,sccService:null,menuService:null,listaModulo:[],listaModuloCif:[],listaTipoEmpleado:[],listaUnidades:[],id_modulo:0,id_tipoEmpleado:0,contratos:[],total:0,menu:{id:0,titulo:"",icono:"",menuObj:[]},getPB:!0,tab:1,empleado:{id:0,cif:0,empleado:"",tipoempleado_id:0,fecha:"",estado:0,salida:"",contratos:[]},usuario:{token:"",cif:"",correo:"",celular:"",pass:"",unidad:"",sigla:"",foto:""},empleado_modulo:{cif:0,id_modulo:0},contrato:{cif:0,id:0,numerocontrato:"AREA.DESC.CONT.N.",servicio:"CONTRATO ADMINISTRATIVO PARA LA PRESTACIÓN DE SERVICIOS CONSULTOR INDIVIDUAL DE LINEA",unidad:"",inicio:"",fin:"",gestion:0,detalle:"",idTipoEmpleado:0,cargo:"",foto:""},setContrato:{id:0,cif:0,empleado:0,numerocontrato:"",servicio:"",unidad:"",inicio:"",fin:"",gestion:0,detalle:"",idTipoEmpleado:0,cargo:"",foto:""},unidad:{id:0,unidad:"",dependencia:"",sigla:""},egovf:{idPersona:0,nombre:"",paterno:"",materno:"",fecha:"",sexo:0,idUsuario:0,cif:0,matricula:0,ci:"",ci_com:0,complemento:"",correo:"",celular:"",pass:"",unidad:"",dependiente:"",sigla:"",foto:""},datos:{cif:0,nombre:"",apellido:""}}},beforeCreate(){this.total=0,null==this.$cookies.get("cif")&&this.$router.push("/")},created(){this.empleadoService=new W.A,this.unidadService=new O.A,this.usuarioService=new $.A,this.menuService=new N,this.sccService=new z.A,this.moduloService=new P.A,this.total=0},mounted(){this.getDatos(),this.getListaTipoEmpleado(),this.getUnidades(),this.total=0},updated(){this.egovf=this.emp,this.egovf.cif>0&&this.getPB&&(this.getEmpleado(),this.getListarEmpleadoModulo(),this.getListarEmpleadoModuloCif(),this.getPB=!1),this.datos.cif=this.egovf.cif,this.datos.nombre=this.egovf.nombre,this.datos.apellido=this.egovf.paterno+" "+this.egovf.materno},methods:{getDatos(){null!=this.$cookies.get("cif")&&(this.usuario.token=this.$cookies.get("token"),this.usuario.cif=this.$cookies.get("cif"),this.usuario.correo=this.$cookies.get("correo"),this.usuario.celular=this.$cookies.get("celular"),this.usuario.pass=this.$cookies.get("pass"),this.usuario.unidad=this.$cookies.get("unidad"),this.usuario.sigla=this.$cookies.get("sigla"),this.usuario.foto=this.$cookies.get("foto"),this.menuService.headersUsuario(this.usuario.token))},async getUnidades(){await this.unidadService.getUnidades().then((e=>{this.listaUnidades=e.data}))},async getEmpleado(){await this.empleadoService.getEmpleado(this.egovf.cif).then((e=>{this.empleado=e.data,this.empleado.id>0&&(this.contratos=this.empleado.contratos,this.calcularDiasRestantes(this.empleado.fecha,this.empleado.salida))})),this.getMenuModulo()},async getListaTipoEmpleado(){await this.empleadoService.getListaTipoEmpleado().then((e=>{this.listaTipoEmpleado=e.data}))},async getListarEmpleadoModulo(){await this.empleadoService.getListarEmpleadoModulo(this.egovf.cif).then((e=>{this.listaModulo=e.data}))},async getListarEmpleadoModuloCif(){await this.empleadoService.getListarEmpleadoModuloCif(this.egovf.cif).then((e=>{this.listaModuloCif=e.data}))},async addEmpleadoModulo(){var e=0;this.empleado_modulo.cif=this.egovf.cif,this.empleado_modulo.id_modulo=this.id_modulo,this.listaModulo.forEach((t=>{t.id==this.id_modulo&&(e=t.idmenu)})),await this.$swal.fire({title:"Desea Agregar el Modulo al Empleado ?",showDenyButton:!0,confirmButtonText:"Aceptar",denyButtonText:"Cancelar"}).then((t=>{t.isConfirmed?this.empleadoService.addEmpleadoModulo(this.empleado_modulo).then((t=>{201==t.status?this.menuService.addMenuUsuario(this.empleado_modulo.cif,e).then((e=>{201==e.status?this.$swal.fire("El Modulo fue Agregado al Empleado Corectamente","","success").then((e=>{e&&location.reload()})):this.$swal.fire("Los Datos  del Menu Usuario no fueron Guardados Error"+e.status,"","error")})):this.$swal.fire("Los Datos no fueron Guardados Error"+t.status,"","error")})):t.isDenied&&this.$swal.fire("Datos Cancelados","","info")}))},async addContrato(){this.usuarioService.headersUsuario(this.usuario.token),this.listaUnidades.forEach((e=>{if(e.unidad==this.contrato.unidad)return this.unidad.id=e.id,this.unidad.unidad=e.unidad,this.unidad.dependiente=e.dependiente,this.unidad.sigla=e.sigla,!1})),this.contrato.cif=this.egovf.cif,this.contrato.foto=this.egovf.foto,this.egovf.idPersona=this.contrato.idTipoEmpleado,await this.$swal.fire({title:"Desea Agregar Contrato al Empleado ?",showDenyButton:!0,icon:"info",confirmButtonText:"Aceptar",denyButtonText:"Cancelar"}).then((e=>{e.isConfirmed?this.empleadoService.addContrato(this.contrato).then((e=>{201==e.status?this.usuarioService.updateUnidad(this.egovf,this.unidad).then((t=>{200==t.status?this.unidadService.addPertenece(this.egovf,this.unidad).then((t=>{201==t.status?this.$swal.fire("El Comtrato fue Agregado al Empleado Corectamente","","success").then((e=>{e&&location.reload()})):this.$swal.fire("Los Datos de Unidad no fueron Guardados Error"+e.status,"","error")})):this.$swal.fire("Los Datos del Usuario No fueron Actualizados"+e.status,"","error")})):this.$swal.fire("Los Datos del Contrato no fueron Guardados Error"+e.status,"","error")})):e.isDenied&&this.$swal.fire("Datos Cancelados","","info")}))},async updateContrato(){this.usuarioService.headersUsuario(this.usuario.token),this.listaUnidades.forEach((e=>{if(e.unidad==this.setContrato.unidad)return this.unidad.id=e.id,this.unidad.unidad=e.unidad,this.unidad.dependiente=e.dependiente,this.unidad.sigla=e.sigla,!1})),await this.$swal.fire({title:"Desea Actualizar el Contrato del Empleado ?",showDenyButton:!0,icon:"info",confirmButtonText:"Aceptar",denyButtonText:"Cancelar"}).then((e=>{e.isConfirmed?this.empleadoService.updateContrato(this.setContrato,this.egovf.foto).then((e=>{200==e.status?this.usuarioService.updateUnidad(this.egovf,this.unidad).then((t=>{200==t.status?this.unidadService.addPertenece(this.egovf,this.unidad).then((t=>{this.sccService.updateTipo(this.egovf.cif,this.setContrato.idTipoEmpleado).then(),201==t.status?this.$swal.fire("El Comtrato fue Actializado al Empleado Corectamente","","success").then((e=>{e&&location.reload()})):this.$swal.fire("Los Datos de Unidad no fueron Guardados Error"+e.status,"","error")})):this.$swal.fire("Los Datos del Usuario No fueron Actualizados"+e.status,"","error")})):this.$swal.fire("Los Datos del Contrato no fueron Guardados Error"+e.status,"","error")})):e.isDenied&&this.$swal.fire("Datos Cancelados","","info")}))},async getMenuModulo(){await this.menuService.getMenuModulo(this.egovf.cif,"Modulo EMP").then((e=>{this.menu=e.data}))},async updateEstado(){this.moduloService.headersUsuario(this.usuario.token),await this.$swal.fire({title:"Desea eliminar al Empleado ?",showDenyButton:!0,icon:"info",confirmButtonText:"Aceptar",denyButtonText:"Cancelar"}).then((e=>{e.isConfirmed?this.empleadoService.updateEmpleadoEliminar(this.empleado).then((e=>{200==e.status?(this.sccService.updateBiometricoEliminar(this.empleado).then(),this.moduloService.updateEliminarModuloEmpleado(this.empleado.cif,this.usuario.cif).then(),this.$swal.fire("El Empleado fue removido con exito","","success").then((e=>{e&&location.reload()}))):this.$swal.fire("Los Datos no fueron Guardados Error"+e.status,"","error")})):this.$swal.fire("Datos Cancelados","","info")}))},getModulo(e){this.$router.push({name:e,params:{cifCiudadano:this.egovf.cif}})},clickModalModulo(e){this.modalModulo=e},clickModalContrato(e){this.modalContrato=e},clickModalEditarContrato(e){this.modalEditarContrato=e},getContrato(e){this.contratos.forEach((t=>{t.id===e&&(this.setContrato.id=t.id,this.setContrato.cif=this.egovf.cif,this.setContrato.empleado=this.empleado.id,this.setContrato.numerocontrato=t.numero_contrato,this.setContrato.servicio=t.servicio,this.setContrato.unidad=t.unidad,this.setContrato.inicio=t.inicio,this.setContrato.fin=t.fin,this.setContrato.gestion=t.gestion,this.setContrato.detalle=t.detalle,this.setContrato.idTipoEmpleado=t.idTipoEmpleado,this.setContrato.cargo=t.cargo)})),this.clickModalEditarContrato(!0)},clicktab(e){this.tab=e},esFechaPasada(e){if(!e)return"warning";const t=new Date(e),a=new Date;return t.setHours(0,0,0,0),a.setHours(0,0,0,0),t<a?"danger":"success"},calcularDiasRestantes(e,t){const a=new Date(e),o=new Date(t),i=Math.floor((o-a)/864e5),s=new Date;if(o||(this.total=0),s>=o)this.total=100;else{const e=Math.floor((s-a)/864e5),t=e/i*100;this.total=parseInt(t<0?0:t.toFixed(2))}}}},j=a(1241);const G=(0,j.A)(R,[["render",T]]);var H=G,K=a(7950),Q={name:"ModuloEmpView",components:{ComponenteDatosPersonalesVue:l.A,ComponenteMEmpVue:H},data(){return{titulo:"Modulos del Empleado",egovfService:null,cifCiudadano:"",usuario:{token:"",cif:"",correo:"",celular:"",pass:"",unidad:"",sigla:""},egovf:{idPersona:0,nombre:"",paterno:"",materno:"",fecha:"",sexo:0,idUsuario:0,cif:0,matricula:0,ci:"",ci_com:0,complemento:"",correo:"",celular:"",pass:"",unidad:"",dependiente:"",sigla:"",foto:""}}},beforeCreate(){null==this.$cookies.get("cif")&&this.$router.push("/")},created(){this.egovfService=new K.A},mounted(){this.cifCiudadano=this.$route.params.cifCiudadano,this.getDatos(),this.getEgovf()},methods:{getDatos(){null!=this.$cookies.get("cif")&&(this.usuario.token=this.$cookies.get("token"),this.usuario.cif=this.$cookies.get("cif"),this.usuario.correo=this.$cookies.get("correo"),this.usuario.celular=this.$cookies.get("celular"),this.usuario.pass=this.$cookies.get("pass"),this.usuario.unidad=this.$cookies.get("unidad"),this.usuario.sigla=this.$cookies.get("sigla"),this.usuario.foto=this.$cookies.get("foto"))},async getEgovf(){this.egovfService.headersUsuario(this.usuario.token),await this.egovfService.getEgovf(this.cifCiudadano).then((e=>{this.egovf=e.data}))}}};const J=(0,j.A)(Q,[["render",s]]);var Y=J}}]);
//# sourceMappingURL=466.c39f0091.js.map