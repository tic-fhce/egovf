"use strict";(self["webpackChunkegovf"]=self["webpackChunkegovf"]||[]).push([[589],{7950:function(e,a,o){o.d(a,{A:function(){return i}});var t=o(4373),s=o(1660);const l=s.j6;class i{headersUsuario(e){t.A.defaults.headers.common["Authorization"]="Bearer "+e}getEgovf(e){return t.A.get(l+"ciudadano/getEgovf",{params:{cif:e}})}getListaCiudadano(){return t.A.get(l+"ciudadano/getListaCiudadano")}getListaCiudadanoPublico(){return t.A.get(l+"ciudadano/getListaCiudadanoPublico")}getListaEmpleado(){return t.A.get(l+"ciudadano/getListaEmpleado")}}},7160:function(e,a,o){o.d(a,{A:function(){return i}});var t=o(4373),s=o(1660);const l=s.H4;class i{getListarCifCero(){return t.A.get("biometrico/listarCifCero")}addImagen(e,a){return t.A.post(l+"upload.php",e,{...a,headers:{"Content-Type":"multipart/form-data"}})}addFoto(e,a){return t.A.post(l+"foto.php",e,{...a,headers:{"Content-Type":"multipart/form-data"}})}getUrl(){return l+"imagenes/"}getImage(e){return t.A.get(e,{headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"*"}})}}},9589:function(e,a,o){o.r(a),o.d(a,{default:function(){return H}});var t=o(6768),s=o(4232),l=o(5130);const i={"aria-label":"breadcrumb"},r={class:"breadcrumb custom-breadcrumb"},d={class:"breadcrumb-item"},n={class:"breadcrumb-item active","aria-current":"page"},u={class:"align-items-center"},c={class:"mb-0 fs-5 text-white"},b=["value"],h=["value"],m={class:"table"},f=(0,t.Lk)("thead",null,[(0,t.Lk)("tr",null,[(0,t.Lk)("th",null,"#"),(0,t.Lk)("th",null,"UidObs"),(0,t.Lk)("th",null,"Tipo"),(0,t.Lk)("th",null,"Detalle"),(0,t.Lk)("th",null,"Estado"),(0,t.Lk)("th",null,"Opciones")])],-1),p={class:"small text-medium-emphasis"},g={class:"small text-medium-emphasis"},k=(0,t.Lk)("tfoot",null,[(0,t.Lk)("tr")],-1),v=(0,t.Lk)("hr",null,null,-1),F=(0,t.Lk)("option",{value:"Entrada M."},"Entrada Mañana",-1),_=(0,t.Lk)("option",{value:"Salida M."},"Salida Mañana",-1),C=(0,t.Lk)("option",{value:"Entrada T."},"Entrada Tarde",-1),E=(0,t.Lk)("option",{value:"Salida T."},"Salida Tarde",-1),D=(0,t.Lk)("option",{value:"continuo"},"Continuo",-1),O=(0,t.Lk)("option",{value:"continuoingreso"},"Continuo e Ingreso",-1),S=(0,t.Lk)("option",{value:"asueto"},"Asueto",-1),L=(0,t.Lk)("hr",null,null,-1),y=(0,t.Lk)("option",{value:"Entrada M."},"Entrada Mañana",-1),w=(0,t.Lk)("option",{value:"Salida M."},"Salida Mañana",-1),V=(0,t.Lk)("option",{value:"Entrada T."},"Entrada Tarde",-1),W=(0,t.Lk)("option",{value:"Salida T."},"Salida Tarde",-1),A=(0,t.Lk)("option",{value:"continuo"},"Continuo",-1),M=(0,t.Lk)("option",{value:"continuoingreso"},"Continuo e Ingreso",-1),I=(0,t.Lk)("option",{value:"asueto"},"Asueto",-1);function x(e,a,o,x,U,T){const $=(0,t.g2)("router-link"),z=(0,t.g2)("CIcon"),q=(0,t.g2)("CCol"),P=(0,t.g2)("CDropdownToggle"),X=(0,t.g2)("CButton"),B=(0,t.g2)("CDropdownItem"),H=(0,t.g2)("CDropdownMenu"),R=(0,t.g2)("CDropdown"),G=(0,t.g2)("CRow"),Q=(0,t.g2)("CCardHeader"),j=(0,t.g2)("CInputGroupText"),N=(0,t.g2)("CFormSelect"),K=(0,t.g2)("CInputGroup"),J=(0,t.g2)("CCardBody"),Y=(0,t.g2)("CBadge"),Z=(0,t.g2)("CButtonGroup"),ee=(0,t.g2)("CCardFooter"),ae=(0,t.g2)("CCard"),oe=(0,t.g2)("CModalTitle"),te=(0,t.g2)("CModalHeader"),se=(0,t.g2)("ComponenteObs"),le=(0,t.g2)("CModalBody"),ie=(0,t.g2)("CModalFooter"),re=(0,t.g2)("CModal"),de=(0,t.g2)("ComponenteNombres"),ne=(0,t.g2)("CFormInput"),ue=(0,t.g2)("CFormTextarea"),ce=(0,t.g2)("CProgressBar"),be=(0,t.g2)("CProgress"),he=(0,t.g2)("CForm");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.Lk)("nav",i,[(0,t.Lk)("ol",r,[(0,t.Lk)("li",d,[(0,t.bF)($,{to:"/menumoduloscc",class:"breadcrumb-link"},{default:(0,t.k6)((()=>[(0,t.eW)("Modulo M-SCC")])),_:1})]),(0,t.Lk)("li",n,(0,s.v_)(U.titulo)+" > ",1)])]),(0,t.bF)(G,null,{default:(0,t.k6)((()=>[(0,t.bF)(q,{lg:12},{default:(0,t.k6)((()=>[(0,t.bF)(ae,null,{default:(0,t.k6)((()=>[(0,t.bF)(Q,{class:"headercolor justify-content-between align-items-center"},{default:(0,t.k6)((()=>[(0,t.bF)(G,null,{default:(0,t.k6)((()=>[(0,t.bF)(q,{lg:6},{default:(0,t.k6)((()=>[(0,t.Lk)("div",u,[(0,t.bF)(z,{icon:"cil-list",size:"lg",class:"me-2 text-light"}),(0,t.Lk)("label",c,(0,s.v_)(U.titulo),1)])])),_:1}),(0,t.bF)(q,{lg:6,class:"text-end"},{default:(0,t.k6)((()=>[(0,t.bF)(R,{variant:"btn-group"},{default:(0,t.k6)((()=>[(0,t.bF)(P,{color:"dark",class:"font border-0 shadow-sm",size:"sm"},{default:(0,t.k6)((()=>[(0,t.bF)(z,{icon:"cil-menu",class:"me-2 text-success"}),(0,t.eW)("Opciones")])),_:1}),(0,t.bF)(H,null,{default:(0,t.k6)((()=>[(0,t.bF)(B,null,{default:(0,t.k6)((()=>[(0,t.bF)(X,{onClick:a[0]||(a[0]=e=>T.clickModalObs(!0)),size:"sm"},{default:(0,t.k6)((()=>[(0,t.bF)(z,{icon:"cil-plus",class:"me-2"}),(0,t.eW)(" Agregar Observaciones")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,t.bF)(J,null,{default:(0,t.k6)((()=>[(0,t.bF)(G,null,{default:(0,t.k6)((()=>[(0,t.bF)(q,{lg:4},{default:(0,t.k6)((()=>[(0,t.bF)(K,{class:"mb-3"},{default:(0,t.k6)((()=>[(0,t.bF)(j,{as:"label"},{default:(0,t.k6)((()=>[(0,t.eW)("Gestion")])),_:1}),(0,t.bF)(N,{modelValue:U.obsgestion,"onUpdate:modelValue":[a[1]||(a[1]=e=>U.obsgestion=e),a[2]||(a[2]=e=>U.obsgestion=Number(e))],"model-value":String(U.obsgestion),required:"true"},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(U.listaGestion,(e=>((0,t.uX)(),(0,t.CE)("option",{key:e,value:e},(0,s.v_)(e),9,b)))),128))])),_:1},8,["modelValue","model-value"])])),_:1})])),_:1}),(0,t.bF)(q,{lg:4},{default:(0,t.k6)((()=>[(0,t.bF)(K,{class:"mb-3"},{default:(0,t.k6)((()=>[(0,t.bF)(j,{as:"label"},{default:(0,t.k6)((()=>[(0,t.eW)("Mes")])),_:1}),(0,t.bF)(N,{modelValue:U.obsmes,"onUpdate:modelValue":a[3]||(a[3]=e=>U.obsmes=e),"model-value":String(U.obsmes),required:"true"},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(U.listaMes,(e=>((0,t.uX)(),(0,t.CE)("option",{key:e.m,value:e.m},(0,s.v_)(e.mes),9,h)))),128))])),_:1},8,["modelValue","model-value"])])),_:1})])),_:1}),(0,t.bF)(q,{lg:4,class:"text-center"},{default:(0,t.k6)((()=>[(0,t.bF)(X,{color:"success",class:"font",size:"sm",onClick:a[4]||(a[4]=e=>T.getObsUsuario())},{default:(0,t.k6)((()=>[(0,t.bF)(z,{icon:"cil-featured-playlist"}),(0,t.eW)(" Cargar Observaciones")])),_:1})])),_:1})])),_:1})])),_:1}),(0,t.bF)(ee,{class:"table-responsive"},{default:(0,t.k6)((()=>[(0,t.Lk)("table",m,[f,(0,t.Lk)("tbody",null,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(U.listaObs,(e=>((0,t.uX)(),(0,t.CE)("tr",{key:e.id},[(0,t.Lk)("td",null,(0,s.v_)(e.id),1),(0,t.Lk)("td",null,(0,s.v_)(e.uidobs),1),(0,t.Lk)("td",null,[(0,t.Lk)("div",null,(0,s.v_)(e.tipo),1),(0,t.Lk)("div",p,[(0,t.Lk)("span",null,(0,s.v_)(e.horaEntrada),1),(0,t.eW)(" | "+(0,s.v_)(e.horaSalida),1)])]),(0,t.Lk)("td",null,[(0,t.Lk)("div",null,(0,s.v_)(e.detalle),1),(0,t.Lk)("div",g,[(0,t.Lk)("span",null,(0,s.v_)(e.fechainicio),1),(0,t.eW)(" | "+(0,s.v_)(e.fechafin),1)])]),(0,t.Lk)("td",null,[2===e.estado?((0,t.uX)(),(0,t.Wv)(Y,{key:0,color:"danger"},{default:(0,t.k6)((()=>[(0,t.eW)("Rechazado")])),_:1})):(0,t.Q3)("",!0),1===e.estado?((0,t.uX)(),(0,t.Wv)(Y,{key:1,color:"success"},{default:(0,t.k6)((()=>[(0,t.eW)("Aprobado")])),_:1})):(0,t.Q3)("",!0),0===e.estado?((0,t.uX)(),(0,t.Wv)(Y,{key:2,color:"warning"},{default:(0,t.k6)((()=>[(0,t.eW)("En Espera")])),_:1})):(0,t.Q3)("",!0)]),(0,t.Lk)("td",null,[(0,t.bF)(Z,{role:"group"},{default:(0,t.k6)((()=>[(0,t.bF)(X,{color:"success",class:"font",size:"sm",onClick:a=>T.getObsDetalle(e.id)},{default:(0,t.k6)((()=>[(0,t.bF)(z,{icon:"cil-featured-playlist"})])),_:2},1032,["onClick"]),0==e.estado?((0,t.uX)(),(0,t.Wv)(X,{key:0,color:"warning",class:"font",size:"sm",onClick:a=>T.setObs(e.id)},{default:(0,t.k6)((()=>[(0,t.bF)(z,{icon:"cil-pencil"})])),_:2},1032,["onClick"])):(0,t.Q3)("",!0),0==e.estado?((0,t.uX)(),(0,t.Wv)(X,{key:1,color:"danger",class:"font",size:"sm",onClick:a=>T.deleteObs(e.id)},{default:(0,t.k6)((()=>[(0,t.bF)(z,{icon:"cil-trash"})])),_:2},1032,["onClick"])):(0,t.Q3)("",!0)])),_:2},1024)])])))),128))]),k])])),_:1})])),_:1})])),_:1})])),_:1}),(0,t.bF)(re,{size:"lg",visible:U.modalDetalleObs,onClose:a[8]||(a[8]=e=>T.clickModalDetalleObs(!1))},{default:(0,t.k6)((()=>[(0,t.bF)(te,{class:"headercolor",dismiss:"",onClose:a[5]||(a[5]=e=>T.clickModalDetalleObs(!1))},{default:(0,t.k6)((()=>[(0,t.bF)(oe,null,{default:(0,t.k6)((()=>[(0,t.Lk)("h6",null,[(0,t.bF)(z,{icon:"cil-featured-playlist",size:"lg",class:"me-2"}),(0,t.eW)("Detalles de la Observacion")])])),_:1})])),_:1}),(0,t.bF)(le,null,{default:(0,t.k6)((()=>[(0,t.bF)(se,{obsDetalle:U.obsDetalle},null,8,["obsDetalle"])])),_:1}),(0,t.bF)(ie,null,{default:(0,t.k6)((()=>[(0,t.bF)(X,{onClick:a[6]||(a[6]=e=>T.clickModalDetalleObs(!1)),color:"danger",class:"font",size:"sm"},{default:(0,t.k6)((()=>[(0,t.bF)(z,{icon:"cil-x",class:"me-2"}),(0,t.eW)("Cancelar")])),_:1}),(0,t.bF)(X,{onClick:a[7]||(a[7]=e=>T.downloadImg(U.obsDetalle.url,U.obsDetalle.imagen)),color:"success",class:"font",size:"sm"},{default:(0,t.k6)((()=>[(0,t.bF)(z,{icon:"cil-cloud-download",class:"me-2"}),(0,t.eW)("Descargar Documento")])),_:1})])),_:1})])),_:1},8,["visible"]),(0,t.bF)(re,{visible:U.modalObs,onClose:a[20]||(a[20]=e=>T.clickModalObs(!1))},{default:(0,t.k6)((()=>[(0,t.bF)(he,{onSubmit:a[19]||(a[19]=(0,l.D$)((e=>T.addObs()),["prevent"])),enctype:"multipart/form-data"},{default:(0,t.k6)((()=>[(0,t.bF)(te,{class:"headercolor text-center",dismiss:"",onClose:a[9]||(a[9]=e=>T.clickModalObs(!1))},{default:(0,t.k6)((()=>[(0,t.bF)(oe,null,{default:(0,t.k6)((()=>[(0,t.Lk)("h6",null,[(0,t.bF)(z,{icon:"cil-plus",size:"lg",class:"me-2"}),(0,t.eW)("Registrar una Observacion de Asistencia")])])),_:1})])),_:1}),(0,t.bF)(le,null,{default:(0,t.k6)((()=>[(0,t.bF)(de,{datos:U.obsDetalle.datos},null,8,["datos"]),v,(0,t.bF)(K,{class:"mb-3"},{default:(0,t.k6)((()=>[(0,t.bF)(j,{as:"label"},{default:(0,t.k6)((()=>[(0,t.eW)("UID - OBS ")])),_:1}),(0,t.bF)(ne,{type:"text",modelValue:U.obs.uidobs,"onUpdate:modelValue":a[10]||(a[10]=e=>U.obs.uidobs=e),required:"true",placeholder:"Ej. FHCE - # de hoja de Ruta"},null,8,["modelValue"])])),_:1}),(0,t.bF)(K,{class:"mb-3"},{default:(0,t.k6)((()=>[(0,t.bF)(j,{as:"label"},{default:(0,t.k6)((()=>[(0,t.eW)("Fecha de Inicio ")])),_:1}),(0,t.bF)(ne,{type:"date",modelValue:U.obs.fechainicio,"onUpdate:modelValue":a[11]||(a[11]=e=>U.obs.fechainicio=e),required:"true"},null,8,["modelValue"])])),_:1}),(0,t.bF)(K,{class:"mb-3"},{default:(0,t.k6)((()=>[(0,t.bF)(j,{as:"label"},{default:(0,t.k6)((()=>[(0,t.eW)("Fecha Fin ")])),_:1}),(0,t.bF)(ne,{type:"date",modelValue:U.obs.fechafin,"onUpdate:modelValue":a[12]||(a[12]=e=>U.obs.fechafin=e),required:"true"},null,8,["modelValue"])])),_:1}),(0,t.bF)(K,{class:"mb-3"},{default:(0,t.k6)((()=>[(0,t.bF)(j,{as:"label"},{default:(0,t.k6)((()=>[(0,t.eW)("Detalle ")])),_:1}),(0,t.bF)(ue,{modelValue:U.obs.detalle,"onUpdate:modelValue":a[13]||(a[13]=e=>U.obs.detalle=e),required:"true"},null,8,["modelValue"])])),_:1}),(0,t.bF)(K,{class:"mb-3"},{default:(0,t.k6)((()=>[(0,t.bF)(j,{as:"label"},{default:(0,t.k6)((()=>[(0,t.eW)("Tipo ")])),_:1}),(0,t.bF)(N,{modelValue:U.obs.tipo,"onUpdate:modelValue":a[14]||(a[14]=e=>U.obs.tipo=e),required:"true",onChange:a[15]||(a[15]=e=>T.getTipo())},{default:(0,t.k6)((()=>[F,_,C,E,D,O,S])),_:1},8,["modelValue"])])),_:1}),T.mostrarHoraIngreso()?((0,t.uX)(),(0,t.Wv)(K,{key:0,class:"mb-3"},{default:(0,t.k6)((()=>[(0,t.bF)(j,{as:"label"},{default:(0,t.k6)((()=>[(0,t.eW)("Hora Ingreso ")])),_:1}),(0,t.bF)(ne,{type:"text",modelValue:U.obs.horaEntrada,"onUpdate:modelValue":a[16]||(a[16]=e=>U.obs.horaEntrada=e),required:"true"},null,8,["modelValue"])])),_:1})):(0,t.Q3)("",!0),T.mostrarHoraSalida()?((0,t.uX)(),(0,t.Wv)(K,{key:1,class:"mb-3"},{default:(0,t.k6)((()=>[(0,t.bF)(j,{as:"label"},{default:(0,t.k6)((()=>[(0,t.eW)("Hora Salida ")])),_:1}),(0,t.bF)(ne,{type:"text",modelValue:U.obs.horaSalida,"onUpdate:modelValue":a[17]||(a[17]=e=>U.obs.horaSalida=e),required:"true"},null,8,["modelValue"])])),_:1})):(0,t.Q3)("",!0),(0,t.bF)(K,{class:"mb-3"},{default:(0,t.k6)((()=>[(0,t.bF)(j,{as:"label"},{default:(0,t.k6)((()=>[(0,t.eW)("Documento")])),_:1}),(0,t.bF)(ne,{type:"file",ref:"fileInput",id:"filedoc",accept:"image/png,image/jpeg",onChange:T.selectFile,valid:U.fileValid,required:"true"},null,8,["onChange","valid"]),U.fileValid?((0,t.uX)(),(0,t.Wv)(j,{key:0},{default:(0,t.k6)((()=>[(0,t.bF)(z,{icon:"cil-check",class:"text-success"})])),_:1})):(0,t.Q3)("",!0)])),_:1}),U.uploading?((0,t.uX)(),(0,t.Wv)(be,{key:2,height:50,class:"mb-3"},{default:(0,t.k6)((()=>[(0,t.bF)(ce,{value:U.uploadProgress,color:100===U.uploadProgress?"success":"warning",animated:""},{default:(0,t.k6)((()=>[(0,t.eW)(" Espere un Momento ........... "+(0,s.v_)(U.uploadProgress)+" % ",1)])),_:1},8,["value","color"])])),_:1})):(0,t.Q3)("",!0)])),_:1}),(0,t.bF)(ie,null,{default:(0,t.k6)((()=>[(0,t.bF)(X,{onClick:a[18]||(a[18]=e=>T.clickModalObs(!1)),color:"danger",class:"font",size:"sm"},{default:(0,t.k6)((()=>[(0,t.bF)(z,{icon:"cil-x",class:"me-2"}),(0,t.eW)("Cancelar")])),_:1}),(0,t.bF)(X,{type:"submit",class:"font",color:"success",size:"sm"},{default:(0,t.k6)((()=>[(0,t.bF)(z,{icon:"cil-check-alt",class:"me-2"}),(0,t.eW)(" Agregar Observacion")])),_:1})])),_:1})])),_:1})])),_:1},8,["visible"]),(0,t.bF)(re,{visible:U.modalObsEditar,onClose:a[32]||(a[32]=e=>T.clickModalObsEditar(!1))},{default:(0,t.k6)((()=>[(0,t.bF)(he,{onSubmit:a[31]||(a[31]=(0,l.D$)((e=>T.updateObs()),["prevent"])),enctype:"multipart/form-data"},{default:(0,t.k6)((()=>[(0,t.bF)(te,{class:"headercolor text-center",dismiss:"",onClose:a[21]||(a[21]=e=>T.clickModalObsEditar(!1))},{default:(0,t.k6)((()=>[(0,t.bF)(oe,null,{default:(0,t.k6)((()=>[(0,t.Lk)("h6",null,[(0,t.bF)(z,{icon:"cil-pencil",size:"lg",class:"me-2"}),(0,t.eW)("Actualizar la Observacion de Asistencia")])])),_:1})])),_:1}),(0,t.bF)(le,null,{default:(0,t.k6)((()=>[(0,t.bF)(de,{datos:U.obsDetalle.datos},null,8,["datos"]),L,(0,t.bF)(K,{class:"mb-3"},{default:(0,t.k6)((()=>[(0,t.bF)(j,{as:"label"},{default:(0,t.k6)((()=>[(0,t.eW)("UID - OBS ")])),_:1}),(0,t.bF)(ne,{type:"text",modelValue:U.uobs.uidobs,"onUpdate:modelValue":a[22]||(a[22]=e=>U.uobs.uidobs=e),required:"true",placeholder:"Ej. FHCE - # de hoja de Ruta"},null,8,["modelValue"])])),_:1}),(0,t.bF)(K,{class:"mb-3"},{default:(0,t.k6)((()=>[(0,t.bF)(j,{as:"label"},{default:(0,t.k6)((()=>[(0,t.eW)("Fecha de Inicio ")])),_:1}),(0,t.bF)(ne,{type:"date",modelValue:U.uobs.fechainicio,"onUpdate:modelValue":a[23]||(a[23]=e=>U.uobs.fechainicio=e),required:"true"},null,8,["modelValue"])])),_:1}),(0,t.bF)(K,{class:"mb-3"},{default:(0,t.k6)((()=>[(0,t.bF)(j,{as:"label"},{default:(0,t.k6)((()=>[(0,t.eW)("Fecha Fin ")])),_:1}),(0,t.bF)(ne,{type:"date",modelValue:U.uobs.fechafin,"onUpdate:modelValue":a[24]||(a[24]=e=>U.uobs.fechafin=e),required:"true"},null,8,["modelValue"])])),_:1}),(0,t.bF)(K,{class:"mb-3"},{default:(0,t.k6)((()=>[(0,t.bF)(j,{as:"label"},{default:(0,t.k6)((()=>[(0,t.eW)("Detalle ")])),_:1}),(0,t.bF)(ue,{modelValue:U.uobs.detalle,"onUpdate:modelValue":a[25]||(a[25]=e=>U.uobs.detalle=e),required:"true"},null,8,["modelValue"])])),_:1}),(0,t.bF)(K,{class:"mb-3"},{default:(0,t.k6)((()=>[(0,t.bF)(j,{as:"label"},{default:(0,t.k6)((()=>[(0,t.eW)("Tipo ")])),_:1}),(0,t.bF)(N,{modelValue:U.uobs.tipo,"onUpdate:modelValue":a[26]||(a[26]=e=>U.uobs.tipo=e),required:"true",onChange:a[27]||(a[27]=e=>T.getUTipo())},{default:(0,t.k6)((()=>[y,w,V,W,A,M,I])),_:1},8,["modelValue"])])),_:1}),T.mostrarUHoraIngreso()?((0,t.uX)(),(0,t.Wv)(K,{key:0,class:"mb-3"},{default:(0,t.k6)((()=>[(0,t.bF)(j,{as:"label"},{default:(0,t.k6)((()=>[(0,t.eW)("Hora Ingreso ")])),_:1}),(0,t.bF)(ne,{type:"text",modelValue:U.uobs.horaEntrada,"onUpdate:modelValue":a[28]||(a[28]=e=>U.uobs.horaEntrada=e),required:"true"},null,8,["modelValue"])])),_:1})):(0,t.Q3)("",!0),T.mostrarUHoraSalida()?((0,t.uX)(),(0,t.Wv)(K,{key:1,class:"mb-3"},{default:(0,t.k6)((()=>[(0,t.bF)(j,{as:"label"},{default:(0,t.k6)((()=>[(0,t.eW)("Hora Salida ")])),_:1}),(0,t.bF)(ne,{type:"text",modelValue:U.uobs.horaSalida,"onUpdate:modelValue":a[29]||(a[29]=e=>U.uobs.horaSalida=e),required:"true"},null,8,["modelValue"])])),_:1})):(0,t.Q3)("",!0),(0,t.bF)(K,{class:"mb-3"},{default:(0,t.k6)((()=>[(0,t.bF)(j,{as:"label"},{default:(0,t.k6)((()=>[(0,t.eW)("Documento")])),_:1}),(0,t.bF)(ne,{type:"file",ref:"fileInput",id:"filedoc",accept:"image/png,image/jpeg",onChange:T.selectFile,valid:U.fileValid,required:"true"},null,8,["onChange","valid"]),U.fileValid?((0,t.uX)(),(0,t.Wv)(j,{key:0},{default:(0,t.k6)((()=>[(0,t.bF)(z,{icon:"cil-check",class:"text-success"})])),_:1})):(0,t.Q3)("",!0)])),_:1}),U.uploading?((0,t.uX)(),(0,t.Wv)(be,{key:2,height:50,class:"mb-3"},{default:(0,t.k6)((()=>[(0,t.bF)(ce,{value:U.uploadProgress,color:100===U.uploadProgress?"success":"warning",animated:""},{default:(0,t.k6)((()=>[(0,t.eW)(" Espere un Momento ........... "+(0,s.v_)(U.uploadProgress)+" % ",1)])),_:1},8,["value","color"])])),_:1})):(0,t.Q3)("",!0)])),_:1}),(0,t.bF)(ie,null,{default:(0,t.k6)((()=>[(0,t.bF)(X,{onClick:a[30]||(a[30]=e=>T.clickModalObsEditar(!1)),color:"danger",class:"font",size:"sm"},{default:(0,t.k6)((()=>[(0,t.bF)(z,{icon:"cil-x",class:"me-2"}),(0,t.eW)("Cancelar")])),_:1}),(0,t.bF)(X,{type:"submit",class:"font",color:"success",size:"sm"},{default:(0,t.k6)((()=>[(0,t.bF)(z,{icon:"cil-check-alt",class:"me-2"}),(0,t.eW)(" Actualizar Observacion")])),_:1})])),_:1})])),_:1})])),_:1},8,["visible"])],64)}o(4114),o(4603),o(7566),o(8721);var U=o(7897),T=o(3817),$=o(7590),z=o(7950),q=o(7160),P={name:"ObservacionesView",components:{ComponenteObs:U.A,ComponenteNombres:T.A},data(){return{titulo:"Observaciones",archivo:null,fileValid:!1,sccService:null,egovfService:null,uploadService:null,modalDetalleObs:!1,modalObsEditar:!1,listaGestion:[],uploading:!1,uploadProgress:0,listaMes:[{m:"01",mes:"Enero"},{m:"02",mes:"Febrero"},{m:"03",mes:"Marzo"},{m:"04",mes:"Abril"},{m:"05",mes:"Mayo"},{m:"06",mes:"Junio"},{m:"07",mes:"Julio"},{m:"08",mes:"Agosto"},{m:"09",mes:"Septiembre"},{m:"10",mes:"Octubre"},{m:"11",mes:"Noviembre"},{m:"12",mes:"Diciembre"}],usuario:{token:"",cif:"",correo:"",celular:"",pass:"",unidad:"",sigla:""},obsgestion:0,obsmes:0,listaObs:[],obsDetalle:{id:0,idObs:0,cif:0,sexo:0,uidobs:"",fechainicio:"",fechafin:"",gestion:0,mes:0,di:0,df:0,detalle:"",imagen:"",tipo:"",horaEntrada:"",hentrada:"",mentrada:"",horaSalida:"",hsalida:"",msalida:"",url:"",estado:0,idtipo:"PRIVADO",datos:{cif:0,nombre:"",apellido:""},forma:{color:"",estado:""}},egovf:{idPersona:0,nombre:"",paterno:"",materno:"",fecha:"",sexo:0,idUsuario:0,cif:0,matricula:0,ci:"",ci_com:0,complemento:"",correo:"",celular:"",pass:"",unidad:"",dependiente:"",sigla:""},modalObs:!1,obs:{cif:null,uidobs:"",fechainicio:"",fechafin:"",detalle:"Referencia por la que pide su Observación",imagen:"",tipo:"Seleccionar Tipo",horaEntrada:"08:30",horaSalida:"16:30",url:"",estado:0},uobs:{id:0,idObs:0,cif:null,sexo:0,uidobs:"",fechainicio:"",fechafin:"",detalle:"",imagen:"",tipo:"",horaEntrada:"",horaSalida:"",url:"",estado:0}}},mounted(){this.cifCiudadano=this.$cookies.get("cif"),this.getDatos(),this.getGestion(),this.getEgovf()},created(){this.sccService=new $.A,this.egovfService=new z.A,this.uploadService=new q.A},methods:{selectFile(e){const a=this.getSafeFileInput(e);a?.files?.length?(this.archivo=a.files[0],this.validateFile(this.archivo)?this.fileValid=!0:this.resetFileInput()):this.resetFileInput()},getDatos(){null!=this.$cookies.get("cif")&&(this.usuario.token=this.$cookies.get("token"),this.usuario.cif=this.$cookies.get("cif"),this.usuario.correo=this.$cookies.get("correo"),this.usuario.celular=this.$cookies.get("celular"),this.usuario.pass=this.$cookies.get("pass"),this.usuario.unidad=this.$cookies.get("unidad"),this.usuario.sigla=this.$cookies.get("sigla"),this.usuario.foto=this.$cookies.get("foto"))},getGestion(){var e=[];const a=new Date;this.obsgestion=a.getFullYear();for(var o=2021;o<=this.obsgestion;o++)e.push(o);this.listaGestion=e},async getObsUsuario(){await this.sccService.getObsUsuario(this.usuario.cif,this.obsgestion,this.obsmes).then((e=>{this.listaObs=e.data})),0==this.listaObs.length&&this.$swal.fire("No se encontro ninguna Observacion","","info")},getObsDetalle(e){this.listaObs.forEach((a=>{if(a.id===e)return this.obsDetalle.id=a.id,this.obsDetalle.idObs=a.idObs,this.obsDetalle.cif=a.cif,this.obsDetalle.sexo=a.sexo,this.obsDetalle.uidobs=a.uidobs,this.obsDetalle.fechainicio=a.fechainicio,this.obsDetalle.fechafin=a.fechafin,this.obsDetalle.gestion=a.gestion,this.obsDetalle.mes=a.mes,this.obsDetalle.di=a.di,this.obsDetalle.df=a.df,this.obsDetalle.detalle=a.detalle,this.obsDetalle.imagen=a.imagen,this.obsDetalle.tipo=a.tipo,this.obsDetalle.horaEntrada=a.horaEntrada,this.obsDetalle.hEntrada=a.hEntrada,this.obsDetalle.mEntrada=a.mEntrada,this.obsDetalle.horaSalida=a.horaSalida,this.obsDetalle.hSalida=a.hSalida,this.obsDetalle.mSalida=a.mSalida,this.obsDetalle.url=a.url,this.obsDetalle.estado=a.estado,1==a.idtipo?this.obsDetalle.idtipo="GENERAL":this.obsDetalle.idtipo="PRIVADO",1==this.obsDetalle.estado&&(this.obsDetalle.forma.color="success",this.obsDetalle.forma.estado="Aprobado"),0==this.obsDetalle.estado&&(this.obsDetalle.forma.color="warning",this.obsDetalle.forma.estado="En Espera"),2==this.obsDetalle.estado&&(this.obsDetalle.forma.color="danger",this.obsDetalle.forma.estado="Rechazado: Espere la Devolucion de su nota"),!0})),this.clickModalDetalleObs(!0)},clickModalDetalleObs(e){this.modalDetalleObs=e},async getEgovf(){this.egovfService.headersUsuario(this.usuario.token),await this.egovfService.getEgovf(this.usuario.cif).then((e=>{this.egovf=e.data,this.obsDetalle.datos.cif=this.egovf.cif,this.obsDetalle.datos.nombre=this.egovf.nombre,this.obsDetalle.datos.apellido=this.egovf.paterno+" "+this.egovf.materno}))},async downloadImg(e,a){const o=await(await fetch(e)).blob(),t=URL.createObjectURL(o);Object.assign(document.createElement("a"),{href:t,download:a}).click(),URL.revokeObjectURL(t)},clickModalObs(e){this.modalObs=e},getTipo(){"Entrada M."==this.obs.tipo&&(this.obs.horaEntrada="08:30"),"Salida M."==this.obs.tipo&&(this.obs.horaSalida="12:30"),"Entrada T."==this.obs.tipo&&(this.obs.horaEntrada="14:30"),"Salida T."==this.obs.tipo&&(this.obs.horaSalida="18:30"),"continuo"==this.obs.tipo&&(this.obs.horaSalida="16:30"),"continuoingreso"==this.obs.tipo&&(this.obs.horaEntrada="08:30",this.obs.horaSalida="16:30"),"asueto"==this.obs.tipo&&(this.obs.horaEntrada="08:30")},mostrarHoraIngreso(){const e=["continuoingreso","Entrada M.","Entrada T.","horas","extraordinario","comision","permiso"];return e.includes(this.obs.tipo)},mostrarHoraSalida(){const e=["continuoingreso","continuo","Salida M.","Salida T."];return e.includes(this.obs.tipo)},getUTipo(){"Entrada M."==this.uobs.tipo&&(this.uobs.horaEntrada="08:30"),"Salida M."==this.uobs.tipo&&(this.uobs.horaSalida="12:30"),"Entrada T."==this.uobs.tipo&&(this.uobs.horaEntrada="14:30"),"Salida T."==this.uobs.tipo&&(this.uobs.horaSalida="18:30"),"continuo"==this.uobs.tipo&&(this.uobs.horaEntrada="08:30",this.uobs.horaSalida="16:30"),"continuoingreso"==this.uobs.tipo&&(this.uobs.horaEntrada="08:30",this.uobs.horaSalida="16:30"),"asueto"==this.uobs.tipo&&(this.uobs.horaEntrada="08:30")},mostrarUHoraIngreso(){const e=["continuoingreso","Entrada M.","Entrada T.","horas","extraordinario","comision","permiso"];return e.includes(this.uobs.tipo)},mostrarUHoraSalida(){const e=["continuoingreso","continuo","Salida M.","Salida T."];return e.includes(this.uobs.tipo)},async addObs(){this.uploading=!0,this.uploadProgress=0;try{const e=new FormData;e.append("archivo",this.archivo);const a={onUploadProgress:e=>{this.uploadProgress=Math.round(100*e.loaded/e.total)}},o=await this.uploadService.addImagen(e,a);if(200!==o.status)throw new Error("Error al subir archivo");this.obs.url=this.uploadService.getUrl()+o.data.nombre,this.obs.imagen=o.data.nombre,this.obs.cif=this.usuario.cif,this.$swal.fire({title:"Deseas Agregar la Observacion de Tu Asistencia ?",showDenyButton:!0,icon:"info",confirmButtonText:"Aceptar",denyButtonText:"Cancelar"}).then((e=>{e.isConfirmed?this.sccService.addObsEmpleado(this.obs).then((e=>{201==e.status?this.$swal.fire("La Observacion fue Agregada Corectamente","Recuerda que para que tenga efecto debe de ser aprobada por tu inmediato superior","success").then((e=>{e&&location.reload()})):this.$swal.fire("La Observacion no pudo ser Registrada",""+e.status,"error")})):e.isDenied&&this.$swal.fire("Datos Cancelados","","info")}))}catch(e){this.$swal.fire("El archivo no pudo ser Guardado  "+e,"","error")}finally{this.uploading=!1,this.uploadProgress=0}},async updateObs(){this.uploading=!0,this.uploadProgress=0;try{const e=new FormData;e.append("archivo",this.archivo);const a={onUploadProgress:e=>{this.uploadProgress=Math.round(100*e.loaded/e.total)}},o=await this.uploadService.addImagen(e,a);if(200!==o.status)throw new Error("Error al subir archivo");this.uobs.url=this.uploadService.getUrl()+o.data.nombre,this.uobs.imagen=o.data.nombre,this.$swal.fire({title:"Deseas Actualizar la Observacion de Tu Asistencia ?",showDenyButton:!0,icon:"info",confirmButtonText:"Aceptar",denyButtonText:"Cancelar"}).then((e=>{e.isConfirmed?this.sccService.updateObsEmpleado(this.uobs).then((e=>{200==e.status?this.$swal.fire("La Observacion fue Actualizada Corectamente","Recuerda que para que tenga efecto debe de ser aprobada por tu inmediato superior","success").then((e=>{e&&location.reload()})):this.$swal.fire("La Observacion no pudo ser Actualizada",""+e.status,"error")})):e.isDenied&&this.$swal.fire("Datos Cancelados","","info")}))}catch(e){this.$swal.fire("El archivo no pudo ser Guardado  "+e,"","error")}},clickModalObsEditar(e){this.modalObsEditar=e},setObs(e){this.listaObs.forEach((a=>{a.id===e&&(this.uobs.id=e,this.uobs.idObs=a.idObs,this.uobs.cif=a.cif,this.uobs.sexo=a.sexo,this.uobs.uidobs=a.uidobs,this.uobs.fechainicio=a.fechainicio,this.uobs.fechafin=a.fechafin,this.uobs.detalle=a.detalle,this.uobs.imagen=a.imagen,this.uobs.tipo=a.tipo,this.uobs.horaEntrada=a.horaEntrada,this.uobs.horaSalida=a.horaSalida,this.uobs.url=a.url,this.uobs.estado=a.estado)})),this.clickModalObsEditar(!0)},async deleteObs(e){var a={id:0,idObs:"",cif:0,sexo:0,uidobs:"",fechainicio:"",fechafin:"",gestion:0,mes:0,di:0,df:0,detalle:"",imagen:"",tipo:"",horaEntrada:0,hEntrada:0,mEntrada:0,horaSalida:0,hSalida:0,mSalida:0,url:"",estado:0};this.listaObs.forEach((o=>{o.id==e&&(a=o,a.estado=3)})),await this.$swal.fire({title:"Desea Eliminar la Observacion ? ",showDenyButton:!0,icon:"error",confirmButtonText:"Aceptar",denyButtonText:"Cancelar"}).then((e=>{e.isConfirmed?this.sccService.updateObsEmpleado(a).then((e=>{200==e.status?this.$swal.fire("Observacion Eliminada Corectamente","","success").then((e=>{e&&location.reload()})):this.$swal.fire("Los Datos no fueron Guardados Error"+e.status,"","error")})):e.isDenied&&this.$swal.fire("Datos Cancelados","","info")}))},getSafeFileInput(e){return this.$refs.fileInput?.$refs?.input||e?.target||this.$refs.fileInput?.$el?.querySelector?.('input[type="file"]')||document.getElementById("filedoc")},validateFile(e){const a=["image/jpeg","image/png"];return e&&a.includes(e.type)},resetFileInput(){this.archivo=null,this.fileValid=!1;const e=this.getSafeFileInput();e&&(e.value="")}}},X=o(1241);const B=(0,X.A)(P,[["render",x]]);var H=B},3817:function(e,a,o){o.d(a,{A:function(){return d}});var t=o(6768);function s(e,a,o,s,l,i){const r=(0,t.g2)("CIcon"),d=(0,t.g2)("CWidgetStatsF"),n=(0,t.g2)("CCol"),u=(0,t.g2)("CRow");return(0,t.uX)(),(0,t.Wv)(u,null,{default:(0,t.k6)((()=>[(0,t.bF)(n,{xs:12},{default:(0,t.k6)((()=>[(0,t.bF)(d,{color:"dark",padding:!1,title:o.datos.nombre+" "+o.datos.apellido,value:"CIF : "+o.datos.cif},{icon:(0,t.k6)((()=>[(0,t.bF)(r,{icon:"cil-user",size:"xl"})])),_:1},8,["title","value"])])),_:1})])),_:1})}var l={name:"ComponenteNombres",props:["datos"]},i=o(1241);const r=(0,i.A)(l,[["render",s]]);var d=r}}]);
//# sourceMappingURL=589.54cc9afd.js.map