"use strict";(self["webpackChunkegovf"]=self["webpackChunkegovf"]||[]).push([[142],{7950:function(e,t,s){s.d(t,{A:function(){return n}});var i=s(4373),a=s(1660);const l=a.j6;class n{headersUsuario(e){i.A.defaults.headers.common["Authorization"]="Bearer "+e}getEgovf(e){return i.A.get(l+"ciudadano/getEgovf",{params:{cif:e}})}getListaCiudadano(){return i.A.get(l+"ciudadano/getListaCiudadano")}getListaCiudadanoPublico(){return i.A.get(l+"ciudadano/getListaCiudadanoPublico")}getListaEmpleado(){return i.A.get(l+"ciudadano/getListaEmpleado")}}},9142:function(e,t,s){s.r(t),s.d(t,{default:function(){return W}});var i=s(6768),a=s(4232);const l={class:"table-responsive"},n={class:"table table-striped table-hover",id:"printAsistencia"},o=(0,i.Lk)("thead",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("th",null,"#"),(0,i.Lk)("th",null,"Detalle"),(0,i.Lk)("th",null,"Cantidad"),(0,i.Lk)("th",null,"%")])],-1),r=(0,i.Lk)("td",null,"1",-1),d=(0,i.Lk)("td",null,"Excelente",-1),u=(0,i.Lk)("td",null,"2",-1),c=(0,i.Lk)("td",null,"Regular",-1),h=(0,i.Lk)("td",null,"3",-1),g=(0,i.Lk)("td",null,"En Linea Roja",-1),k=(0,i.Lk)("td",null,"4",-1),m=(0,i.Lk)("td",null,"Llamada de Atencion",-1),f=(0,i.Lk)("tr",null,null,-1),L=(0,i.Lk)("br",null,null,-1),b=(0,i.Lk)("br",null,null,-1),p=(0,i.Lk)("h2",{class:"text-center"},"Ranking de Asistencias",-1),v=(0,i.Lk)("hr",null,null,-1),F={class:"table-responsive"},_={class:"table table-striped table-hover",id:"printRecord"},C=(0,i.Lk)("thead",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("th",null,"#"),(0,i.Lk)("th",null,"CIF"),(0,i.Lk)("th",null,"C.I."),(0,i.Lk)("th",null,"Nombres y Apellidos"),(0,i.Lk)("th",null,"Minutos de Retraso")])],-1),A=(0,i.Lk)("br",null,null,-1),R={class:"small text-medium-emphasis"},x=(0,i.Lk)("span",null,"Unidad",-1),E=(0,i.Lk)("tfoot",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("th"),(0,i.Lk)("th"),(0,i.Lk)("th"),(0,i.Lk)("th"),(0,i.Lk)("th")])],-1);function S(e,t,s,S,w,y){const z=(0,i.g2)("CCol"),$=(0,i.g2)("CIcon"),j=(0,i.g2)("CButton"),M=(0,i.g2)("CRow"),I=(0,i.g2)("CCardHeader"),P=(0,i.g2)("CCardBody"),W=(0,i.g2)("CCard");return(0,i.uX)(),(0,i.Wv)(M,null,{default:(0,i.k6)((()=>[(0,i.bF)(z,{xs:12},{default:(0,i.k6)((()=>[(0,i.bF)(W,null,{default:(0,i.k6)((()=>[(0,i.bF)(I,{class:"headercolor"},{default:(0,i.k6)((()=>[(0,i.bF)(M,null,{default:(0,i.k6)((()=>[(0,i.bF)(z,{lg:8,class:"text-center"},{default:(0,i.k6)((()=>[(0,i.eW)("Ranking De Asistencias mes de "+(0,a.v_)(w.mes)+" del "+(0,a.v_)(w.record.gestion),1)])),_:1}),(0,i.bF)(z,{lg:4,class:"text-end"},{default:(0,i.k6)((()=>[(0,i.bF)(j,{color:"success",class:"font",onClick:t[0]||(t[0]=e=>y.pdfRecord()),size:"sm"},{default:(0,i.k6)((()=>[(0,i.bF)($,{icon:"cil-cloud-download",class:"me-2"}),(0,i.eW)("Descargar PDF")])),_:1})])),_:1})])),_:1})])),_:1}),(0,i.bF)(P,null,{default:(0,i.k6)((()=>[(0,i.bF)(M,null,{default:(0,i.k6)((()=>[(0,i.bF)(z,{lg:6},{default:(0,i.k6)((()=>[(0,i.bF)(W,null,{default:(0,i.k6)((()=>[(0,i.bF)(I,{class:"headercolor"},{default:(0,i.k6)((()=>[(0,i.eW)(" Estadisticas de Asistencia ")])),_:1}),(0,i.bF)(P,null,{default:(0,i.k6)((()=>[(0,i.Lk)("div",l,[(0,i.Lk)("table",n,[o,(0,i.Lk)("tbody",null,[(0,i.Lk)("tr",null,[r,d,(0,i.Lk)("td",null,(0,a.v_)(w.stadist.excelente),1),(0,i.Lk)("td",null,(0,a.v_)((w.stadist.excelente/w.ln*100).toFixed(2))+"%",1)]),(0,i.Lk)("tr",null,[u,c,(0,i.Lk)("td",null,(0,a.v_)(w.stadist.regular),1),(0,i.Lk)("td",null,(0,a.v_)((w.stadist.regular/w.ln*100).toFixed(2))+"%",1)]),(0,i.Lk)("tr",null,[h,g,(0,i.Lk)("td",null,(0,a.v_)(w.stadist.roja),1),(0,i.Lk)("td",null,(0,a.v_)((w.stadist.roja/w.ln*100).toFixed(2))+"%",1)]),(0,i.Lk)("tr",null,[k,m,(0,i.Lk)("td",null,(0,a.v_)(w.stadist.atencion),1),(0,i.Lk)("td",null,(0,a.v_)((w.stadist.atencion/w.ln*100).toFixed(2))+"%",1)]),f])])])])),_:1})])),_:1})])),_:1}),(0,i.bF)(z,{lg:6},{default:(0,i.k6)((()=>[(0,i.bF)(W,null,{default:(0,i.k6)((()=>[(0,i.bF)(I,{class:"headercolor"},{default:(0,i.k6)((()=>[(0,i.eW)(" Grafico de Asistencia")])),_:1}),(0,i.bF)(P)])),_:1})])),_:1})])),_:1}),(0,i.bF)(M,null,{default:(0,i.k6)((()=>[L])),_:1}),(0,i.bF)(M,null,{default:(0,i.k6)((()=>[b,p,v,(0,i.Lk)("div",F,[(0,i.Lk)("table",_,[C,(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(w.listaR,(e=>((0,i.uX)(),(0,i.CE)("tr",{key:e.id},[(0,i.Lk)("td",null,(0,a.v_)(e.id),1),(0,i.Lk)("td",null,[(0,i.bF)(j,{color:"success",class:"font",size:"sm",onClick:t=>y.getReporteMes(e.cif)},{default:(0,i.k6)((()=>[(0,i.eW)((0,a.v_)(e.cif),1)])),_:2},1032,["onClick"])]),(0,i.Lk)("td",null,(0,a.v_)(e.ci),1),(0,i.Lk)("td",null,[(0,i.Lk)("div",null,[(0,i.eW)((0,a.v_)(e.nombre),1),A]),(0,i.Lk)("div",R,[x,(0,i.eW)(" | "+(0,a.v_)(e.unidad)+" -> [ "+(0,a.v_)(e.retraso)+" | "+(0,a.v_)(e.antisipado)+" | "+(0,a.v_)(e.pena)+" ] ",1)])]),(0,i.Lk)("td",null,(0,a.v_)(e.retraso)+" min.",1)])))),128))]),E])])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}s(4114);var w=s(7590),y=s(7950),z=s(1749),$=s(5839),j=s.n($),M={name:"RecordView",components:{},data(){return{sccService:null,listaPersona:[],listaCiudadanoEmpleado:[],listaR:null,ln:0,mes:"",uri:"",usuario:{token:"",cif:"",correo:"",celular:"",pass:"",unidad:"",sigla:""},record:{gestion:2023,mes:0,tipo:0,di:"00",df:"00"},stadist:{excelente:0,regular:0,roja:0,atencion:0}}},beforeCreate(){null==this.$cookies.get("cif")&&this.$router.push("/")},created(){this.sccService=new w.A,this.egovfService=new y.A},mounted(){this.uri=this.$route.params.uri,this.record.gestion=this.uri.substring(0,4),this.record.mes=this.uri.substring(5,7),this.record.tipo=this.uri.substring(8),this.getMes(),this.getDatos(),this.getListaCiudadanoEmpleado()},methods:{getDatos(){null!=this.$cookies.get("cif")&&(this.usuario.token=this.$cookies.get("token"),this.usuario.cif=this.$cookies.get("cif"),this.usuario.correo=this.$cookies.get("correo"),this.usuario.celular=this.$cookies.get("celular"),this.usuario.pass=this.$cookies.get("pass"),this.usuario.unidad=this.$cookies.get("unidad"),this.usuario.sigla=this.$cookies.get("sigla"),this.usuario.foto=this.$cookies.get("foto"),this.egovfService.headersUsuario(this.usuario.token))},getMes(){1==this.record.mes&&(this.mes="Enero"),2==this.record.mes&&(this.mes="Febrero"),3==this.record.mes&&(this.mes="Marzo"),4==this.record.mes&&(this.mes="Abril"),5==this.record.mes&&(this.mes="Mayo"),6==this.record.mes&&(this.mes="Junio"),7==this.record.mes&&(this.mes="Julio"),8==this.record.mes&&(this.mes="Agosto"),9==this.record.mes&&(this.mes="Septiembre"),10==this.record.mes&&(this.mes="Octubre"),11==this.record.mes&&(this.mes="Noviembre"),12==this.record.mes&&(this.mes="Diciembre")},async getListaCiudadanoEmpleado(){await this.egovfService.getListaEmpleado().then((e=>{this.listaCiudadanoEmpleado=e.data,this.getRecord()}))},getReporteMes(e){window.open(this.$router.resolve({name:"ReporteView",params:{uri:e+"j"+this.record.gestion+"m"+this.record.mes+"m"+this.record.di+"k"+this.record.df}}).href,"_blank")},async getRecord(){await this.sccService.getRecord(this.record).then((e=>{this.listaRecord=e.data}));var e=1;this.listaR=[],this.listaRecord.forEach((t=>{this.listaCiudadanoEmpleado.forEach((s=>{var i={id:0,cif:0,ci:"",nombre:"",unidad:"",retraso:0,antisipado:0,pena:0};return s.cif!=t.cif||(i.id=e,i.cif=s.cif,i.ci=s.ci,i.nombre=s.nombre+" "+s.paterno+" "+s.materno,i.unidad=s.sigla,i.retraso=t.retraso,i.antisipado=t.antisipado,i.pena=t.pena,0==t.retraso&&(this.stadist.excelente=this.stadist.excelente+1),t.retraso>=1&&t.retraso<=25&&(this.stadist.regular=this.stadist.regular+1),t.retraso>=26&&t.retraso<=59&&(this.stadist.roja=this.stadist.roja+1),t.retraso>=60&&(this.stadist.atencion=this.stadist.atencion+1),e+=1,this.listaR.push(i),!1)})),this.ln=this.ln+1}))},pdfRecord(){var e=new Image;const t=new z["default"]("p","mm","letter");e.src="https://fhcevirtual.umsa.bo/egovf-img/imagenes/logoticjpg.jpg",t.addImage(e,"JPEG",43,14,15,10),e.src="https://fhcevirtual.umsa.bo/egovf-img/imagenes/logofhce.jpg",t.addImage(e,"JPEG",215/7.8,14,15,10),e.src="https://fhcevirtual.umsa.bo/egovf-img/imagenes/logoumsa.jpg",t.addImage(e,"JPEG",21.5,12,6,12),t.setFontSize(12),t.setFont(void 0,"bold"),t.text("Universidad Mayor de San Andrés",107.5,18,{align:"center"}),t.setFontSize(10),t.setFont(void 0,"normal"),t.text("Facultad de Humanidades y Ciencias de la Educación",107.5,23,{align:"center"}),t.setFontSize(8),t.text("Unidad de Tecnologías de la Información y la Comunicación  UMSA-FHCE",107.5,28,{align:"center"}),t.setFontSize(12),t.text("Ranking de Asistencias Mes de "+this.mes+" del "+this.record.gestion,107.5,45,{align:"center"}),t.setFontSize(10);var s=50;t.text("Lic. Jaime A. Montecinos Marquez",53.75,s+25,{align:"center"}),t.text("Responsable Unidad TIC.",53.75,s+30,{align:"center"}),t.text("Vo. Bo.",162,s+25,{align:"center"}),t.text("Inmediato Superior",162,s+30,{align:"center"}),s+=45,t.text("Estadisticas de Asistencia",107.5,s,{align:"center"}),s+=5,j()(t,{startY:s,margin:{left:20},styles:{fontSize:8},html:"#printAsistencia",showFoot:"lastPage"}),s=t.lastAutoTable.finalY,t.setFontSize(15),j()(t,{startY:s+15,margin:{left:20},styles:{fontSize:8},html:"#printRecord",showFoot:"lastPage"}),t.save(this.mes+this.record.gestion+"record.pdf")}}},I=s(1241);const P=(0,I.A)(M,[["render",S]]);var W=P}}]);
//# sourceMappingURL=142.44c9622c.js.map