"use strict";(self["webpackChunkegovf"]=self["webpackChunkegovf"]||[]).push([[432],{1133:function(e,a,t){t.d(a,{A:function(){return i}});var o=t(4373),l=t(1660);const s=l.Qy;class i{getEmpleado(e){return o.A.get(s+"empleado/getEmpleado",{params:{cif:e}})}getListaTipoEmpleado(){return o.A.get(s+"tipo/listar")}getListarEmpleadoModuloCif(e){return o.A.get(s+"modulo/getListarEmpleadoModuloCif",{params:{cif:e}})}getListarEmpleadoModulo(e){return o.A.get(s+"modulo/getListarEmpleadoModulo",{params:{cif:e}})}addContrato(e){const a=new Date;let t=e.numerocontrato;const l={cif:e.cif,numero_contrato:t.toUpperCase(),servicio:e.servicio,unidad:e.unidad,inicio:e.inicio,fin:e.fin,gestion:a.getFullYear(),detalle:e.detalle,idTipoEmpleado:e.idTipoEmpleado,cargo:e.cargo,foto:e.foto};return o.A.post(s+"contrato/addContrato",l)}updateContrato(e,a){let t=e.numerocontrato;const l={id:e.id,cif:e.cif,numero_contrato:t.toUpperCase(),servicio:e.servicio,unidad:e.unidad,inicio:e.inicio,fin:e.fin,gestion:e.gestion,detalle:e.detalle,idTipoEmpleado:e.idTipoEmpleado,foto:a,cargo:e.cargo};return o.A.put(s+"contrato/updateContrato",l)}getTipoEmpleado(e){return o.A.get(s+"tipo/getTipoEmpleado",{params:{id:e}})}getListaEmpleado(e){return o.A.get(s+"empleado/getListaEmpleado",{params:{tipo:e}})}getEmpleados(){return o.A.get(s+"empleado/getEmpleados")}getListaModulo(){return o.A.get(s+"modulo/listar")}addEmpleadoModulo(e){const a={cif:e.cif,id_modulo:e.id_modulo,estado:1};return o.A.post(s+"empmodulo/addEmpleadoModulo",a)}updateEmpleadoEliminar(e){const a={id:e.id,cif:e.cif,tipo_empleado_id:0,fecha:"",estado:0,salida:"",foto:""};return o.A.put(s+"empleado/updateEmpleado",a)}updateFoto(e,a){const t={id:0,cif:e,tipo_empleado_id:0,fecha:"",estado:0,salida:"",foto:a};return o.A.put(s+"empleado/updateFoto",t)}getListaEmpleadoTipo(e){return o.A.get(s+"empleado/listarTipo",{params:{tipo:e}})}}},7950:function(e,a,t){t.d(a,{A:function(){return i}});var o=t(4373),l=t(1660);const s=l.j6;class i{headersUsuario(e){o.A.defaults.headers.common["Authorization"]="Bearer "+e}getEgovf(e){return o.A.get(s+"ciudadano/getEgovf",{params:{cif:e}})}getListaCiudadano(){return o.A.get(s+"ciudadano/getListaCiudadano")}getListaCiudadanoPublico(){return o.A.get(s+"ciudadano/getListaCiudadanoPublico")}getListaEmpleado(){return o.A.get(s+"ciudadano/getListaEmpleado")}}},6025:function(e,a,t){t.d(a,{A:function(){return u}});var o=t(4373),l=t(1660);const s=l.ru,i=l.j6;class u{getToken(e){var a={id:e.id,cif:e.cif,matricula:e.matricula,ci:e.ci,complemento:e.complemento,correo:e.correo,celular:e.celular,pass:e.pass};return o.A.post(s+"login",a)}headersUsuario(e){o.A.defaults.headers.common["Authorization"]="Bearer "+e}getPerfil(e){return o.A.get(s+"getPerfil",{params:{cif:e}})}getUsuario(e){return o.A.get(s+"getUsuario",{params:{cif:e}})}updatePersona(e){const a={id:e.idPersona,cif:e.cif,ci:e.ci_com,complemento:e.complemento,nombre:e.nombre,paterno:e.paterno,materno:e.materno,fecha:e.fecha,sexo:e.sexo,cel:e.celular,correo:e.correo};return o.A.put(i+"persona/updatePersona",a)}updateUsuario(e){const a={id:e.idUsuario,cif:e.cif,matricula:e.matricula,ci:e.ci_com,complemento:e.complemento,correo:e.correo,celular:e.celular,pass:e.pass,unidad:e.unidad,dependiente:e.dependiente,sigla:e.sigla,foto:e.foto,empleado:e.empleado};return o.A.put(i+"usuario/updateUsuario",a)}updatePass(e){return o.A.put(i+"usuario/updatePass",e)}updatePassAdmin(e){return o.A.put(i+"usuario/updatePassAdmin",e)}updateUnidad(e,a){const t={id:e.idUsuario,cif:e.cif,matricula:e.matricula,ci:e.ci_com,complemento:e.complemento,correo:e.correo,celular:e.celular,pass:e.pass,unidad:a.unidad,dependiente:a.dependiente,sigla:a.sigla,foto:e.foto,empleado:e.idPersona};return o.A.put(i+"usuario/updateUsuario",t)}}},7160:function(e,a,t){t.d(a,{A:function(){return i}});var o=t(4373),l=t(1660);const s=l.H4;class i{getListarCifCero(){return o.A.get("biometrico/listarCifCero")}addImagen(e,a){return o.A.post(s+"upload.php",e,{...a,headers:{"Content-Type":"multipart/form-data"}})}addFoto(e,a){return o.A.post(s+"foto.php",e,{...a,headers:{"Content-Type":"multipart/form-data"}})}getUrl(){return s+"imagenes/"}getImage(e){return o.A.get(e,{headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"*"}})}}},3817:function(e,a,t){t.d(a,{A:function(){return r}});var o=t(6768);function l(e,a,t,l,s,i){const u=(0,o.g2)("CIcon"),r=(0,o.g2)("CWidgetStatsF"),n=(0,o.g2)("CCol"),d=(0,o.g2)("CRow");return(0,o.uX)(),(0,o.Wv)(d,null,{default:(0,o.k6)((()=>[(0,o.bF)(n,{xs:12},{default:(0,o.k6)((()=>[(0,o.bF)(r,{color:"dark",padding:!1,title:t.datos.nombre+" "+t.datos.apellido,value:"CIF : "+t.datos.cif},{icon:(0,o.k6)((()=>[(0,o.bF)(u,{icon:"cil-user",size:"xl"})])),_:1},8,["title","value"])])),_:1})])),_:1})}var s={name:"ComponenteNombres",props:["datos"]},i=t(1241);const u=(0,i.A)(s,[["render",l]]);var r=u},2432:function(e,a,t){t.r(a),t.d(a,{default:function(){return S}});var o=t(6768),l=t(4232),s=t(5130);const i=["src"],u=(0,o.Lk)("br",null,null,-1),r={class:"lista"},n={class:"lista"},d={class:"lista"},c={class:"lista"},f={key:0,class:"lista"},p={key:1,class:"lista"},m=(0,o.Lk)("br",null,null,-1),b=(0,o.Lk)("label",{class:"d-none d-md-flex me-auto"},"Datos",-1),g=(0,o.Lk)("label",{class:"d-none d-md-flex me-auto"},"Actualizar",-1),v=(0,o.Lk)("br",null,null,-1),k=(0,o.Lk)("br",null,null,-1),h=(0,o.Lk)("br",null,null,-1),F=(0,o.Lk)("br",null,null,-1),C={class:"mb-3 row text-center"},_={key:0,class:"col-sm-12 col-form-label"},A=(0,o.Lk)("div",{class:"alert alert-danger",role:"alert"}," Las ContraseÃ±as no Coinciden ",-1),y=[A],L={class:"md-3 row text-center"},z=["src"];function P(e,a,t,A,P,W){const E=(0,o.g2)("CIcon"),w=(0,o.g2)("CCardHeader"),x=(0,o.g2)("CButton"),$=(0,o.g2)("CWidgetStatsC"),M=(0,o.g2)("CCol"),I=(0,o.g2)("CCardBody"),U=(0,o.g2)("CCard"),S=(0,o.g2)("CNavLink"),D=(0,o.g2)("CNavItem"),T=(0,o.g2)("CNav"),V=(0,o.g2)("CInputGroupText"),B=(0,o.g2)("CFormInput"),N=(0,o.g2)("CInputGroup"),X=(0,o.g2)("CTabPane"),G=(0,o.g2)("CTabContent"),j=(0,o.g2)("CRow"),Q=(0,o.g2)("CModalTitle"),R=(0,o.g2)("CModalHeader"),H=(0,o.g2)("ComponenteNombres"),K=(0,o.g2)("CModalBody"),q=(0,o.g2)("CModalFooter"),O=(0,o.g2)("CModal"),Y=(0,o.g2)("CProgressBar"),J=(0,o.g2)("CProgress"),Z=(0,o.g2)("CForm");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(j,null,{default:(0,o.k6)((()=>[(0,o.bF)(M,{lg:6},{default:(0,o.k6)((()=>[(0,o.bF)(U,null,{default:(0,o.k6)((()=>[(0,o.bF)(w,{class:"headercolor"},{default:(0,o.k6)((()=>[(0,o.Lk)("h6",null,[(0,o.bF)(E,{icon:"cil-description",size:"lg",class:"me-2"}),(0,o.eW)("Datos Personales")])])),_:1}),(0,o.bF)(I,null,{default:(0,o.k6)((()=>[(0,o.bF)(M,{sm:12},{default:(0,o.k6)((()=>[(0,o.bF)($,{class:"mb-3",value:"CIF: "+P.egovf.cif,progress:{color:"success",value:100},title:"Visitors"},{icon:(0,o.k6)((()=>[(0,o.Lk)("img",{src:P.egovf.foto,class:"img-fluid rounded-start",alt:"..."},null,8,i),u,(0,o.bF)(x,{color:"dark",onClick:a[0]||(a[0]=e=>W.clickModalFoto(!0)),size:"sm",class:"mt-2"},{default:(0,o.k6)((()=>[(0,o.bF)(E,{icon:"cil-camera",class:"me-1"}),(0,o.eW)(" Actualizar Foto")])),_:1})])),title:(0,o.k6)((()=>[(0,o.eW)((0,l.v_)(P.egovf.nombre)+" "+(0,l.v_)(P.egovf.paterno)+" "+(0,l.v_)(P.egovf.materno)+" ",1),(0,o.Lk)("ul",null,[(0,o.Lk)("li",r,"C.I. : "+(0,l.v_)(P.egovf.ci),1),(0,o.Lk)("li",n,"Correo : "+(0,l.v_)(P.egovf.correo),1),(0,o.Lk)("li",d,"Celular : "+(0,l.v_)(P.egovf.celular),1),(0,o.Lk)("li",c,"Fecha N : "+(0,l.v_)(P.egovf.fecha),1),1==P.egovf.sexo?((0,o.uX)(),(0,o.CE)("li",f,"Sexo : Femenino")):((0,o.uX)(),(0,o.CE)("li",p,"Sexo : Masculino"))])])),_:1},8,["value"])])),_:1})])),_:1})])),_:1})])),_:1}),(0,o.bF)(M,{lg:6},{default:(0,o.k6)((()=>[m,(0,o.bF)(U,null,{default:(0,o.k6)((()=>[(0,o.bF)(w,{class:"headercolor"},{default:(0,o.k6)((()=>[(0,o.Lk)("h6",null,[(0,o.bF)(E,{icon:"cil-at",size:"lg",class:"me-2"}),(0,o.eW)("Datos E-govf")])])),_:1}),(0,o.bF)(I,null,{default:(0,o.k6)((()=>[(0,o.bF)(T,{variant:"tabs",class:"nav nav-tabs"},{default:(0,o.k6)((()=>[(0,o.bF)(D,null,{default:(0,o.k6)((()=>[(0,o.bF)(S,{active:1==P.tab,onClick:a[1]||(a[1]=e=>W.clicktab(1))},{default:(0,o.k6)((()=>[(0,o.bF)(x,{size:"sm"},{default:(0,o.k6)((()=>[(0,o.bF)(E,{icon:"cil-user"}),b])),_:1})])),_:1},8,["active"])])),_:1}),(0,o.bF)(D,null,{default:(0,o.k6)((()=>[(0,o.bF)(S,{active:2==P.tab,onClick:a[2]||(a[2]=e=>W.clicktab(2))},{default:(0,o.k6)((()=>[(0,o.bF)(x,{size:"sm"},{default:(0,o.k6)((()=>[(0,o.bF)(E,{icon:"cil-pencil"}),g])),_:1})])),_:1},8,["active"])])),_:1})])),_:1}),(0,o.bF)(G,null,{default:(0,o.k6)((()=>[(0,o.bF)(X,{visible:1==P.tab},{default:(0,o.k6)((()=>[v,(0,o.bF)(N,{size:"sm",class:"mb-3"},{default:(0,o.k6)((()=>[(0,o.bF)(V,{as:"label"},{default:(0,o.k6)((()=>[(0,o.eW)("ID app")])),_:1}),(0,o.bF)(B,{type:"text",value:P.egovf.idUsuario,disabled:""},null,8,["value"])])),_:1}),(0,o.bF)(N,{size:"sm",class:"mb-3"},{default:(0,o.k6)((()=>[(0,o.bF)(V,{as:"label"},{default:(0,o.k6)((()=>[(0,o.eW)("CIF")])),_:1}),(0,o.bF)(B,{type:"text",value:P.egovf.cif,disabled:""},null,8,["value"])])),_:1}),(0,o.bF)(N,{size:"sm",class:"mb-3"},{default:(0,o.k6)((()=>[(0,o.bF)(V,{as:"label"},{default:(0,o.k6)((()=>[(0,o.eW)("Matricula")])),_:1}),(0,o.bF)(B,{type:"text",value:P.egovf.matricula,disabled:""},null,8,["value"])])),_:1}),(0,o.bF)(N,{size:"sm",class:"mb-3"},{default:(0,o.k6)((()=>[(0,o.bF)(V,{as:"label"},{default:(0,o.k6)((()=>[(0,o.eW)("C.I.")])),_:1}),(0,o.bF)(B,{type:"text",value:P.egovf.ci,disabled:""},null,8,["value"])])),_:1}),(0,o.bF)(N,{size:"sm",class:"mb-3"},{default:(0,o.k6)((()=>[(0,o.bF)(V,{as:"label"},{default:(0,o.k6)((()=>[(0,o.eW)("Correo")])),_:1}),(0,o.bF)(B,{type:"text",value:P.egovf.correo,disabled:""},null,8,["value"])])),_:1}),(0,o.bF)(N,{size:"sm",class:"mb-3"},{default:(0,o.k6)((()=>[(0,o.bF)(V,{as:"label"},{default:(0,o.k6)((()=>[(0,o.eW)("Celular")])),_:1}),(0,o.bF)(B,{type:"text",value:P.egovf.celular,disabled:""},null,8,["value"])])),_:1}),(0,o.bF)(N,{size:"sm",class:"mb-3"},{default:(0,o.k6)((()=>[(0,o.bF)(V,{as:"label"},{default:(0,o.k6)((()=>[(0,o.eW)("Unidad")])),_:1}),(0,o.bF)(B,{type:"text",value:P.egovf.sigla,disabled:""},null,8,["value"])])),_:1})])),_:1},8,["visible"]),(0,o.bF)(X,{visible:2==P.tab},{default:(0,o.k6)((()=>[k,(0,o.bF)(N,{size:"sm",class:"mb-3"},{default:(0,o.k6)((()=>[(0,o.bF)(V,{as:"label"},{default:(0,o.k6)((()=>[(0,o.eW)("ID app")])),_:1}),(0,o.bF)(B,{type:"text",value:P.egovf.idUsuario,disabled:""},null,8,["value"])])),_:1}),(0,o.bF)(N,{size:"sm",class:"mb-3"},{default:(0,o.k6)((()=>[(0,o.bF)(V,{as:"label"},{default:(0,o.k6)((()=>[(0,o.eW)("CIF")])),_:1}),(0,o.bF)(B,{type:"text",value:P.egovf.cif,disabled:""},null,8,["value"])])),_:1}),(0,o.bF)(N,{size:"sm",class:"mb-3"},{default:(0,o.k6)((()=>[(0,o.bF)(V,{as:"label"},{default:(0,o.k6)((()=>[(0,o.eW)("Matricula")])),_:1}),(0,o.bF)(B,{type:"text",value:P.egovf.matricula,disabled:""},null,8,["value"])])),_:1}),(0,o.bF)(N,{size:"sm",class:"mb-3"},{default:(0,o.k6)((()=>[(0,o.bF)(V,{as:"label"},{default:(0,o.k6)((()=>[(0,o.eW)("C.I.")])),_:1}),(0,o.bF)(B,{type:"text",value:P.egovf.ci,disabled:""},null,8,["value"])])),_:1}),(0,o.bF)(N,{size:"sm",class:"mb-3"},{default:(0,o.k6)((()=>[(0,o.bF)(V,{as:"label"},{default:(0,o.k6)((()=>[(0,o.eW)("Correo")])),_:1}),(0,o.bF)(B,{type:"text",value:P.egovf.correo,disabled:""},null,8,["value"])])),_:1}),(0,o.bF)(N,{size:"sm",class:"mb-3"},{default:(0,o.k6)((()=>[(0,o.bF)(V,{as:"label"},{default:(0,o.k6)((()=>[(0,o.eW)("Celular")])),_:1}),(0,o.bF)(B,{type:"text",value:P.egovf.celular,disabled:""},null,8,["value"]),(0,o.bF)(x,{type:"button",color:"success",class:"font",size:"sm",onClick:a[3]||(a[3]=e=>W.clickModalCelular(!0))},{default:(0,o.k6)((()=>[(0,o.eW)("Actualizar")])),_:1})])),_:1}),(0,o.bF)(N,{size:"sm",class:"mb-3"},{default:(0,o.k6)((()=>[(0,o.bF)(V,{as:"label"},{default:(0,o.k6)((()=>[(0,o.eW)("ContraseÃ±a")])),_:1}),(0,o.bF)(B,{type:"text",value:"***************",disabled:""}),(0,o.bF)(x,{type:"button",color:"success",class:"font",size:"sm",onClick:a[4]||(a[4]=e=>W.clickModalPass(!0))},{default:(0,o.k6)((()=>[(0,o.eW)(" Actualizar ContraseÃ±a")])),_:1})])),_:1})])),_:1},8,["visible"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,o.bF)(O,{visible:P.modalCelular,onClose:a[9]||(a[9]=e=>W.clickModalCelular(!1))},{default:(0,o.k6)((()=>[(0,o.bF)(R,{class:"headercolor",dismiss:"",onClose:a[5]||(a[5]=e=>W.clickModalCelular(!1))},{default:(0,o.k6)((()=>[(0,o.bF)(Q,null,{default:(0,o.k6)((()=>[(0,o.Lk)("h6",null,[(0,o.bF)(E,{icon:"cil-at",size:"lg",class:"me-2"}),(0,o.eW)("Actualizar Numero de Celular")])])),_:1})])),_:1}),(0,o.bF)(K,null,{default:(0,o.k6)((()=>[(0,o.bF)(H,{datos:P.datos},null,8,["datos"]),h,(0,o.bF)(N,{class:"mb-3"},{default:(0,o.k6)((()=>[(0,o.bF)(V,{as:"label"},{default:(0,o.k6)((()=>[(0,o.eW)("Nuevo Numero de Celular")])),_:1}),(0,o.bF)(B,{type:"text",modelValue:P.egovf.celular,"onUpdate:modelValue":a[6]||(a[6]=e=>P.egovf.celular=e)},null,8,["modelValue"])])),_:1})])),_:1}),(0,o.bF)(q,null,{default:(0,o.k6)((()=>[(0,o.bF)(x,{onClick:a[7]||(a[7]=e=>W.clickModalCelular(!1)),color:"danger",class:"font",size:"sm"},{default:(0,o.k6)((()=>[(0,o.bF)(E,{icon:"cil-x",class:"me-2"}),(0,o.eW)("Cancelar")])),_:1}),(0,o.bF)(x,{onClick:a[8]||(a[8]=e=>W.updatePersona()),color:"success",class:"font",size:"sm"},{default:(0,o.k6)((()=>[(0,o.bF)(E,{icon:"cil-check-alt",class:"me-2"}),(0,o.eW)("Actualizar")])),_:1})])),_:1})])),_:1},8,["visible"]),(0,o.bF)(O,{visible:P.modalPass,onClose:a[19]||(a[19]=e=>W.clickModalPass(!1))},{default:(0,o.k6)((()=>[(0,o.bF)(R,{class:"headercolor",dismiss:"",onClose:a[10]||(a[10]=e=>W.clickModalPass(!1))},{default:(0,o.k6)((()=>[(0,o.bF)(Q,null,{default:(0,o.k6)((()=>[(0,o.Lk)("h6",null,[(0,o.bF)(E,{icon:"cil-at",size:"lg",class:"me-2"}),(0,o.eW)("Actualizar ContraseÃ±a")])])),_:1})])),_:1}),(0,o.bF)(K,null,{default:(0,o.k6)((()=>[(0,o.bF)(H,{datos:P.datos},null,8,["datos"]),F,(0,o.bF)(N,{class:"mb-3"},{default:(0,o.k6)((()=>[(0,o.bF)(V,{as:"label"},{default:(0,o.k6)((()=>[(0,o.eW)("ContraseÃ±a Actual")])),_:1}),(0,o.bF)(B,{type:"password",modelValue:P.pass.pass1,"onUpdate:modelValue":a[11]||(a[11]=e=>P.pass.pass1=e),onKeyup:a[12]||(a[12]=e=>W.botonesFuncion())},null,8,["modelValue"])])),_:1}),(0,o.bF)(N,{class:"mb-3"},{default:(0,o.k6)((()=>[(0,o.bF)(V,{as:"label"},{default:(0,o.k6)((()=>[(0,o.eW)("Nueva ContraseÃ±a")])),_:1}),(0,o.bF)(B,{type:"password",modelValue:P.pass.pass2,"onUpdate:modelValue":a[13]||(a[13]=e=>P.pass.pass2=e),onKeyup:a[14]||(a[14]=e=>W.botonesFuncion())},null,8,["modelValue"])])),_:1}),(0,o.bF)(N,{class:"mb-3"},{default:(0,o.k6)((()=>[(0,o.bF)(V,{as:"label"},{default:(0,o.k6)((()=>[(0,o.eW)("Confirmar Nueva ContraseÃ±a")])),_:1}),(0,o.bF)(B,{type:"password",modelValue:P.pass.pass3,"onUpdate:modelValue":a[15]||(a[15]=e=>P.pass.pass3=e),onKeyup:a[16]||(a[16]=e=>W.botonesFuncion())},null,8,["modelValue"])])),_:1}),(0,o.Lk)("div",C,[P.pass.pass2!=P.pass.pass3?((0,o.uX)(),(0,o.CE)("div",_,y)):(0,o.Q3)("",!0)])])),_:1}),(0,o.bF)(q,null,{default:(0,o.k6)((()=>[(0,o.bF)(x,{onClick:a[17]||(a[17]=e=>W.clickModalPass(!1)),color:"danger",class:"font",size:"sm"},{default:(0,o.k6)((()=>[(0,o.bF)(E,{icon:"cil-x",class:"me-2"}),(0,o.eW)("Cancelar")])),_:1}),P.botones?((0,o.uX)(),(0,o.Wv)(x,{key:0,onClick:a[18]||(a[18]=e=>W.updatePass()),color:"success",class:"font",size:"sm"},{default:(0,o.k6)((()=>[(0,o.bF)(E,{icon:"cil-check-alt",class:"me-2"}),(0,o.eW)("Actualizar")])),_:1})):(0,o.Q3)("",!0)])),_:1})])),_:1},8,["visible"]),(0,o.bF)(O,{visible:P.modalFoto,onClose:a[23]||(a[23]=e=>W.clickModalFoto(!1))},{default:(0,o.k6)((()=>[(0,o.bF)(Z,{onSubmit:a[22]||(a[22]=(0,s.D$)((e=>W.updateFoto()),["prevent"])),enctype:"multipart/form-data"},{default:(0,o.k6)((()=>[(0,o.bF)(R,{class:"headercolor",dismiss:"",onClose:a[20]||(a[20]=e=>W.clickModalFoto(!1))},{default:(0,o.k6)((()=>[(0,o.bF)(Q,null,{default:(0,o.k6)((()=>[(0,o.Lk)("h6",null,[(0,o.bF)(E,{icon:"cil-description",size:"lg",class:"me-2"}),(0,o.eW)("Actualizar Foto de Perfil")])])),_:1})])),_:1}),(0,o.bF)(K,null,{default:(0,o.k6)((()=>[(0,o.bF)(N,{class:"mb-3"},{default:(0,o.k6)((()=>[(0,o.bF)(V,{as:"label"},{default:(0,o.k6)((()=>[(0,o.eW)("Foto de Perfil")])),_:1}),(0,o.bF)(B,{type:"file",ref:"fileInput",id:"filedoc",accept:"image/png,image/jpeg",onChange:W.selectFile,valid:P.fileValid,required:"true"},null,8,["onChange","valid"]),P.fileValid?((0,o.uX)(),(0,o.Wv)(V,{key:0},{default:(0,o.k6)((()=>[(0,o.bF)(E,{icon:"cil-check",class:"text-success"})])),_:1})):(0,o.Q3)("",!0)])),_:1}),(0,o.Lk)("div",L,[(0,o.Lk)("img",{src:P.nuevafoto,class:"img-fluid"},null,8,z)]),P.uploading?((0,o.uX)(),(0,o.Wv)(J,{key:0,height:50,class:"mb-3"},{default:(0,o.k6)((()=>[(0,o.bF)(Y,{value:P.uploadProgress,color:100===P.uploadProgress?"success":"warning",animated:""},{default:(0,o.k6)((()=>[(0,o.eW)(" Espere un Momento ........... "+(0,l.v_)(P.uploadProgress)+" % ",1)])),_:1},8,["value","color"])])),_:1})):(0,o.Q3)("",!0)])),_:1}),(0,o.bF)(q,null,{default:(0,o.k6)((()=>[(0,o.bF)(x,{onClick:a[21]||(a[21]=e=>W.clickModalFoto(!1)),color:"danger",class:"font",size:"sm"},{default:(0,o.k6)((()=>[(0,o.bF)(E,{icon:"cil-x",class:"me-2"}),(0,o.eW)("Cancelar")])),_:1}),(0,o.bF)(x,{type:"submit",class:"font",color:"success",size:"sm"},{default:(0,o.k6)((()=>[(0,o.bF)(E,{icon:"cil-camera",class:"me-2"}),(0,o.eW)("Actualizar")])),_:1})])),_:1})])),_:1})])),_:1},8,["visible"])],64)}t(4114),t(4603),t(7566),t(8721);var W=t(3817),E=t(6025),w=t(7950),x=t(1133),$=t(7160),M={name:"PerfilView",components:{ComponenteNombres:W.A},data(){return{tab:1,modalCelular:!1,modalPass:!1,modalFoto:!1,titulo:"Perfil de Usuario",egovfService:null,uploadService:null,usuarioService:null,empleadoService:null,botones:!1,uploading:!1,uploadProgress:0,fileValid:!1,nuevafoto:"",usuario:{token:"",cif:"",correo:"",celular:"",pass:"",unidad:"",sigla:"",foto:""},egovf:{idPersona:0,nombre:"",paterno:"",materno:"",fecha:"",sexo:0,idUsuario:0,cif:0,matricula:0,ci:"",ci_com:0,complemento:"",correo:"",celular:"",pass:"",unidad:"",dependiente:"",sigla:"",foto:"",empleado:0},pass:{id:null,cif:"",pass1:"",pass2:"",pass3:""},datos:{cif:0,nombre:"",apellido:""}}},computed:{},created(){this.usuarioService=new E.A,this.egovfService=new w.A,this.uploadService=new $.A,this.empleadoService=new x.A},mounted(){this.getDatos(),this.getEgovf()},beforeCreate(){null==this.$cookies.get("cif")&&this.$router.push("/")},methods:{getDatos(){null!=this.$cookies.get("cif")&&(this.usuario.token=this.$cookies.get("token"),this.usuario.cif=this.$cookies.get("cif"),this.usuario.correo=this.$cookies.get("correo"),this.usuario.celular=this.$cookies.get("celular"),this.usuario.pass=this.$cookies.get("pass"),this.usuario.unidad=this.$cookies.get("unidad"),this.usuario.sigla=this.$cookies.get("sigla"),this.usuario.foto=this.$cookies.get("foto"),this.$cookies.set("titulo",this.titulo),this.usuarioService.headersUsuario(this.usuario.token))},async getEgovf(){this.egovfService.headersUsuario(this.usuario.token),await this.egovfService.getEgovf(this.usuario.cif).then((e=>{this.egovf=e.data})),this.datos.cif=this.egovf.cif,this.datos.nombre=this.egovf.nombre,this.datos.apellido=this.egovf.paterno+" "+this.egovf.materno,this.nuevafoto="https://fhcevirtual.umsa.bo/egovf-img/imagenes/800/"+this.egovf.foto,this.egovf.foto="https://fhcevirtual.umsa.bo/egovf-img/imagenes/200/"+this.egovf.foto},updatePersona(){this.$swal.fire({title:"Desea Realizar los Cambios",icon:"info",showDenyButton:!0,confirmButtonText:"Actualizar",denyButtonText:"Cancelar"}).then((e=>{e.isConfirmed?this.usuarioService.updatePersona(this.egovf).then((e=>{200==e.status?this.$swal.fire("Tus Datos Guardados Corectamente","","success"):this.$swal.fire("Los Datos no fueron Guardados Error",e.status,"error")})):e.isDenied&&this.$swal.fire("Datos Cancelados","","info")}))},updatePass(){this.pass.id=this.egovf.id,this.pass.cif=this.egovf.cif,this.$swal.fire({title:"Desea Actualizar la contraseÃ±a ?",showDenyButton:!0,confirmButtonText:"Actualizar",denyButtonText:"Cancelar"}).then((e=>{e.isConfirmed?this.usuarioService.updatePass(this.pass).then((e=>{1==e.data?(this.$swal.fire("Datos Guardados Corectamente","Inicie secion nuevamente","success"),this.$cookies.remove("token"),this.$cookies.remove("cif"),this.$cookies.remove("correo"),this.$cookies.remove("celular"),this.$cookies.remove("pass"),this.$router.push("/")):this.$swal.fire("La ContraseÃ±a Actual no es Correcta Verifique e intente Nuevamente","","error")})):e.isDenied&&this.$swal.fire("Datos Cancelados","","info")}))},botonesFuncion(){""!=this.pass.pass1&&""!=this.pass.pass2&&this.pass.pass2==this.pass.pass3?this.botones=!0:this.botones=!1},selectFile(e){const a=this.getSafeFileInput(e);a?.files?.length?(this.archivo=a.files[0],this.validateFile(this.archivo)?(this.fileValid=!0,this.nuevafoto=URL.createObjectURL(this.archivo)):this.resetFileInput()):this.resetFileInput()},async updateFoto(){this.uploading=!0,this.uploadProgress=0;try{const e=new FormData;e.append("archivo",this.archivo);const a={onUploadProgress:e=>{this.uploadProgress=Math.round(100*e.loaded/e.total)}},t=await this.uploadService.addFoto(e,a);if(200!==t.status)throw new Error("Error al subir archivo");this.egovf.foto=t.data.nombre,this.$swal.fire({title:"Desea Subir su foto de perfil ?",showDenyButton:!0,confirmButtonText:"Aceptar",denyButtonText:"Cancelar"}).then((e=>{e.isConfirmed?this.usuarioService.updateUsuario(this.egovf).then((e=>{200==e.status?(this.empleadoService.updateFoto(this.egovf.cif,this.egovf.foto),this.$swal.fire("La Foto de Perfil fue guardado correctamente","","success").then((e=>{e&&location.reload()}))):this.$swal.fire("La Foto de Perfil no pudo ser Guardado, intente mas tarde"+e.status,"","error")})):e.isDenied&&this.$swal.fire("Datos Cancelados","","info")}))}catch(e){this.$swal.fire("La foto de Perfil No puede ser guardado Intente mas tarde","error")}finally{this.uploading=!1,this.uploadProgress=0}},clicktab(e){this.tab=e},clickModalCelular(e){this.modalCelular=e},clickModalPass(e){this.modalPass=e},clickModalFoto(e){this.modalFoto=e},getSafeFileInput(e){return this.$refs.fileInput?.$refs?.input||e?.target||this.$refs.fileInput?.$el?.querySelector?.('input[type="file"]')||document.getElementById("filedoc")},validateFile(e){const a=["image/jpeg","image/png"];return e&&a.includes(e.type)},resetFileInput(){this.archivo=null,this.fileValid=!1;const e=this.getSafeFileInput();e&&(e.value="")}}},I=t(1241);const U=(0,I.A)(M,[["render",P]]);var S=U}}]);
//# sourceMappingURL=432.b2cd9706.js.map