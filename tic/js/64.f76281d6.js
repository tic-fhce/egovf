"use strict";(self["webpackChunkegovf"]=self["webpackChunkegovf"]||[]).push([[64],{1133:function(e,a,o){o.d(a,{A:function(){return l}});var t=o(4373),i=o(1660);const s=i.Qy;class l{getEmpleado(e){return t.A.get(s+"empleado/getEmpleado",{params:{cif:e}})}getListaTipoEmpleado(){return t.A.get(s+"tipo/listar")}getListarEmpleadoModuloCif(e){return t.A.get(s+"modulo/getListarEmpleadoModuloCif",{params:{cif:e}})}getListarEmpleadoModulo(e){return t.A.get(s+"modulo/getListarEmpleadoModulo",{params:{cif:e}})}addContrato(e){const a=new Date;let o=e.numerocontrato;const i={cif:e.cif,numero_contrato:o.toUpperCase(),servicio:e.servicio,unidad:e.unidad,inicio:e.inicio,fin:e.fin,gestion:a.getFullYear(),detalle:e.detalle,idTipoEmpleado:e.idTipoEmpleado,cargo:e.cargo,foto:e.foto};return t.A.post(s+"contrato/addContrato",i)}updateContrato(e,a){let o=e.numerocontrato;const i={id:e.id,cif:e.cif,numero_contrato:o.toUpperCase(),servicio:e.servicio,unidad:e.unidad,inicio:e.inicio,fin:e.fin,gestion:e.gestion,detalle:e.detalle,idTipoEmpleado:e.idTipoEmpleado,foto:a,cargo:e.cargo};return t.A.put(s+"contrato/updateContrato",i)}getTipoEmpleado(e){return t.A.get(s+"tipo/getTipoEmpleado",{params:{id:e}})}getListaEmpleado(e){return t.A.get(s+"empleado/getListaEmpleado",{params:{tipo:e}})}getEmpleados(){return t.A.get(s+"empleado/getEmpleados")}getListaModulo(){return t.A.get(s+"modulo/listar")}addEmpleadoModulo(e){const a={cif:e.cif,id_modulo:e.id_modulo,estado:1};return t.A.post(s+"empmodulo/addEmpleadoModulo",a)}updateEmpleadoEliminar(e){const a={id:e.id,cif:e.cif,tipo_empleado_id:0,fecha:"",estado:0,salida:"",foto:""};return t.A.put(s+"empleado/updateEmpleado",a)}updateFoto(e,a){const o={id:0,cif:e,tipo_empleado_id:0,fecha:"",estado:0,salida:"",foto:a};return t.A.put(s+"empleado/updateFoto",o)}getListaEmpleadoTipo(e){return t.A.get(s+"empleado/listarTipo",{params:{tipo:e}})}}},7590:function(e,a,o){o.d(a,{A:function(){return l}});var t=o(4373),i=o(1660);const s=i.fw;class l{getPerfil(e){return t.A.get(s+"biometrico/getPerfil",{params:{cif:e}})}getListarCifCero(){return t.A.get(s+"biometrico/listarCifCero")}getHorario(e,a){return t.A.get(s+"horario/getHorario",{params:{gestion:e,cif:a}})}updateBiometrico(e){return t.A.put(s+"biometrico/updateBiometrico",e)}getAvisoAll(){return t.A.get(s+"aviso/getAvisoAll")}getAviso(){return t.A.get(s+"aviso/getAviso")}getObsUsuario(e,a,o){return t.A.get(s+"obs/getObsUsuario",{params:{cif:e,gestion:a,mes:o}})}addObsEmpleado(e){const a={id:0,cif:e.cif,sexo:0,uidobs:e.uidobs,fechainicio:e.fechainicio,fechafin:e.fechafin,gestion:e.fechainicio.substring(0,4),mes:e.fechainicio.substring(5,7),di:e.fechainicio.substring(8,10),df:e.fechafin.substring(8,10),detalle:e.detalle,imagen:e.imagen,tipo:e.tipo,horaEntrada:e.horaEntrada,hentrada:e.horaEntrada.substring(0,2),mentrada:e.horaEntrada.substring(3,5),horaSalida:e.horaSalida,hsalida:e.horaSalida.substring(0,2),msalida:e.horaSalida.substring(3,5),url:e.url,estado:0};return t.A.post(s+"obs/addObs",a)}updateObs(e){const a={id:e.id,idObs:e.id,cif:e.cif,sexo:e.sexo,uidobs:e.uidobs,fechainicio:e.fechainicio,fechafin:e.fechafin,gestion:e.fechainicio.substring(0,4),mes:e.fechainicio.substring(5,7),di:e.fechainicio.substring(8,10),df:e.fechafin.substring(8,10),detalle:e.detalle,imagen:e.imagen,tipo:e.tipo,horaEntrada:e.horaEntrada,hentrada:e.horaEntrada.substring(0,2),mentrada:e.horaEntrada.substring(3,5),horaSalida:e.horaSalida,hsalida:e.horaSalida.substring(0,2),msalida:e.horaSalida.substring(3,5),url:e.url,estado:0};return t.A.put(s+"obs/updateObs",a)}updateObsBio(e){const a={id:e.id,cif:e.cif,idObs:e.idObs,horaEntrada:e.horaEntrada,horaSalida:e.horaSalida,hentrada:e.hentrada,hsalida:e.hsalida,mentrada:e.mentrada,msalida:e.msalida,estado:e.estado};return t.A.put(s+"obsbio/updateObsBio",a)}updateObsEmpleado(e){const a={id:e.id,idObs:e.idObs,cif:e.cif,sexo:e.sexo,uidobs:e.uidobs,fechainicio:e.fechainicio,fechafin:e.fechafin,gestion:e.fechainicio.substring(0,4),mes:e.fechainicio.substring(5,7),di:e.fechainicio.substring(8,10),df:e.fechafin.substring(8,10),detalle:e.detalle,imagen:e.imagen,tipo:e.tipo,horaEntrada:e.horaEntrada,horaSalida:e.horaSalida,hentrada:e.horaEntrada.substring(0,2),mentrada:e.horaEntrada.substring(3,5),hsalida:e.horaSalida.substring(0,2),msalida:e.horaSalida.substring(3,5),url:e.url,estado:e.estado,idtipo:e.idtipo};return t.A.put(s+"obs/updateObsEmpleado",a)}getListaHorario(e,a){return t.A.get(s+"horario/getListaHorario",{params:{cif:e,gestion:a}})}getReporteMes(e){return t.A.get(s+"marcado/reporteMes",{params:{cif:e.cif,gestion:e.gestion,mes:e.mes,di:e.di,df:e.df}})}getReporteMesDia(e){return t.A.get(s+"marcado/reporteMesDia",{params:{cif:e.cif,gestion:e.gestion,mes:e.mes,di:e.di,df:e.df}})}addHorario(e){const a={cif:e.cif,fecha:e.fecha,salida:e.salida,tipo:e.tipo,lem:e.lem,lsm:e.lsm,let:e.let,lst:e.lst,mem:e.mem,msm:e.msm,met:e.met,mst:e.mst,miem:e.miem,mism:e.mism,miet:e.miet,mist:e.mist,jem:e.jem,jsm:e.jsm,jet:e.jet,jst:e.jst,vem:e.vem,vsm:e.vsm,vet:e.vet,vst:e.vst,sem:e.sem,ssm:e.ssm,set:e.set,sst:e.sst,dem:e.dem,dsm:e.dsm,det:e.det,dst:e.dst};return t.A.post(s+"horario/addHorario",a)}addObs(e){const a={id:0,idObs:0,cif:e.cif,sexo:0,uidobs:e.uidobs,fechainicio:e.fechainicio,fechafin:e.fechafin,gestion:e.fechainicio.substring(0,4),mes:e.fechainicio.substring(5,7),di:e.fechainicio.substring(8,10),df:e.fechafin.substring(8,10),detalle:e.detalle,imagen:e.imagen,tipo:e.tipo,horaEntrada:e.horaEntrada,hEntrada:e.horaEntrada.substring(0,2),mEntrada:e.horaEntrada.substring(3,5),horaSalida:e.horaSalida,hSalida:e.horaSalida.substring(0,2),mSalida:e.horaSalida.substring(3,5),url:e.url,estado:1};return t.A.post(s+"obs/addObs",a)}updateObs1(e){const a={id:e.id,cif:e.cif,uidobs:e.uidobs,fechainicio:e.fechainicio,fechafin:e.fechafin,gestion:e.gestion,mes:e.mes,di:e.di,df:e.df,detalle:e.detalle,imagen:e.imagen,tipo:e.tipo,hora:e.hora,h:e.h,m:e.m,url:e.url,estado:e.estado,tipoId:e.tipoId};return t.A.put(s+"obs/updateObs",a)}getListaObs(e){return t.A.get(s+"obs/getListaObs",{params:{gestion:e}})}getListaObsEmpleado(e){return t.A.get(s+"obs/getListaObsEmpleado",{params:{gestion:e}})}getListaObsEliminado(){return t.A.get(s+"obs/getListaObsEliminado")}addObsAll(e){const a={id:0,cif:e.cif,sexo:e.sexo,uidobs:e.uidobs,fechainicio:e.fechainicio,fechafin:e.fechafin,gestion:e.fechainicio.substring(0,4),mes:e.fechainicio.substring(5,7),di:e.fechainicio.substring(8,10),df:e.fechafin.substring(8,10),detalle:e.detalle,imagen:e.imagen,tipo:e.tipo,horaEntrada:e.horaEntrada,hEntrada:e.horaEntrada.substring(0,2),mEntrada:e.horaEntrada.substring(3,5),horaSalida:e.horaSalida,hSalida:e.horaSalida.substring(0,2),mSalida:e.horaSalida.substring(3,5),url:e.url,estado:1,idtipo:1};return t.A.post(s+"obs/addObsAll",a)}addAviso(e){const a={titulo:e.titulo,detalle:e.detalle,icon:e.icon,estado:1};return t.A.post(s+"aviso/addAviso",a)}updateAviso(e){const a={id:e.id,titulo:e.titulo,detalle:e.detalle,icon:e.icon,estado:e.estado};return t.A.put(s+"aviso/updateAviso",a)}getRecord(e){return t.A.get(s+"marcado/reporteTotal",{params:{gestion:e.gestion,mes:e.mes,tipo:e.tipo}})}updateTipo(e,a){return t.A.put(s+"biometrico/updateTipo",null,{params:{cif:e,tipo:a}})}getListarBiometrico(){return t.A.get(s+"biometrico/listarBiometrico")}getLBiometricoTipo(e){return t.A.get(s+"biometrico/listarBiometricoTipo",{params:{tipo:e}})}updateBiometricoEliminar(e){const a={id:0,user_id:0,nombre:"",cif:e.cif,estado:0,horario_id:0,lugar:"",id_tipo:0,detalle:"",sexo:0};return t.A.put(s+"biometrico/updateBiometrico",a)}getObs(e,a,o){return t.A.get(s+"obs/getObs",{params:{cif:e,gestion:a,mes:o}})}estadoBiometrico(e){return t.A.put(s+"biometrico/estadoBiometrico",e)}getListaEquipo(){return t.A.get(s+"equipo/listar")}addEquipo(e){return t.A.post(s+"equipo/addEquipo",e)}updateEquipo(e){return t.A.put(s+"equipo/updateEquipo",e)}}},7950:function(e,a,o){o.d(a,{A:function(){return l}});var t=o(4373),i=o(1660);const s=i.j6;class l{headersUsuario(e){t.A.defaults.headers.common["Authorization"]="Bearer "+e}getEgovf(e){return t.A.get(s+"ciudadano/getEgovf",{params:{cif:e}})}getListaCiudadano(){return t.A.get(s+"ciudadano/getListaCiudadano")}getListaCiudadanoPublico(){return t.A.get(s+"ciudadano/getListaCiudadanoPublico")}getListaEmpleado(){return t.A.get(s+"ciudadano/getListaEmpleado")}}},7160:function(e,a,o){o.d(a,{A:function(){return l}});var t=o(4373),i=o(1660);const s=i.H4;class l{getListarCifCero(){return t.A.get("biometrico/listarCifCero")}addImagen(e,a){return t.A.post(s+"upload.php",e,{...a,headers:{"Content-Type":"multipart/form-data"}})}addFoto(e,a){return t.A.post(s+"foto.php",e,{...a,headers:{"Content-Type":"multipart/form-data"}})}getUrl(){return s+"imagenes/"}getImage(e){return t.A.get(e,{headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"*"}})}}},5064:function(e,a,o){o.r(a),o.d(a,{default:function(){return K}});var t=o(6768),i=o(4232),s=o(5130);const l=e=>((0,t.Qi)("data-v-c60a1148"),e=e(),(0,t.jt)(),e),r={"aria-label":"breadcrumb"},d={class:"breadcrumb custom-breadcrumb"},n={class:"breadcrumb-item"},u={class:"breadcrumb-item active","aria-current":"page"},c={class:"d-flex align-items-center"},m={class:"mb-0 fs-6 text-white"},p={class:"table-responsive"},g={id:"ciudadanoTabla",class:"table table-striped table-hover"},b=l((()=>(0,t.Lk)("thead",null,[(0,t.Lk)("tr",null,[(0,t.Lk)("th",null,"ID"),(0,t.Lk)("th",null,"Foto"),(0,t.Lk)("th",null,"CIF"),(0,t.Lk)("th",null,"Datos"),(0,t.Lk)("th",null,"Unidad"),(0,t.Lk)("th",null,"Operaciones")])],-1))),h={scope:"row"},f=l((()=>(0,t.Lk)("br",null,null,-1))),k=l((()=>(0,t.Lk)("br",null,null,-1))),v=l((()=>(0,t.Lk)("br",null,null,-1))),E={class:"small text-medium-emphasis"},F=l((()=>(0,t.Lk)("option",{value:"0"},"Todos",-1))),C=l((()=>(0,t.Lk)("option",{value:"1"},"Femenino",-1))),A=l((()=>(0,t.Lk)("option",{value:"2"},"Masculino",-1))),_=l((()=>(0,t.Lk)("option",{value:"Entrada M."},"Entrada Mañana",-1))),L=l((()=>(0,t.Lk)("option",{value:"Salida M."},"Salida Mañana",-1))),S=l((()=>(0,t.Lk)("option",{value:"Entrada T."},"Entrada Tarde",-1))),O=l((()=>(0,t.Lk)("option",{value:"Salida T."},"Salida Tarde",-1))),w=l((()=>(0,t.Lk)("option",{value:"continuo"},"Continuo",-1))),M=l((()=>(0,t.Lk)("option",{value:"continuoingreso"},"Continuo e Ingreso",-1))),T=l((()=>(0,t.Lk)("option",{value:"horas"},"Horas de Servicio",-1))),y=l((()=>(0,t.Lk)("option",{value:"extraordinario"},"Horario Extraordinario",-1))),V=l((()=>(0,t.Lk)("option",{value:"comision"},"Comisión",-1))),x=l((()=>(0,t.Lk)("option",{value:"permiso"},"Permiso",-1))),W=l((()=>(0,t.Lk)("option",{value:"asueto"},"Asueto",-1))),I=["value"],D=["value"];function $(e,a,o,l,$,B){const P=(0,t.g2)("router-link"),R=(0,t.g2)("CIcon"),U=(0,t.g2)("CDropdownToggle"),q=(0,t.g2)("CButton"),H=(0,t.g2)("CDropdownItem"),j=(0,t.g2)("CDropdownDivider"),z=(0,t.g2)("CDropdownMenu"),X=(0,t.g2)("CDropdown"),G=(0,t.g2)("CCardHeader"),Q=(0,t.g2)("CImage"),K=(0,t.g2)("CProgressBar"),J=(0,t.g2)("CProgress"),N=(0,t.g2)("CButtonGroup"),Y=(0,t.g2)("CCardBody"),Z=(0,t.g2)("CCard"),ee=(0,t.g2)("CCol"),ae=(0,t.g2)("CRow"),oe=(0,t.g2)("CModalTitle"),te=(0,t.g2)("CModalHeader"),ie=(0,t.g2)("CInputGroupText"),se=(0,t.g2)("CFormSelect"),le=(0,t.g2)("CInputGroup"),re=(0,t.g2)("CFormInput"),de=(0,t.g2)("CFormTextarea"),ne=(0,t.g2)("CModalBody"),ue=(0,t.g2)("CModalFooter"),ce=(0,t.g2)("CForm"),me=(0,t.g2)("CModal");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.Lk)("nav",r,[(0,t.Lk)("ol",d,[(0,t.Lk)("li",n,[(0,t.bF)(P,{to:"/tipoempleado",class:"breadcrumb-link"},{default:(0,t.k6)((()=>[(0,t.eW)("Tipo Empleado")])),_:1})]),(0,t.Lk)("li",u,(0,i.v_)($.titulo)+" > ",1)])]),(0,t.bF)(ae,null,{default:(0,t.k6)((()=>[(0,t.bF)(ee,{xs:12},{default:(0,t.k6)((()=>[(0,t.bF)(Z,null,{default:(0,t.k6)((()=>[(0,t.bF)(G,{class:"headercolor d-flex justify-content-between align-items-center"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",c,[(0,t.bF)(R,{icon:"cil-list",size:"lg",class:"me-2 text-light"}),(0,t.Lk)("label",m,(0,i.v_)($.titulo),1)]),(0,t.bF)(X,{variant:"btn-group"},{default:(0,t.k6)((()=>[(0,t.bF)(U,{color:"dark",class:"font border-0 shadow-sm",size:"sm"},{default:(0,t.k6)((()=>[(0,t.bF)(R,{icon:"cil-menu",class:"me-2 text-success"}),(0,t.eW)("Opciones")])),_:1}),(0,t.bF)(z,null,{default:(0,t.k6)((()=>[(0,t.bF)(H,null,{default:(0,t.k6)((()=>[(0,t.bF)(q,{onClick:a[0]||(a[0]=e=>B.clickModalObs(!0)),size:"sm"},{default:(0,t.k6)((()=>[(0,t.bF)(R,{icon:"cil-plus",size:"lg",class:"me-2"}),(0,t.eW)(" Agregar Observaciones")])),_:1})])),_:1}),(0,t.bF)(j),(0,t.bF)(H,null,{default:(0,t.k6)((()=>[(0,t.bF)(q,{onClick:a[1]||(a[1]=e=>B.clickModalRecord(!0)),size:"sm"},{default:(0,t.k6)((()=>[(0,t.bF)(R,{icon:"cil-cloud-download",size:"lg",class:"me-2"}),(0,t.eW)(" Extraer Record")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,t.bF)(Y,null,{default:(0,t.k6)((()=>[(0,t.Lk)("div",p,[(0,t.Lk)("table",g,[b,(0,t.Lk)("tbody",null,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)($.listaCiudadanos,(e=>((0,t.uX)(),(0,t.CE)("tr",{key:e.idPersona},[(0,t.Lk)("th",h,(0,i.v_)(e.idPersona),1),(0,t.Lk)("td",null,[(0,t.bF)(Q,{src:"https://fhcevirtual.umsa.bo/egovf-img/imagenes/200/"+e.foto,width:"70",height:"70"},null,8,["src"])]),(0,t.Lk)("td",null,[(0,t.eW)((0,i.v_)(e.cif)+" ",1),(0,t.bF)(J,null,{default:(0,t.k6)((()=>[((0,t.uX)(),(0,t.Wv)(K,{key:e.idPersona,color:e.color,value:e.total},{default:(0,t.k6)((()=>[(0,t.eW)((0,i.v_)(e.total)+" %",1)])),_:2},1032,["color","value"]))])),_:2},1024)]),(0,t.Lk)("td",null,[(0,t.eW)((0,i.v_)(e.nombre)+" "+(0,i.v_)(e.paterno)+" "+(0,i.v_)(e.materno),1),f,(0,t.eW)(" "+(0,i.v_)(e.ci),1),k,(0,t.eW)(" "+(0,i.v_)(e.celular),1)]),(0,t.Lk)("td",null,[(0,t.eW)((0,i.v_)(e.sigla),1),v,(0,t.Lk)("label",E,(0,i.v_)(e.unidad),1)]),(0,t.Lk)("td",null,[(0,t.bF)(N,{role:"group"},{default:(0,t.k6)((()=>["modulo scc"===e.modulo.toLowerCase()?((0,t.uX)(),(0,t.Wv)(q,{key:0,color:"success",class:"font",onClick:a=>B.moduloScc(e.cif),size:"sm"},{default:(0,t.k6)((()=>[(0,t.bF)(R,{icon:"cil-clipboard"})])),_:2},1032,["onClick"])):(0,t.Q3)("",!0),100===e.total?((0,t.uX)(),(0,t.Wv)(q,{key:1,color:"danger",class:"font",onClick:a=>B.moduloEmp(e.cif),size:"sm"},{default:(0,t.k6)((()=>[(0,t.bF)(R,{icon:"cil-trash"})])),_:2},1032,["onClick"])):(0,t.Q3)("",!0)])),_:2},1024)])])))),128))])])])])),_:1})])),_:1})])),_:1})])),_:1}),(0,t.bF)(me,{visible:$.modalObs,onClose:a[14]||(a[14]=e=>B.clickModalObs(!1))},{default:(0,t.k6)((()=>[(0,t.bF)(ce,{onSubmit:a[13]||(a[13]=(0,s.D$)((e=>B.addObsAll()),["prevent"])),enctype:"multipart/form-data"},{default:(0,t.k6)((()=>[(0,t.bF)(te,{class:"headercolor",dismiss:"",onClose:a[2]||(a[2]=e=>B.clickModalObs(!1))},{default:(0,t.k6)((()=>[(0,t.bF)(oe,null,{default:(0,t.k6)((()=>[(0,t.Lk)("h6",null,[(0,t.bF)(R,{icon:"cil-plus",size:"lg",class:"me-2"}),(0,t.eW)(" Agregar Observaciones de Asistencia")])])),_:1})])),_:1}),(0,t.bF)(ne,null,{default:(0,t.k6)((()=>[(0,t.bF)(le,{class:"mb-3"},{default:(0,t.k6)((()=>[(0,t.bF)(ie,{as:"label"},{default:(0,t.k6)((()=>[(0,t.eW)("Caracteristica ")])),_:1}),(0,t.bF)(se,{modelValue:$.obsall.sexo,"onUpdate:modelValue":a[3]||(a[3]=e=>$.obsall.sexo=e),required:"true"},{default:(0,t.k6)((()=>[F,C,A])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(le,{class:"mb-3"},{default:(0,t.k6)((()=>[(0,t.bF)(ie,{as:"label"},{default:(0,t.k6)((()=>[(0,t.eW)("UID - OBS ")])),_:1}),(0,t.bF)(re,{type:"text",modelValue:$.obsall.uidobs,"onUpdate:modelValue":a[4]||(a[4]=e=>$.obsall.uidobs=e),required:"true"},null,8,["modelValue"])])),_:1}),(0,t.bF)(le,{class:"mb-3"},{default:(0,t.k6)((()=>[(0,t.bF)(ie,{as:"label"},{default:(0,t.k6)((()=>[(0,t.eW)("Fecha de Inicio ")])),_:1}),(0,t.bF)(re,{type:"date",modelValue:$.obsall.fechainicio,"onUpdate:modelValue":a[5]||(a[5]=e=>$.obsall.fechainicio=e),required:"true"},null,8,["modelValue"])])),_:1}),(0,t.bF)(le,{class:"mb-3"},{default:(0,t.k6)((()=>[(0,t.bF)(ie,{as:"label"},{default:(0,t.k6)((()=>[(0,t.eW)("Fecha Fin ")])),_:1}),(0,t.bF)(re,{type:"date",modelValue:$.obsall.fechafin,"onUpdate:modelValue":a[6]||(a[6]=e=>$.obsall.fechafin=e),required:"true"},null,8,["modelValue"])])),_:1}),(0,t.bF)(le,{class:"mb-3"},{default:(0,t.k6)((()=>[(0,t.bF)(ie,{as:"label"},{default:(0,t.k6)((()=>[(0,t.eW)("Detalle")])),_:1}),(0,t.bF)(de,{modelValue:$.obsall.detalle,"onUpdate:modelValue":a[7]||(a[7]=e=>$.obsall.detalle=e),required:"true"},null,8,["modelValue"])])),_:1}),(0,t.bF)(le,{class:"mb-3"},{default:(0,t.k6)((()=>[(0,t.bF)(ie,{as:"label"},{default:(0,t.k6)((()=>[(0,t.eW)("Tipo")])),_:1}),(0,t.bF)(se,{modelValue:$.obsall.tipo,"onUpdate:modelValue":a[8]||(a[8]=e=>$.obsall.tipo=e),required:"true",onChange:a[9]||(a[9]=e=>B.getTipo())},{default:(0,t.k6)((()=>[_,L,S,O,w,M,T,y,V,x,W])),_:1},8,["modelValue"])])),_:1}),B.mostrarHoraIngreso()?((0,t.uX)(),(0,t.Wv)(le,{key:0,class:"mb-3"},{default:(0,t.k6)((()=>[(0,t.bF)(ie,{as:"label"},{default:(0,t.k6)((()=>[(0,t.eW)("Hora Ingreso")])),_:1}),(0,t.bF)(re,{type:"text",modelValue:$.obsall.horaEntrada,"onUpdate:modelValue":a[10]||(a[10]=e=>$.obsall.horaEntrada=e),required:"true"},null,8,["modelValue"])])),_:1})):(0,t.Q3)("",!0),B.mostrarHoraSalida()?((0,t.uX)(),(0,t.Wv)(le,{key:1,class:"mb-3"},{default:(0,t.k6)((()=>[(0,t.bF)(ie,{as:"label"},{default:(0,t.k6)((()=>[(0,t.eW)("Hora Salida")])),_:1}),(0,t.bF)(re,{type:"text",modelValue:$.obsall.horaSalida,"onUpdate:modelValue":a[11]||(a[11]=e=>$.obsall.horaSalida=e),required:"true"},null,8,["modelValue"])])),_:1})):(0,t.Q3)("",!0),(0,t.bF)(le,{class:"mb-3"},{default:(0,t.k6)((()=>[(0,t.bF)(ie,{as:"label"},{default:(0,t.k6)((()=>[(0,t.eW)("Documento")])),_:1}),(0,t.bF)(re,{type:"file",ref:"fileInput",id:"filedoc",accept:"image/png,image/jpeg",onChange:B.selectFile,valid:$.fileValid,required:"true"},null,8,["onChange","valid"]),$.fileValid?((0,t.uX)(),(0,t.Wv)(ie,{key:0},{default:(0,t.k6)((()=>[(0,t.bF)(R,{icon:"cil-check",class:"text-success"})])),_:1})):(0,t.Q3)("",!0)])),_:1}),$.uploading?((0,t.uX)(),(0,t.Wv)(J,{key:2,height:50,class:"mb-3"},{default:(0,t.k6)((()=>[(0,t.bF)(K,{value:$.uploadProgress,color:100===$.uploadProgress?"success":"warning",animated:""},{default:(0,t.k6)((()=>[(0,t.eW)(" Espere un Momento ........... "+(0,i.v_)($.uploadProgress)+" % ",1)])),_:1},8,["value","color"])])),_:1})):(0,t.Q3)("",!0)])),_:1}),(0,t.bF)(ue,null,{default:(0,t.k6)((()=>[(0,t.bF)(q,{onClick:a[12]||(a[12]=e=>B.clickModalObs(!1)),color:"danger",class:"font",size:"sm"},{default:(0,t.k6)((()=>[(0,t.bF)(R,{icon:"cil-x",class:"me-2"}),(0,t.eW)("Cancelar")])),_:1}),(0,t.bF)(q,{type:"submit",class:"font",size:"sm",color:"success"},{default:(0,t.k6)((()=>[(0,t.bF)(R,{icon:"cil-check-alt",class:"me-2"}),(0,t.eW)(" Agregar Observaciones")])),_:1})])),_:1})])),_:1})])),_:1},8,["visible"]),(0,t.bF)(me,{visible:$.modalRecord,onClose:a[21]||(a[21]=e=>B.clickModalRecord(!1))},{default:(0,t.k6)((()=>[(0,t.bF)(ce,{onSubmit:a[20]||(a[20]=(0,s.D$)((e=>B.getRecord()),["prevent"]))},{default:(0,t.k6)((()=>[(0,t.bF)(te,{class:"headercolor",dismiss:"",onClose:a[15]||(a[15]=e=>B.clickModalRecord(!1))},{default:(0,t.k6)((()=>[(0,t.bF)(oe,null,{default:(0,t.k6)((()=>[(0,t.Lk)("h6",null,[(0,t.bF)(R,{icon:"cil-cloud-download",size:"lg",class:"me-2"}),(0,t.eW)(" Extraer Record de Asistencias")])])),_:1})])),_:1}),(0,t.bF)(ne,null,{default:(0,t.k6)((()=>[(0,t.bF)(le,{class:"mb-3"},{default:(0,t.k6)((()=>[(0,t.bF)(ie,{as:"label"},{default:(0,t.k6)((()=>[(0,t.eW)("Gestion ")])),_:1}),(0,t.bF)(se,{modelValue:$.record.gestion,"onUpdate:modelValue":[a[16]||(a[16]=e=>$.record.gestion=e),a[17]||(a[17]=e=>$.record.gestion=Number(e))],"model-value":String($.record.gestion),required:"true"},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)($.listaGestion,(e=>((0,t.uX)(),(0,t.CE)("option",{key:e,value:e},(0,i.v_)(e),9,I)))),128))])),_:1},8,["modelValue","model-value"])])),_:1}),(0,t.bF)(le,{class:"mb-3"},{default:(0,t.k6)((()=>[(0,t.bF)(ie,{as:"label"},{default:(0,t.k6)((()=>[(0,t.eW)("Mes ")])),_:1}),(0,t.bF)(se,{modelValue:$.record.mes,"onUpdate:modelValue":a[18]||(a[18]=e=>$.record.mes=e),"model-value":String($.record.mes),required:"true"},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)($.listaMes,(e=>((0,t.uX)(),(0,t.CE)("option",{key:e,value:e.m},(0,i.v_)(e.mes),9,D)))),128))])),_:1},8,["modelValue","model-value"])])),_:1})])),_:1}),(0,t.bF)(ue,null,{default:(0,t.k6)((()=>[(0,t.bF)(q,{onClick:a[19]||(a[19]=e=>B.clickModalRecord(!1)),color:"danger",class:"font",size:"sm"},{default:(0,t.k6)((()=>[(0,t.bF)(R,{icon:"cil-x",class:"me-2"}),(0,t.eW)("Cancelar")])),_:1}),(0,t.bF)(q,{type:"submit",class:"font",color:"success",size:"sm"},{default:(0,t.k6)((()=>[(0,t.bF)(R,{icon:"cil-check-alt",class:"me-2"}),(0,t.eW)(" Record")])),_:1})])),_:1})])),_:1})])),_:1},8,["visible"])],64)}o(4114);var B=o(7950),P=o(1133),R=o(7160),U=o(7590),q=o(903),H=o(9995),j=o(6587),z=o.n(j);q.A.use(H.A);var X={name:"ListaEmpleadoView",components:{},data(){return{titulo:"Tipo Empleado",modalObs:!1,modalRecord:!1,empleadoService:null,egovfService:null,uploadService:null,sccService:null,id_empleado:0,listaEmpleado:[],listaCiudadanos:[],listaCiudadanoEmpleado:[],listaGestion:[],listaMes:[{m:"01",mes:"Enero"},{m:"02",mes:"Febrero"},{m:"03",mes:"Marzo"},{m:"04",mes:"Abril"},{m:"05",mes:"Mayo"},{m:"06",mes:"Junio"},{m:"07",mes:"Julio"},{m:"08",mes:"Agosto"},{m:"09",mes:"Septiembre"},{m:"10",mes:"Octubre"},{m:"11",mes:"Noviembre"},{m:"12",mes:"Diciembre"}],archivo:"",tipoEmpleadoObj:"",fileValid:!1,uploading:!1,uploadProgress:0,usuario:{token:"",cif:"",correo:"",celular:"",pass:"",unidad:"",sigla:""},tipoEmpleado:{id:0,detalle:"",corto:"",foto:""},obsall:{cif:null,sexo:"",uidobs:"",fechainicio:"",fechafin:"",detalle:"",tipo:"Seleccionar Tipo",horaEntrada:"08:30",horaSalida:"18:30",imagen:"",url:""},record:{gestion:2023,mes:0,tipo:0}}},beforeCreate(){null==this.$cookies.get("cif")&&this.$router.push("/")},created(){this.empleadoService=new P.A,this.egovfService=new B.A,this.sccService=new U.A,this.uploadService=new R.A},mounted(){this.id_empleado=this.$route.params.id,this.getDatos(),this.getTipoEmpleado(),this.getListaEmpleado(),this.getGestion()},methods:{selectFile(e){const a=this.getSafeFileInput(e);a?.files?.length?(this.archivo=a.files[0],this.validateFile(this.archivo)?this.fileValid=!0:this.resetFileInput()):this.resetFileInput()},tablaEmpleado(){this.$nextTick((()=>{z()("#ciudadanoTabla").DataTable()}))},getDatos(){null!=this.$cookies.get("cif")&&(this.usuario.token=this.$cookies.get("token"),this.usuario.cif=this.$cookies.get("cif"),this.usuario.correo=this.$cookies.get("correo"),this.usuario.celular=this.$cookies.get("celular"),this.usuario.pass=this.$cookies.get("pass"),this.usuario.unidad=this.$cookies.get("unidad"),this.usuario.sigla=this.$cookies.get("sigla"),this.usuario.foto=this.$cookies.get("foto"),this.egovfService.headersUsuario(this.usuario.token))},async getListaEmpleado(){await this.empleadoService.getListaEmpleado(this.id_empleado).then((e=>{this.listaEmpleado=e.data,this.getListaCiudadanoEmpleado()}))},async getListaCiudadanoEmpleado(){await this.egovfService.getListaEmpleado().then((e=>{this.listaCiudadanoEmpleado=e.data,this.getListaCiudadano()}))},getListaCiudadano(){this.listaCiudadanos=[],this.listaEmpleado.forEach((e=>{this.listaCiudadanoEmpleado.forEach((a=>{var o={idPersona:0,cif:0,nombre:"",paterno:"",materno:"",ci:"",correo:"",celular:"",sigla:"",unidad:"",foto:"",modulo:"",total:0,color:""};return e.cif!=a.cif||(o.idPersona=a.idPersona,o.cif=e.cif,o.nombre=a.nombre,o.paterno=a.paterno,o.materno=a.materno,o.ci=a.ci,o.correo=a.correo,o.celular=a.celular,o.sigla=a.sigla,o.unidad=a.unidad,o.foto=a.foto,o.modulo=e.empleado,o.color=this.esFechaPasada(e.salida),o.total=this.calcularDiasRestantes(e.fecha,e.salida),this.listaCiudadanos.push(o),!1)}))})),this.tablaEmpleado()},async addObsAll(){this.uploading=!0,this.uploadProgress=0;try{const e=new FormData;e.append("archivo",this.archivo);const a={onUploadProgress:e=>{this.uploadProgress=Math.round(100*e.loaded/e.total)}},o=await this.uploadService.addImagen(e,a);if(200!==o.status)throw new Error("Error al subir archivo");this.obsall.url=this.uploadService.getUrl()+o.data.nombre,this.obsall.imagen=o.data.nombre,this.obsall.cif=this.id_empleado,this.$swal.fire({title:"Desea agregar la Observacione de Asistencia a los Empleados?",showDenyButton:!0,icon:"info",confirmButtonText:"Aceptar",denyButtonText:"Cancelar"}).then((e=>{e.isConfirmed?this.sccService.addObsAll(this.obsall).then((e=>{201==e.status?this.$swal.fire("Las Observaciones fueron Agregadas Corectamente","","success").then((e=>{e&&location.reload()})):this.$swal.fire("Las Observaciones no pudieron ser Registradas",""+e.status,"error")})):e.isDenied&&this.$swal.fire("Datos Cancelados","","info")}))}catch(e){this.$swal.fire("El archivo no pudo ser Guardado  "+e,"","error")}finally{this.uploading=!1,this.uploadProgress=0}},getGestion(){var e=[];const a=new Date;var o=a.getFullYear();this.record.gestion=o;for(var t=2021;t<=o;t++)e.push(t);this.listaGestion=e},async getTipoEmpleado(){await this.empleadoService.getTipoEmpleado(this.id_empleado).then((e=>{this.tipoEmpleadoObj=e.data})),this.titulo=this.tipoEmpleadoObj.detalle},clickModalObs(e){this.modalObs=e},clickModalRecord(e){this.modalRecord=e},moduloScc(e){this.$router.push({name:"ModuloSccView",params:{cifCiudadano:e}})},moduloEmp(e){this.$router.push({name:"ModuloEmpView",params:{cifCiudadano:e}})},getRecord(){this.record.tipo=this.id_empleado,this.clickModalRecord(!1),this.$router.push({name:"RecordView",params:{uri:this.record.gestion+"j"+this.record.mes+"m"+this.record.tipo}})},getTipo(){"Entrada M."==this.obsall.tipo&&(this.obsall.horaEntrada="08:30"),"Salida M."==this.obsall.tipo&&(this.obsall.horaSalida="12:30"),"Entrada T."==this.obsall.tipo&&(this.obsall.horaEntrada="14:30"),"Salida T."==this.obsall.tipo&&(this.obsall.horaSalida="18:30"),"continuo"==this.obsall.tipo&&(this.obsall.horaSalida="16:30"),"continuoingreso"==this.obsall.tipo&&(this.obsall.horaEntrada="08:30",this.obsall.horaSalida="16:30"),"asueto"==this.obsall.tipo&&(this.obsall.horaEntrada="08:30")},mostrarHoraIngreso(){const e=["continuoingreso","Entrada M.","Entrada T.","horas","extraordinario","comision","permiso"];return e.includes(this.obsall.tipo)},mostrarHoraSalida(){const e=["continuoingreso","continuo","Salida M.","Salida T."];return e.includes(this.obsall.tipo)},esFechaPasada(e){if(!e)return"warning";const a=new Date(e),o=new Date;return a.setHours(0,0,0,0),o.setHours(0,0,0,0),a<o?"danger":"success"},calcularDiasRestantes(e,a){const o=new Date(e),t=new Date(a),i=Math.floor((t-o)/864e5),s=new Date;if(!t)return 0;if(s>=t)return 100;const l=Math.floor((s-o)/864e5),r=l/i*100;return parseInt(r<0?0:r.toFixed(2))},getSafeFileInput(e){return this.$refs.fileInput?.$refs?.input||e?.target||this.$refs.fileInput?.$el?.querySelector?.('input[type="file"]')||document.getElementById("filedoc")},validateFile(e){const a=["image/jpeg","image/png"];return e&&a.includes(e.type)},resetFileInput(){this.archivo=null,this.fileValid=!1;const e=this.getSafeFileInput();e&&(e.value="")}}},G=o(1241);const Q=(0,G.A)(X,[["render",$],["__scopeId","data-v-c60a1148"]]);var K=Q}}]);
//# sourceMappingURL=64.f76281d6.js.map