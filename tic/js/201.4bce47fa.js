"use strict";(self["webpackChunkegovf"]=self["webpackChunkegovf"]||[]).push([[201],{1133:function(a,e,o){o.d(e,{A:function(){return s}});var t=o(4373),i=o(1660);const l=i.Qy;class s{getEmpleado(a){return t.A.get(l+"empleado/getEmpleado",{params:{cif:a}})}getListaTipoEmpleado(){return t.A.get(l+"tipo/listar")}getListarEmpleadoModuloCif(a){return t.A.get(l+"modulo/getListarEmpleadoModuloCif",{params:{cif:a}})}getListarEmpleadoModulo(a){return t.A.get(l+"modulo/getListarEmpleadoModulo",{params:{cif:a}})}addContrato(a){const e=new Date;let o=a.numerocontrato;const i={cif:a.cif,numero_contrato:o.toUpperCase(),servicio:a.servicio,unidad:a.unidad,inicio:a.inicio,fin:a.fin,gestion:e.getFullYear(),detalle:a.detalle,idTipoEmpleado:a.idTipoEmpleado,cargo:a.cargo,foto:a.foto};return t.A.post(l+"contrato/addContrato",i)}updateContrato(a,e){let o=a.numerocontrato;const i={id:a.id,cif:a.cif,numero_contrato:o.toUpperCase(),servicio:a.servicio,unidad:a.unidad,inicio:a.inicio,fin:a.fin,gestion:a.gestion,detalle:a.detalle,idTipoEmpleado:a.idTipoEmpleado,foto:e,cargo:a.cargo};return t.A.put(l+"contrato/updateContrato",i)}getTipoEmpleado(a){return t.A.get(l+"tipo/getTipoEmpleado",{params:{id:a}})}getListaEmpleado(a){return t.A.get(l+"empleado/getListaEmpleado",{params:{tipo:a}})}getEmpleados(){return t.A.get(l+"empleado/getEmpleados")}getListaModulo(){return t.A.get(l+"modulo/listar")}addEmpleadoModulo(a){const e={cif:a.cif,id_modulo:a.id_modulo,estado:1};return t.A.post(l+"empmodulo/addEmpleadoModulo",e)}updateEmpleadoEliminar(a){const e={id:a.id,cif:a.cif,tipo_empleado_id:0,fecha:"",estado:0,salida:"",foto:""};return t.A.put(l+"empleado/updateEmpleado",e)}updateFoto(a,e){const o={id:0,cif:a,tipo_empleado_id:0,fecha:"",estado:0,salida:"",foto:e};return t.A.put(l+"empleado/updateFoto",o)}getListaEmpleadoTipo(a){return t.A.get(l+"empleado/listarTipo",{params:{tipo:a}})}}},7950:function(a,e,o){o.d(e,{A:function(){return s}});var t=o(4373),i=o(1660);const l=i.j6;class s{headersUsuario(a){t.A.defaults.headers.common["Authorization"]="Bearer "+a}getEgovf(a){return t.A.get(l+"ciudadano/getEgovf",{params:{cif:a}})}getListaCiudadano(){return t.A.get(l+"ciudadano/getListaCiudadano")}getListaCiudadanoPublico(){return t.A.get(l+"ciudadano/getListaCiudadanoPublico")}getListaEmpleado(){return t.A.get(l+"ciudadano/getListaEmpleado")}}},201:function(a,e,o){o.r(e),o.d(e,{default:function(){return z}});var t=o(6768),i=o(4232);const l=a=>((0,t.Qi)("data-v-2e1f8676"),a=a(),(0,t.jt)(),a),s={"aria-label":"breadcrumb"},d={class:"breadcrumb custom-breadcrumb"},n={class:"breadcrumb-item active","aria-current":"page"},r={class:"d-flex align-items-center"},u={class:"mb-0 fs-6 text-white"},c={class:"table-responsive"},m={id:"personaTabla",class:"table table-striped table-hover"},p=l((()=>(0,t.Lk)("thead",null,[(0,t.Lk)("tr",null,[(0,t.Lk)("th",null,"Foto"),(0,t.Lk)("th",null,"CIF"),(0,t.Lk)("th",null,"Datos"),(0,t.Lk)("th",null,"Contacto"),(0,t.Lk)("th",null,"Operaciones")])],-1))),g=l((()=>(0,t.Lk)("br",null,null,-1))),h={class:"fontabla"},f=["src"],k=l((()=>(0,t.Lk)("br",null,null,-1))),b={class:"card-title"},C=l((()=>(0,t.Lk)("br",null,null,-1))),v=l((()=>(0,t.Lk)("hr",null,null,-1))),L={class:"lista"},_={class:"lista"},F={key:0,class:"lista"},E={key:1,class:"lista"},A=l((()=>(0,t.Lk)("hr",null,null,-1))),w=l((()=>(0,t.Lk)("br",null,null,-1)));function M(a,e,o,l,M,x){const D=(0,t.g2)("CIcon"),T=(0,t.g2)("CCardHeader"),W=(0,t.g2)("CImage"),y=(0,t.g2)("CButton"),$=(0,t.g2)("CCardBody"),S=(0,t.g2)("CCard"),P=(0,t.g2)("CCol"),I=(0,t.g2)("CRow"),z=(0,t.g2)("CModalTitle"),X=(0,t.g2)("CModalHeader"),B=(0,t.g2)("CFormLabel"),H=(0,t.g2)("CAlert"),U=(0,t.g2)("CWidgetStatsB"),j=(0,t.g2)("CModalBody"),R=(0,t.g2)("CModalFooter"),Q=(0,t.g2)("CModal");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.Lk)("nav",s,[(0,t.Lk)("ol",d,[(0,t.Lk)("li",n,(0,i.v_)(M.titulo)+" > ",1)])]),(0,t.bF)(I,null,{default:(0,t.k6)((()=>[(0,t.bF)(P,{xs:12},{default:(0,t.k6)((()=>[(0,t.bF)(S,null,{default:(0,t.k6)((()=>[(0,t.bF)(T,{class:"headercolor d-flex justify-content-between align-items-center"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",r,[(0,t.bF)(D,{icon:"cil-list",size:"lg",class:"me-2 text-light"}),(0,t.Lk)("label",u,(0,i.v_)(M.titulo),1)])])),_:1}),(0,t.bF)($,null,{default:(0,t.k6)((()=>[(0,t.Lk)("div",c,[(0,t.Lk)("table",m,[p,(0,t.Lk)("tbody",null,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(M.listaCiudadanos,(a=>((0,t.uX)(),(0,t.CE)("tr",{key:a.idPersona},[(0,t.Lk)("td",null,[(0,t.bF)(W,{src:"https://fhcevirtual.umsa.bo/egovf-img/imagenes/200/"+a.foto,width:"70",height:"70"},null,8,["src"])]),(0,t.Lk)("td",null,(0,i.v_)(a.cif),1),(0,t.Lk)("td",null,[(0,t.eW)((0,i.v_)(a.paterno)+" "+(0,i.v_)(a.materno)+" "+(0,i.v_)(a.nombre),1),g,(0,t.Lk)("label",h,(0,i.v_)(a.correo),1)]),(0,t.Lk)("td",null,(0,i.v_)(a.celular),1),(0,t.Lk)("td",null,[(0,t.bF)(y,{class:"font",color:"success",onClick:e=>x.perfil(a.cif),size:"sm"},{default:(0,t.k6)((()=>[(0,t.bF)(D,{icon:"cil-user",class:"me-2"}),(0,t.eW)("Perfil")])),_:2},1032,["onClick"])])])))),128))])])])])),_:1})])),_:1})])),_:1})])),_:1}),(0,t.bF)(Q,{size:"lg",visible:M.modalCiudadano,onClose:e[2]||(e[2]=a=>x.clickModalCiudadano(!1))},{default:(0,t.k6)((()=>[(0,t.bF)(X,{class:"headercolor",dismiss:"",onClose:e[0]||(e[0]=a=>x.clickModalCiudadano(!1))},{default:(0,t.k6)((()=>[(0,t.bF)(z,null,{default:(0,t.k6)((()=>[(0,t.Lk)("h6",null,[(0,t.bF)(D,{icon:"cil-user",size:"xl"}),(0,t.eW)(" Perfil de Ciudadano")])])),_:1})])),_:1}),(0,t.bF)(j,null,{default:(0,t.k6)((()=>[(0,t.bF)(I,null,{default:(0,t.k6)((()=>[(0,t.bF)(P,{lg:4},{default:(0,t.k6)((()=>[(0,t.Lk)("img",{src:"https://fhcevirtual.umsa.bo/egovf-img/imagenes/200/"+this.ciudadano.foto,class:"img-fluid rounded-start",width:"200",height:"200"},null,8,f)])),_:1}),(0,t.bF)(P,{lg:8},{default:(0,t.k6)((()=>[k,(0,t.Lk)("h4",b,"CIF : "+(0,i.v_)(this.ciudadano.cif),1),(0,t.bF)(B,{for:"nombre",class:"col-md-4"},{default:(0,t.k6)((()=>[(0,t.eW)("Nombre : ")])),_:1}),(0,t.bF)(B,{for:"nombre",class:"col-md-8"},{default:(0,t.k6)((()=>[(0,t.eW)((0,i.v_)(this.ciudadano.nombre),1)])),_:1}),C,(0,t.bF)(B,{for:"apellido",class:"col-md-4"},{default:(0,t.k6)((()=>[(0,t.eW)("Apellidos : ")])),_:1}),(0,t.bF)(B,{for:"apellido",class:"col-md-8"},{default:(0,t.k6)((()=>[(0,t.eW)((0,i.v_)(this.ciudadano.apellido),1)])),_:1}),v,(0,t.Lk)("ul",null,[(0,t.Lk)("li",L,"Correo : "+(0,i.v_)(this.ciudadano.correo),1),(0,t.Lk)("li",_,"Celular : "+(0,i.v_)(this.ciudadano.celular),1),1==this.ciudadano.sexo?((0,t.uX)(),(0,t.CE)("li",F,"Sexo : Femenino")):((0,t.uX)(),(0,t.CE)("li",E,"Sexo : Masculino"))])])),_:1})])),_:1}),""!==this.empleado.cargo?((0,t.uX)(),(0,t.Wv)(I,{key:0},{default:(0,t.k6)((()=>[A,(0,t.bF)(P,{lg:12},{default:(0,t.k6)((()=>[(0,t.bF)(U,{class:"mb-3",progress:{color:x.esFechaPasada(this.empleado.salida),value:this.total}},{text:(0,t.k6)((()=>[(0,t.bF)(H,{color:x.esFechaPasada(this.empleado.salida),class:"py-1 my-0 d-inline-block"},{default:(0,t.k6)((()=>[(0,t.eW)(" Valido Hasta : "+(0,i.v_)(this.empleado.salida),1)])),_:1},8,["color"])])),title:(0,t.k6)((()=>[(0,t.Lk)("strong",null,(0,i.v_)(this.ciudadano.sigla),1),(0,t.eW)(" | "+(0,i.v_)(this.empleado.cargo)+" | "+(0,i.v_)(this.empleado.numero),1),w,(0,t.eW)(" "+(0,i.v_)(this.empleado.empleado),1)])),value:(0,t.k6)((()=>[(0,t.eW)((0,i.v_)(this.ciudadano.unidad),1)])),_:1},8,["progress"])])),_:1})])),_:1})):(0,t.Q3)("",!0)])),_:1}),(0,t.bF)(R,null,{default:(0,t.k6)((()=>[(0,t.bF)(y,{onClick:e[1]||(e[1]=a=>x.clickModalCiudadano(!1)),color:"danger",class:"font",size:"sm"},{default:(0,t.k6)((()=>[(0,t.bF)(D,{icon:"cil-x",class:"me-2"}),(0,t.eW)("Cancelar")])),_:1})])),_:1})])),_:1},8,["visible"])],64)}o(4114);var x=o(7950),D=o(1133),T=o(903),W=o(9995),y=o(6587),$=o.n(y);T.A.use(W.A);var S={name:"ListaCiudadanoView",components:{},data(){return{titulo:"Lista de Ciudadanos",egovfService:null,empleadoService:null,listaCiudadanos:[],listaEmpleado:[],modalCiudadano:!1,total:0,usuario:{token:"",cif:"",correo:"",celular:"",pass:"",unidad:"",sigla:"",foto:""},ciudadano:{cif:0,nombre:"",apellido:"",correo:"",celular:"",unidad:"",sigla:"",dependiente:"",foto:"",sexo:0},empleado:{empleado:"",fecha:"",salida:"",cargo:"",numero:"",gestion:""}}},beforeCreate(){null==this.$cookies.get("cif")&&this.$router.push("/")},created(){this.egovfService=new x.A,this.empleadoService=new D.A},mounted(){this.getDatos(),this.getListaCiudadanoPublico()},methods:{tabla(){this.$nextTick((()=>{$()("#personaTabla").DataTable()}))},getDatos(){null!=this.$cookies.get("cif")&&(this.usuario.token=this.$cookies.get("token"),this.usuario.cif=this.$cookies.get("cif"),this.usuario.correo=this.$cookies.get("correo"),this.usuario.celular=this.$cookies.get("celular"),this.usuario.pass=this.$cookies.get("pass"),this.usuario.unidad=this.$cookies.get("unidad"),this.usuario.sigla=this.$cookies.get("sigla"),this.usuario.foto=this.$cookies.get("foto"),this.egovfService.headersUsuario(this.usuario.token))},async getListaCiudadanoPublico(){await this.egovfService.getListaCiudadanoPublico().then((a=>{const e=a.data.sort(((a,e)=>a.paterno.localeCompare(e.paterno)));this.listaCiudadanos=e,this.getEmpleados()}))},async getEmpleados(){await this.empleadoService.getEmpleados().then((a=>{this.listaEmpleado=a.data,this.tabla()}))},perfil(a){this.listaCiudadanos.forEach((e=>{if(e.cif==a)return this.ciudadano.cif=e.cif,this.ciudadano.nombre=e.nombre,this.ciudadano.apellido=e.paterno+" "+e.materno,this.ciudadano.correo=e.correo,this.ciudadano.celular=e.celular,this.ciudadano.sexo=e.sexo,this.ciudadano.foto=e.foto,this.ciudadano.sigla=e.sigla,this.ciudadano.unidad=e.unidad,!0})),this.empleado.cargo="",this.listaEmpleado.forEach((e=>{if(e.cif==a)return this.empleado.empleado=e.empleado,this.empleado.fecha=e.fecha,this.empleado.salida=e.salida,this.empleado.cargo=e.cargo,this.empleado.numero=e.contratos[0].numero_contrato,this.empleado.gestion=e.contratos[0].gestion,this.calcularDiasRestantes(e.fecha,e.salida),!0})),this.clickModalCiudadano(!0)},clickModalCiudadano(a){this.modalCiudadano=a},reporteCiudadano(a){const e=Date.now(),o=new Date(e);var t=o.getFullYear(e),i=o.getMonth()+1,l=i.toString().padStart(2,"0");this.clickModalCiudadano(!1),this.$router.push({name:"UsuarioReporteView",params:{uri:a+"j"+t+"m"+l+"m00k00"}})},esFechaPasada(a){if(!a)return"warning";const e=new Date(a),o=new Date;return e.setHours(0,0,0,0),o.setHours(0,0,0,0),e<o?"danger":"success"},calcularDiasRestantes(a,e){const o=new Date(a),t=new Date(e),i=Math.floor((t-o)/864e5),l=new Date;if(t||(this.total=0),l>=t)this.total=100;else{const a=Math.floor((l-o)/864e5),e=a/i*100;this.total=parseInt(e<0?0:e.toFixed(2))}}}},P=o(1241);const I=(0,P.A)(S,[["render",M],["__scopeId","data-v-2e1f8676"]]);var z=I}}]);
//# sourceMappingURL=201.4bce47fa.js.map