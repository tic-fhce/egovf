"use strict";(self["webpackChunkegovf"]=self["webpackChunkegovf"]||[]).push([[385],{1133:function(a,e,o){o.d(e,{A:function(){return l}});var t=o(4373),i=o(1660);const s=i.Qy;class l{getEmpleado(a){return t.A.get(s+"empleado/getEmpleado",{params:{cif:a}})}getListaTipoEmpleado(){return t.A.get(s+"tipo/listar")}getListarEmpleadoModuloCif(a){return t.A.get(s+"modulo/getListarEmpleadoModuloCif",{params:{cif:a}})}getListarEmpleadoModulo(a){return t.A.get(s+"modulo/getListarEmpleadoModulo",{params:{cif:a}})}addContrato(a){const e=new Date;let o=a.numerocontrato;const i={cif:a.cif,numero_contrato:o.toUpperCase(),servicio:a.servicio,unidad:a.unidad,inicio:a.inicio,fin:a.fin,gestion:e.getFullYear(),detalle:a.detalle,idTipoEmpleado:a.idTipoEmpleado,cargo:a.cargo,foto:a.foto};return t.A.post(s+"contrato/addContrato",i)}updateContrato(a,e){let o=a.numerocontrato;const i={id:a.id,cif:a.cif,numero_contrato:o.toUpperCase(),servicio:a.servicio,unidad:a.unidad,inicio:a.inicio,fin:a.fin,gestion:a.gestion,detalle:a.detalle,idTipoEmpleado:a.idTipoEmpleado,foto:e,cargo:a.cargo};return t.A.put(s+"contrato/updateContrato",i)}getTipoEmpleado(a){return t.A.get(s+"tipo/getTipoEmpleado",{params:{id:a}})}getListaEmpleado(a){return t.A.get(s+"empleado/getListaEmpleado",{params:{tipo:a}})}getEmpleados(){return t.A.get(s+"empleado/getEmpleados")}getListaModulo(){return t.A.get(s+"modulo/listar")}addEmpleadoModulo(a){const e={cif:a.cif,id_modulo:a.id_modulo,estado:1};return t.A.post(s+"empmodulo/addEmpleadoModulo",e)}updateEmpleadoEliminar(a){const e={id:a.id,cif:a.cif,tipo_empleado_id:0,fecha:"",estado:0,salida:"",foto:""};return t.A.put(s+"empleado/updateEmpleado",e)}updateFoto(a,e){const o={id:0,cif:a,tipo_empleado_id:0,fecha:"",estado:0,salida:"",foto:e};return t.A.put(s+"empleado/updateFoto",o)}getListaEmpleadoTipo(a){return t.A.get(s+"empleado/listarTipo",{params:{tipo:a}})}}},7950:function(a,e,o){o.d(e,{A:function(){return l}});var t=o(4373),i=o(1660);const s=i.j6;class l{headersUsuario(a){t.A.defaults.headers.common["Authorization"]="Bearer "+a}getEgovf(a){return t.A.get(s+"ciudadano/getEgovf",{params:{cif:a}})}getListaCiudadano(){return t.A.get(s+"ciudadano/getListaCiudadano")}getListaCiudadanoPublico(){return t.A.get(s+"ciudadano/getListaCiudadanoPublico")}getListaEmpleado(){return t.A.get(s+"ciudadano/getListaEmpleado")}}},7160:function(a,e,o){o.d(e,{A:function(){return l}});var t=o(4373),i=o(1660);const s=i.H4;class l{getListarCifCero(){return t.A.get("biometrico/listarCifCero")}addImagen(a,e){return t.A.post(s+"upload.php",a,{...e,headers:{"Content-Type":"multipart/form-data"}})}addFoto(a,e){return t.A.post(s+"foto.php",a,{...e,headers:{"Content-Type":"multipart/form-data"}})}getUrl(){return s+"imagenes/"}getImage(a){return t.A.get(a,{headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"*"}})}}},8601:function(a,e,o){o.r(e),o.d(e,{default:function(){return X}});var t=o(6768),i=o(4232),s=o(5130);const l=a=>((0,t.Qi)("data-v-25905da4"),a=a(),(0,t.jt)(),a),d={"aria-label":"breadcrumb"},r={class:"breadcrumb custom-breadcrumb"},n={class:"breadcrumb-item"},u={class:"breadcrumb-item active","aria-current":"page"},c={class:"align-items-center"},b={class:"mb-0 fs-6 text-white"},h={class:"table-responsive"},m={class:"table",id:"obsTabla"},p=l((()=>(0,t.Lk)("thead",null,[(0,t.Lk)("tr",null,[(0,t.Lk)("th",null,"ID"),(0,t.Lk)("th",null,"Ciudadano"),(0,t.Lk)("th",null,"Datos"),(0,t.Lk)("th",null,"UidObs"),(0,t.Lk)("th",null,"Detalle"),(0,t.Lk)("th",null,"Opciones")])],-1))),f={scope:"row"},g={class:"small text-medium-emphasis"},k={class:"small text-medium-emphasis"},C=l((()=>(0,t.Lk)("br",null,null,-1))),E={class:"small text-medium-emphasis"},v=l((()=>(0,t.Lk)("tfoot",null,[(0,t.Lk)("tr")],-1))),F=l((()=>(0,t.Lk)("option",{value:"Entrada M."},"Entrada Mañana",-1))),L=l((()=>(0,t.Lk)("option",{value:"Salida M."},"Salida Mañana",-1))),O=l((()=>(0,t.Lk)("option",{value:"Entrada T."},"Entrada Tarde",-1))),D=l((()=>(0,t.Lk)("option",{value:"Salida T."},"Salida Tarde",-1))),_=l((()=>(0,t.Lk)("option",{value:"continuo"},"Continuo",-1))),A=l((()=>(0,t.Lk)("option",{value:"continuoingreso"},"Continuo e Ingreso",-1))),S=l((()=>(0,t.Lk)("option",{value:"horas"},"Horas de Servicio",-1))),w=l((()=>(0,t.Lk)("option",{value:"extraordinario"},"Horario Extraordinario",-1))),y=l((()=>(0,t.Lk)("option",{value:"comision"},"Comisión",-1))),T=l((()=>(0,t.Lk)("option",{value:"permiso"},"Permiso",-1))),M=l((()=>(0,t.Lk)("option",{value:"asueto"},"Asueto",-1)));function x(a,e,o,l,x,I){const V=(0,t.g2)("router-link"),$=(0,t.g2)("CIcon"),U=(0,t.g2)("CCardHeader"),W=(0,t.g2)("CImage"),z=(0,t.g2)("CButton"),B=(0,t.g2)("CButtonGroup"),R=(0,t.g2)("CCardBody"),H=(0,t.g2)("CCard"),G=(0,t.g2)("CCol"),q=(0,t.g2)("CRow"),j=(0,t.g2)("CModalTitle"),P=(0,t.g2)("CModalHeader"),X=(0,t.g2)("ComponenteObs"),N=(0,t.g2)("CModalBody"),J=(0,t.g2)("CModalFooter"),K=(0,t.g2)("CModal"),Q=(0,t.g2)("CInputGroupText"),Y=(0,t.g2)("CFormInput"),Z=(0,t.g2)("CInputGroup"),aa=(0,t.g2)("CFormTextarea"),ea=(0,t.g2)("CFormSelect"),oa=(0,t.g2)("ComponenteImagen"),ta=(0,t.g2)("CForm");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.Lk)("nav",d,[(0,t.Lk)("ol",r,[(0,t.Lk)("li",n,[(0,t.bF)(V,{to:"/menuObs",class:"breadcrumb-link"},{default:(0,t.k6)((()=>[(0,t.eW)("Menu de Observaciones")])),_:1})]),(0,t.Lk)("li",u,(0,i.v_)(x.titulo)+" > ",1)])]),(0,t.bF)(q,null,{default:(0,t.k6)((()=>[(0,t.bF)(G,{xs:12},{default:(0,t.k6)((()=>[(0,t.bF)(H,null,{default:(0,t.k6)((()=>[(0,t.bF)(U,{class:"headercolor justify-content-between"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",c,[(0,t.bF)($,{icon:"cil-list",size:"lg",class:"me-2 text-light"}),(0,t.Lk)("label",b,(0,i.v_)(x.titulo),1)])])),_:1}),(0,t.bF)(R,null,{default:(0,t.k6)((()=>[(0,t.Lk)("div",h,[(0,t.Lk)("table",m,[p,(0,t.Lk)("tbody",null,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(x.listaObsCiudadanos,(a=>((0,t.uX)(),(0,t.CE)("tr",{key:a.id},[(0,t.Lk)("th",f,(0,i.v_)(a.id),1),(0,t.Lk)("td",null,[(0,t.bF)(W,{src:"https://fhcevirtual.umsa.bo/egovf-img/imagenes/200/"+a.foto,width:"70",height:"70"},null,8,["src"])]),(0,t.Lk)("td",null,[(0,t.Lk)("div",null,(0,i.v_)(a.cif),1),(0,t.Lk)("div",g,[(0,t.Lk)("span",null,(0,i.v_)(a.nombre),1)])]),(0,t.Lk)("td",null,[(0,t.eW)((0,i.v_)(a.uidobs)+" ",1),(0,t.Lk)("div",k,[(0,t.Lk)("span",null,[(0,t.eW)((0,i.v_)(a.tipo),1),C,(0,t.eW)(" "+(0,i.v_)(a.horas),1)])])]),(0,t.Lk)("td",null,[(0,t.Lk)("div",null,(0,i.v_)(a.detalle),1),(0,t.Lk)("div",E,[(0,t.Lk)("span",null,(0,i.v_)(a.fechas),1)])]),(0,t.Lk)("td",null,[(0,t.bF)(B,{role:"group"},{default:(0,t.k6)((()=>[(0,t.bF)(z,{color:"success",class:"font",size:"sm",onClick:e=>I.getObsDetalle(a.id)},{default:(0,t.k6)((()=>[(0,t.bF)($,{icon:"cil-featured-playlist"})])),_:2},1032,["onClick"]),(0,t.bF)(z,{color:"warning",class:"font",size:"sm",onClick:e=>I.setObs(a.id)},{default:(0,t.k6)((()=>[(0,t.bF)($,{icon:"cil-pencil"})])),_:2},1032,["onClick"])])),_:2},1024)])])))),128))]),v])])])),_:1})])),_:1})])),_:1})])),_:1}),(0,t.bF)(K,{size:"lg",visible:x.modalDetalleObs,onClose:e[5]||(e[5]=a=>I.clickModalDetalleObs(!1))},{default:(0,t.k6)((()=>[(0,t.bF)(P,{class:"headercolor",dismiss:"",onClose:e[0]||(e[0]=a=>I.clickModalDetalleObs(!1))},{default:(0,t.k6)((()=>[(0,t.bF)(j,null,{default:(0,t.k6)((()=>[(0,t.Lk)("h6",null,[(0,t.bF)($,{icon:"cil-featured-playlist"}),(0,t.eW)(" Detalles de la Observacion")])])),_:1})])),_:1}),(0,t.bF)(N,null,{default:(0,t.k6)((()=>[(0,t.bF)(X,{obsDetalle:x.obsDetalle},null,8,["obsDetalle"])])),_:1}),(0,t.bF)(J,null,{default:(0,t.k6)((()=>[(0,t.bF)(B,{role:"group"},{default:(0,t.k6)((()=>[(0,t.bF)(z,{onClick:e[1]||(e[1]=a=>I.clickModalDetalleObs(!1)),color:"danger",class:"font",size:"sm"},{default:(0,t.k6)((()=>[(0,t.bF)($,{icon:"cil-x",class:"me-2"}),(0,t.eW)("Cancelar")])),_:1}),(0,t.bF)(z,{onClick:e[2]||(e[2]=a=>I.downloadImg(x.obsDetalle.url,x.obsDetalle.imagen)),color:"warning",class:"font",size:"sm"},{default:(0,t.k6)((()=>[(0,t.bF)($,{icon:"cil-cloud-download",class:"me-2"}),(0,t.eW)("Descargar ")])),_:1}),(0,t.bF)(z,{onClick:e[3]||(e[3]=a=>I.updateObsBio(x.obsDetalle.id,1)),color:"success",class:"font",size:"sm"},{default:(0,t.k6)((()=>[(0,t.bF)($,{icon:"cil-check-alt",class:"me-2"}),(0,t.eW)("Aporbar ")])),_:1}),(0,t.bF)(z,{onClick:e[4]||(e[4]=a=>I.updateObsBio(x.obsDetalle.id,2)),color:"dark",class:"font",size:"sm"},{default:(0,t.k6)((()=>[(0,t.bF)($,{icon:"cil-warning",class:"me-2"}),(0,t.eW)("Rechazar ")])),_:1})])),_:1})])),_:1})])),_:1},8,["visible"]),(0,t.bF)(K,{size:"lg",visible:x.modalObsEditar,onClose:e[18]||(e[18]=a=>I.clickModalObsEditar(!1))},{default:(0,t.k6)((()=>[(0,t.bF)(ta,{onSubmit:e[17]||(e[17]=(0,s.D$)((a=>I.updateObsEmpleado()),["prevent"]))},{default:(0,t.k6)((()=>[(0,t.bF)(P,{class:"headercolor text-center",dismiss:"",onClose:e[6]||(e[6]=a=>I.clickModalObsEditar(!1))},{default:(0,t.k6)((()=>[(0,t.bF)(j,null,{default:(0,t.k6)((()=>[(0,t.Lk)("h6",null,[(0,t.bF)($,{icon:"cil-featured-playlist"}),(0,t.eW)(" Actualizar la Observacion de Asistencia")])])),_:1})])),_:1}),(0,t.bF)(N,null,{default:(0,t.k6)((()=>[(0,t.bF)(q,null,{default:(0,t.k6)((()=>[(0,t.bF)(G,{lg:6},{default:(0,t.k6)((()=>[(0,t.bF)(Z,{class:"mb-3"},{default:(0,t.k6)((()=>[(0,t.bF)(Q,{as:"label"},{default:(0,t.k6)((()=>[(0,t.eW)("CIF ")])),_:1}),(0,t.bF)(Y,{type:"text",modelValue:x.uobs.cif,"onUpdate:modelValue":e[7]||(e[7]=a=>x.uobs.cif=a),required:"true",placeholder:"CIF"},null,8,["modelValue"])])),_:1}),(0,t.bF)(Z,{class:"mb-3"},{default:(0,t.k6)((()=>[(0,t.bF)(Q,{as:"label"},{default:(0,t.k6)((()=>[(0,t.eW)("UID - OBS ")])),_:1}),(0,t.bF)(Y,{disabled:1==x.uobs.idtipo,readonly:1==x.uobs.idtipo,type:"text",modelValue:x.uobs.uidobs,"onUpdate:modelValue":e[8]||(e[8]=a=>x.uobs.uidobs=a),required:"true",placeholder:"Cite u Hoja de Ruta"},null,8,["disabled","readonly","modelValue"])])),_:1}),(0,t.bF)(Z,{class:"mb-3"},{default:(0,t.k6)((()=>[(0,t.bF)(Q,{as:"label"},{default:(0,t.k6)((()=>[(0,t.eW)("Fecha de Inicio ")])),_:1}),(0,t.bF)(Y,{disabled:1==x.uobs.idtipo,readonly:1==x.uobs.idtipo,type:"date",modelValue:x.uobs.fechainicio,"onUpdate:modelValue":e[9]||(e[9]=a=>x.uobs.fechainicio=a),required:"true"},null,8,["disabled","readonly","modelValue"])])),_:1}),(0,t.bF)(Z,{class:"mb-3"},{default:(0,t.k6)((()=>[(0,t.bF)(Q,{as:"label"},{default:(0,t.k6)((()=>[(0,t.eW)("Fecha Fin ")])),_:1}),(0,t.bF)(Y,{disabled:1==x.uobs.idtipo,readonly:1==x.uobs.idtipo,type:"date",modelValue:x.uobs.fechafin,"onUpdate:modelValue":e[10]||(e[10]=a=>x.uobs.fechafin=a),required:"true"},null,8,["disabled","readonly","modelValue"])])),_:1}),(0,t.bF)(Z,{class:"mb-3"},{default:(0,t.k6)((()=>[(0,t.bF)(Q,{as:"label"},{default:(0,t.k6)((()=>[(0,t.eW)("Detalle")])),_:1}),(0,t.bF)(aa,{disabled:1==x.uobs.idtipo,readonly:1==x.uobs.idtipo,modelValue:x.uobs.detalle,"onUpdate:modelValue":e[11]||(e[11]=a=>x.uobs.detalle=a),required:"true"},null,8,["disabled","readonly","modelValue"])])),_:1}),(0,t.bF)(Z,{class:"mb-3"},{default:(0,t.k6)((()=>[(0,t.bF)(Q,{as:"label"},{default:(0,t.k6)((()=>[(0,t.eW)("Tipo")])),_:1}),(0,t.bF)(ea,{disabled:1==x.uobs.idtipo,readonly:1==x.uobs.idtipo,modelValue:x.uobs.tipo,"onUpdate:modelValue":e[12]||(e[12]=a=>x.uobs.tipo=a),required:"true",onChange:e[13]||(e[13]=a=>I.getUTipo())},{default:(0,t.k6)((()=>[F,L,O,D,_,A,S,w,y,T,M])),_:1},8,["disabled","readonly","modelValue"])])),_:1}),(0,t.bF)(Z,{class:"mb-3"},{default:(0,t.k6)((()=>[(0,t.bF)(Q,{as:"label"},{default:(0,t.k6)((()=>[(0,t.eW)("Hora Ingreso")])),_:1}),(0,t.bF)(Y,{type:"text",modelValue:x.uobs.horaEntrada,"onUpdate:modelValue":e[14]||(e[14]=a=>x.uobs.horaEntrada=a),required:"true"},null,8,["modelValue"])])),_:1}),(0,t.bF)(Z,{class:"mb-3"},{default:(0,t.k6)((()=>[(0,t.bF)(Q,{as:"label"},{default:(0,t.k6)((()=>[(0,t.eW)("Hora Salida")])),_:1}),(0,t.bF)(Y,{type:"text",modelValue:x.uobs.horaSalida,"onUpdate:modelValue":e[15]||(e[15]=a=>x.uobs.horaSalida=a),required:"true"},null,8,["modelValue"])])),_:1})])),_:1}),(0,t.bF)(G,{lg:6},{default:(0,t.k6)((()=>[(0,t.bF)(oa,{imagen:x.uobs.url},null,8,["imagen"])])),_:1})])),_:1})])),_:1}),(0,t.bF)(J,null,{default:(0,t.k6)((()=>[(0,t.bF)(z,{onClick:e[16]||(e[16]=a=>I.clickModalObsEditar(!1)),color:"danger",class:"font",size:"sm"},{default:(0,t.k6)((()=>[(0,t.bF)($,{icon:"cil-x",class:"me-2"}),(0,t.eW)("Cancelar ")])),_:1}),(0,t.bF)(z,{type:"submit",class:"font",color:"success",size:"sm"},{default:(0,t.k6)((()=>[(0,t.bF)($,{icon:"cil-check-alt",class:"me-2"}),(0,t.eW)(" Actualizar Observacion ")])),_:1})])),_:1})])),_:1})])),_:1},8,["visible"])],64)}o(4114),o(4603),o(7566),o(8721);var I=o(7897),V=o(8842),$=o(7950),U=o(7160),W=o(1133),z=o(7590),B=o(903),R=o(9995),H=o(6587),G=o.n(H);B.A.use(R.A);var q={name:"ObsView",components:{ComponenteObs:I.A,ComponenteImagen:V.A},data(){return{titulo:"Solicitud de Observaciones de los Empleados",modalObs:!1,modalDetalleObs:!1,modalObsEditar:!1,modalImgEditar:!1,egovfService:null,uploadService:null,sccService:null,empleadoService:null,listaGestion:[],listaObs:[],listaTipoEmpleado:[],listaCiudadanoEmpleado:[],listaObsCiudadanos:[],tipo:0,gestion:0,color:"",estado:"",listaMes:[{m:"01",mes:"Enero"},{m:"02",mes:"Febrero"},{m:"03",mes:"Marzo"},{m:"04",mes:"Abril"},{m:"05",mes:"Mayo"},{m:"06",mes:"Junio"},{m:"07",mes:"Julio"},{m:"08",mes:"Agosto"},{m:"09",mes:"Septiembre"},{m:"10",mes:"Octubre"},{m:"11",mes:"Noviembre"},{m:"12",mes:"Diciembre"}],archivo:"",usuario:{token:"",cif:"",correo:"",celular:"",pass:"",unidad:"",sigla:"",foto:""},obsall:{cif:null,uidobs:"",sexo:"",fechainicio:"",fechafin:"",detalle:"",tipo:"Seleccionar Tipo",hora:"08:30",url:""},obsDetalle:{id:0,idObs:0,cif:0,sexo:0,uidobs:"",fechainicio:"",fechafin:"",gestion:0,mes:0,di:0,df:0,detalle:"",imagen:"",tipo:"",horaEntrada:"",hentrada:"",mentrada:"",horaSalida:"",hsalida:"",msalida:"",url:"",estado:0,idtipo:"PRIVADO",datos:{cif:0,nombre:"",apellido:""},forma:{color:"",estado:""}},uobs:{id:0,idObs:0,cif:0,sexo:0,uidobs:"",fechainicio:"",fechafin:"",gestion:0,mes:0,di:0,df:0,detalle:"",imagen:"",tipo:"",horaEntrada:"",hentrada:"",mentrada:"",horaSalida:"",hsalida:"",msalida:"",url:"",estado:0,idtipo:0}}},beforeCreate(){null==this.$cookies.get("cif")&&this.$router.push("/")},created(){this.egovfService=new $.A,this.sccService=new z.A,this.uploadService=new U.A,this.empleadoService=new W.A},mounted(){this.getDatos(),this.getGestion(),this.getListaTipoEmpleado()},methods:{selectFile(){this.archivo=this.$refs.obsfile.files[0]},selectFileImg(){this.archivo=this.$refs.obsfileimg.files[0]},tablaObs(){this.$nextTick((()=>{G()("#obsTabla").DataTable()}))},getDatos(){null!=this.$cookies.get("cif")&&(this.usuario.token=this.$cookies.get("token"),this.usuario.cif=this.$cookies.get("cif"),this.usuario.correo=this.$cookies.get("correo"),this.usuario.celular=this.$cookies.get("celular"),this.usuario.pass=this.$cookies.get("pass"),this.usuario.unidad=this.$cookies.get("unidad"),this.usuario.sigla=this.$cookies.get("sigla"),this.usuario.foto=this.$cookies.get("foto"))},getGestion(){var a=[];const e=new Date;for(var o=e.getFullYear(),t=2021;t<=o;t++)a.push(t);this.listaGestion=a,this.getListaObsEmpleado(o)},async getListaObsEmpleado(a){await this.sccService.getListaObsEmpleado(a).then((a=>{this.listaObs=a.data})),this.getListaCiudadanoEmpleado()},async getListaTipoEmpleado(){await this.empleadoService.getListaTipoEmpleado().then((a=>{this.listaTipoEmpleado=a.data}))},async getListaCiudadanoEmpleado(){await this.egovfService.getListaEmpleado().then((a=>{this.listaCiudadanoEmpleado=a.data})),this.getListaObsCiudadano()},getListaObsCiudadano(){this.listaObsCiudadanos=[],this.listaCiudadanoEmpleado.forEach((a=>{this.listaObs.forEach((e=>{var o={id:0,idObs:0,cif:0,nombre:"",uidobs:"",tipo:"",detalle:"",fechas:"",horas:"",foto:""};return a.cif!=e.cif||(o.id=e.id,o.idObs=e.idObs,o.cif=e.cif,o.nombre=a.nombre+" "+a.paterno+" "+a.materno,o.uidobs=e.uidobs,o.tipo=e.tipo,o.detalle=e.detalle,o.fechas=e.fechainicio+" | "+e.fechafin,o.horas=e.horaEntrada+" | "+e.horaSalida,o.foto=a.foto,this.listaObsCiudadanos.push(o),!1)}))})),this.tablaObs()},getObsDetalle(a){this.listaObs.forEach((e=>{if(e.id===a)return this.obsDetalle.id=e.id,this.obsDetalle.idObs=e.idObs,this.obsDetalle.cif=e.cif,this.obsDetalle.sexo=e.sexo,this.obsDetalle.uidobs=e.uidobs,this.obsDetalle.fechainicio=e.fechainicio,this.obsDetalle.fechafin=e.fechafin,this.obsDetalle.gestion=e.gestion,this.obsDetalle.mes=e.mes,this.obsDetalle.di=e.di,this.obsDetalle.df=e.df,this.obsDetalle.detalle=e.detalle,this.obsDetalle.imagen=e.imagen,this.obsDetalle.tipo=e.tipo,this.obsDetalle.horaEntrada=e.horaEntrada,this.obsDetalle.hentrada=e.hentrada,this.obsDetalle.mentrada=e.mentrada,this.obsDetalle.horaSalida=e.horaSalida,this.obsDetalle.hsalida=e.hsalida,this.obsDetalle.msalida=e.msalida,this.obsDetalle.url=e.url,this.obsDetalle.estado=e.estado,1==e.idtipo?this.obsDetalle.idtipo="GENERAL":this.obsDetalle.idtipo="PRIVADO",1==this.obsDetalle.estado&&(this.obsDetalle.forma.color="success",this.obsDetalle.forma.estado="Aprobado"),0==this.obsDetalle.estado&&(this.obsDetalle.forma.color="warning",this.obsDetalle.forma.estado="En Espera"),2==this.obsDetalle.estado&&(this.obsDetalle.forma.color="danger",this.obsDetalle.forma.estado="Rechazado"),!0})),this.listaObsCiudadanos.forEach((a=>{if(a.cif==this.obsDetalle.cif)return this.obsDetalle.datos.cif=a.cif,this.obsDetalle.datos.nombre=a.nombre,!0})),this.clickModalDetalleObs(!0)},async updateObsBio(a,e){var o={id:0,cif:0,idObs:0,horaEntrada:"",horaSalida:"",hentrada:0,hsalida:0,mentrada:0,msalida:0,estado:0};this.listaObs.forEach((t=>{if(t.id==a)return o.id=t.id,o.cif=t.cif,o.idObs=t.idObs,o.horaEntrada=t.horaEntrada,o.hentrada=t.hentrada,o.mentrada=t.mentrada,o.horaSalida=t.horaSalida,o.hsalida=t.hsalida,o.msalida=t.msalida,o.estado=e,!0})),await this.$swal.fire({title:"Desea Aprobar la Observacion  ? ",showDenyButton:!0,icon:"info",confirmButtonText:"Aceptar",denyButtonText:"Cancelar"}).then((a=>{a.isConfirmed?this.sccService.updateObsBio(o).then((a=>{200==a.status?this.$swal.fire("Observacion Actualizada Corectamente","","success").then((a=>{a&&location.reload()})):this.$swal.fire("Los Datos no fueron Guardados Error"+a.status,"","error")})):a.isDenied&&this.$swal.fire("Datos Cancelados","","info")}))},async updateObsEmpleado(){this.$swal.fire({title:"Deseas Actualizar la Observacion de Asistencia ?",showDenyButton:!0,icon:"info",confirmButtonText:"Aceptar",denyButtonText:"Cancelar"}).then((a=>{a.isConfirmed?this.sccService.updateObsEmpleado(this.uobs).then((a=>{200==a.status?this.$swal.fire("La Observacion fue Actualizada Corectamente","","success").then((a=>{a&&location.reload()})):this.$swal.fire("La Observacion no pudo ser Registrada",""+a.status,"error")})):a.isDenied&&this.$swal.fire("Datos Cancelados","","info")}))},setObs(a){this.listaObs.forEach((e=>{e.id===a&&(this.uobs.id=e.id,this.uobs.idObs=e.idObs,this.uobs.cif=e.cif,this.uobs.sexo=e.sexo,this.uobs.uidobs=e.uidobs,this.uobs.fechainicio=e.fechainicio,this.uobs.fechafin=e.fechafin,this.uobs.gestion=e.gestion,this.uobs.mes=e.mes,this.uobs.di=e.di,this.uobs.df=e.df,this.uobs.detalle=e.detalle,this.uobs.imagen=e.imagen,this.uobs.tipo=e.tipo,this.uobs.horaEntrada=e.horaEntrada,this.uobs.hentrada=e.hentrada,this.uobs.mentrada=e.mentrada,this.uobs.horaSalida=e.horaSalida,this.uobs.hsalida=e.hsalida,this.uobs.msalida=e.msalida,this.uobs.url=e.url,this.uobs.estado=e.estado,this.uobs.idtipo=e.idtipo)})),this.clickModalObsEditar(!0)},clickModalDetalleObs(a){this.modalDetalleObs=a},clickModalObsEditar(a){this.modalObsEditar=a},clickModalImgEditar(a){this.modalImgEditar=a},moduloScc(a){this.$router.push({name:"ModuloSccView",params:{cifCiudadano:a}})},getUTipo(){"Entrada M."==this.uobs.tipo&&(this.uobs.horaEntrada="08:30"),"Salida M."==this.uobs.tipo&&(this.uobs.horaSalida="12:30"),"Entrada T."==this.uobs.tipo&&(this.uobs.horaEntrada="14:30"),"Salida T."==this.uobs.tipo&&(this.uobs.horaSalida="18:30"),"continuo"==this.uobs.tipo&&(this.uobs.horaEntrada="08:30",this.uobs.horaSalida="16:30"),"continuoingreso"==this.uobs.tipo&&(this.uobs.horaEntrada="08:30",this.uobs.horaSalida="16:30"),"asueto"==this.uobs.tipo&&(this.uobs.horaEntrada="08:30")},mostrarUHoraIngreso(){const a=["continuoingreso","Entrada M.","Entrada T.","horas","extraordinario","comision","permiso"];return a.includes(this.uobs.tipo)},mostrarUHoraSalida(){const a=["continuoingreso","continuo","Salida M.","Salida T."];return a.includes(this.uobs.tipo)},async downloadImg(a,e){const o=await(await fetch(a)).blob(),t=URL.createObjectURL(o);Object.assign(document.createElement("a"),{href:t,download:e}).click(),URL.revokeObjectURL(t)}}},j=o(1241);const P=(0,j.A)(q,[["render",x],["__scopeId","data-v-25905da4"]]);var X=P},3817:function(a,e,o){o.d(e,{A:function(){return r}});var t=o(6768);function i(a,e,o,i,s,l){const d=(0,t.g2)("CIcon"),r=(0,t.g2)("CWidgetStatsF"),n=(0,t.g2)("CCol"),u=(0,t.g2)("CRow");return(0,t.uX)(),(0,t.Wv)(u,null,{default:(0,t.k6)((()=>[(0,t.bF)(n,{xs:12},{default:(0,t.k6)((()=>[(0,t.bF)(r,{color:"dark",padding:!1,title:o.datos.nombre+" "+o.datos.apellido,value:"CIF : "+o.datos.cif},{icon:(0,t.k6)((()=>[(0,t.bF)(d,{icon:"cil-user",size:"xl"})])),_:1},8,["title","value"])])),_:1})])),_:1})}var s={name:"ComponenteNombres",props:["datos"]},l=o(1241);const d=(0,l.A)(s,[["render",i]]);var r=d}}]);
//# sourceMappingURL=385.6e023e7d.js.map