"use strict";(self["webpackChunkegovf"]=self["webpackChunkegovf"]||[]).push([[329],{7950:function(e,o,a){a.d(o,{A:function(){return s}});var r=a(4373),l=a(1660);const t=l.j6;class s{headersUsuario(e){r.A.defaults.headers.common["Authorization"]="Bearer "+e}getEgovf(e){return r.A.get(t+"ciudadano/getEgovf",{params:{cif:e}})}getListaCiudadano(){return r.A.get(t+"ciudadano/getListaCiudadano")}getListaCiudadanoPublico(){return r.A.get(t+"ciudadano/getListaCiudadanoPublico")}getListaEmpleado(){return r.A.get(t+"ciudadano/getListaEmpleado")}}},7525:function(e,o,a){a.d(o,{A:function(){return s}});var r=a(4373),l=a(1660);const t=l.j6;class s{headersUsuario(e){r.A.defaults.headers.common["Authorization"]="Bearer "+e}addPersona(e){var o=e.fecha.split("-"),a=o[2]+"/"+o[1]+"/"+o[0];const l={cif:0,ci:e.ci,complemento:e.complemento,nombre:e.nombre.charAt(0).toUpperCase()+e.nombre.slice(1),paterno:e.paterno.charAt(0).toUpperCase()+e.paterno.slice(1),materno:e.materno.charAt(0).toUpperCase()+e.materno.slice(1),fecha:a,sexo:e.sexo,cel:e.cel,correo:e.correo};return r.A.post(t+"persona/addPersona",l)}getListaCiudadanos(){return r.A.get(t+"listaPersona")}getListaPersonas(){return r.A.get(t+"listaPersonas")}getPersona(e){return r.A.get(t+"getPerfil",{params:{cif:e}})}}},329:function(e,o,a){a.r(o),a.d(o,{default:function(){return O}});var r=a(6768),l=a(4232),t=a(5130);const s=e=>((0,r.Qi)("data-v-32294a61"),e=e(),(0,r.jt)(),e),i={"aria-label":"breadcrumb"},n={class:"breadcrumb custom-breadcrumb"},u={class:"breadcrumb-item active","aria-current":"page"},d={class:"align-items-center"},c={class:"mb-0 fs-6 text-white"},p={class:"table-responsive"},b={id:"personaTabla",class:"table table-striped table-hover"},k=s((()=>(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",null,"ID"),(0,r.Lk)("th",null,"Foto"),(0,r.Lk)("th",null,"CIF"),(0,r.Lk)("th",null,"Datos"),(0,r.Lk)("th",null,"Contacto"),(0,r.Lk)("th",null,"Unidad"),(0,r.Lk)("th",null,"Operaciones")])],-1))),m={scope:"row"},h=s((()=>(0,r.Lk)("br",null,null,-1))),C=s((()=>(0,r.Lk)("br",null,null,-1))),f={class:"fontabla"},g={key:2,style:{color:"green"}},v={key:3,style:{color:"red"}},F=s((()=>(0,r.Lk)("option",null,"Seleccionar Region Expedida",-1))),_=s((()=>(0,r.Lk)("option",{value:"lp"},"La Paz",-1))),L=s((()=>(0,r.Lk)("option",{value:"sc"},"Santa Cruz",-1))),y=s((()=>(0,r.Lk)("option",{value:"cb"},"Cochabamba",-1))),x=s((()=>(0,r.Lk)("option",{value:"or"},"Oruro",-1))),V=s((()=>(0,r.Lk)("option",{value:"pt"},"Potosi",-1))),A=s((()=>(0,r.Lk)("option",{value:"tr"},"Tarija",-1))),E=s((()=>(0,r.Lk)("option",{value:"ch"},"Chuquisaca",-1))),W=s((()=>(0,r.Lk)("option",{value:"bn"},"Beni",-1))),I=s((()=>(0,r.Lk)("option",{value:"pd"},"Pando",-1))),w=s((()=>(0,r.Lk)("option",null,"Seleccionar Sexo",-1))),P=s((()=>(0,r.Lk)("option",{value:"1"},"Femenino",-1))),S=s((()=>(0,r.Lk)("option",{value:"2"},"Masculino",-1))),U={key:2,style:{color:"green"}},$={key:3,style:{color:"red"}},D={key:2,style:{color:"green"}},X={key:3,style:{color:"red"}};function M(e,o,a,s,M,z){const q=(0,r.g2)("CIcon"),T=(0,r.g2)("CCol"),B=(0,r.g2)("CDropdownToggle"),N=(0,r.g2)("CButton"),R=(0,r.g2)("CDropdownItem"),j=(0,r.g2)("CDropdownMenu"),K=(0,r.g2)("CDropdown"),G=(0,r.g2)("CRow"),O=(0,r.g2)("CCardHeader"),H=(0,r.g2)("CImage"),Q=(0,r.g2)("CCardBody"),J=(0,r.g2)("CCard"),Y=(0,r.g2)("CModalTitle"),Z=(0,r.g2)("CModalHeader"),ee=(0,r.g2)("CInputGroupText"),oe=(0,r.g2)("CFormInput"),ae=(0,r.g2)("CInputGroup"),re=(0,r.g2)("CFormSelect"),le=(0,r.g2)("CModalBody"),te=(0,r.g2)("CModalFooter"),se=(0,r.g2)("CForm"),ie=(0,r.g2)("CModal");return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.Lk)("nav",i,[(0,r.Lk)("ol",n,[(0,r.Lk)("li",u,(0,l.v_)(M.titulo)+" > ",1)])]),(0,r.bF)(G,null,{default:(0,r.k6)((()=>[(0,r.bF)(T,{xs:12},{default:(0,r.k6)((()=>[(0,r.bF)(J,null,{default:(0,r.k6)((()=>[(0,r.bF)(O,{class:"headercolor justify-content-between align-items-center"},{default:(0,r.k6)((()=>[(0,r.bF)(G,null,{default:(0,r.k6)((()=>[(0,r.bF)(T,{lg:6},{default:(0,r.k6)((()=>[(0,r.Lk)("div",d,[(0,r.bF)(q,{icon:"cil-list",size:"lg",class:"me-2 text-light"}),(0,r.Lk)("label",c,(0,l.v_)(M.titulo),1)])])),_:1}),(0,r.bF)(T,{lg:6,class:"text-end"},{default:(0,r.k6)((()=>[(0,r.bF)(K,{variant:"btn-group"},{default:(0,r.k6)((()=>[(0,r.bF)(B,{color:"dark",class:"font border-0",size:"sm"},{default:(0,r.k6)((()=>[(0,r.bF)(q,{icon:"cil-menu",color:"dark",class:"me-2 text-success"}),(0,r.eW)("Opciones ")])),_:1}),(0,r.bF)(j,null,{default:(0,r.k6)((()=>[(0,r.bF)(R,null,{default:(0,r.k6)((()=>[(0,r.bF)(N,{onClick:o[0]||(o[0]=e=>z.clickModalCiudadano(!0)),size:"sm"},{default:(0,r.k6)((()=>[(0,r.bF)(q,{icon:"cil-cloud-upload",size:"lg",class:"me-2"}),(0,r.eW)(" Agregar ")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,r.bF)(Q,null,{default:(0,r.k6)((()=>[(0,r.Lk)("div",p,[(0,r.Lk)("table",b,[k,(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(M.listaCiudadanos,(e=>((0,r.uX)(),(0,r.CE)("tr",{key:e.idPersona},[(0,r.Lk)("th",m,(0,l.v_)(e.idPersona),1),(0,r.Lk)("td",null,[(0,r.bF)(H,{src:"https://fhcevirtual.umsa.bo/egovf-img/imagenes/200/"+e.foto,width:"70",height:"70"},null,8,["src"])]),(0,r.Lk)("td",null,(0,l.v_)(e.cif),1),(0,r.Lk)("td",null,[(0,r.eW)((0,l.v_)(e.nombre)+" "+(0,l.v_)(e.paterno)+" "+(0,l.v_)(e.materno),1),h,(0,r.eW)(" "+(0,l.v_)(e.ci),1),C,(0,r.Lk)("label",f,(0,l.v_)(e.correo),1)]),(0,r.Lk)("td",null,(0,l.v_)(e.celular),1),(0,r.Lk)("td",null,(0,l.v_)(e.sigla),1),(0,r.Lk)("td",null,[(0,r.bF)(N,{class:"font",color:"success",onClick:o=>z.perfil(e.cif),size:"sm"},{default:(0,r.k6)((()=>[(0,r.bF)(q,{icon:"cil-user",class:"me-2"}),(0,r.eW)("Perfil")])),_:2},1032,["onClick"])])])))),128))])])])])),_:1})])),_:1})])),_:1})])),_:1}),(0,r.bF)(ie,{visible:M.modalCiudadano,onClose:o[19]||(o[19]=e=>z.clickModalCiudadano(!1))},{default:(0,r.k6)((()=>[(0,r.bF)(se,{onSubmit:o[18]||(o[18]=(0,t.D$)((e=>z.registrarCiudadano()),["prevent"]))},{default:(0,r.k6)((()=>[(0,r.bF)(Z,{class:"headercolor",dismiss:"",onClose:o[1]||(o[1]=e=>z.clickModalCiudadano(!1))},{default:(0,r.k6)((()=>[(0,r.bF)(Y,null,{default:(0,r.k6)((()=>[(0,r.Lk)("h6",null,[(0,r.bF)(q,{icon:"cil-user",size:"sm"}),(0,r.eW)(" Agregar Nuevo Ciudadano")])])),_:1})])),_:1}),(0,r.bF)(le,null,{default:(0,r.k6)((()=>[(0,r.bF)(ae,{class:"mb-3"},{default:(0,r.k6)((()=>[(0,r.bF)(ee,{as:"label"},{default:(0,r.k6)((()=>[(0,r.eW)("Celulda de Identidad ")])),_:1}),(0,r.bF)(oe,{type:"text",modelValue:M.persona.ci,"onUpdate:modelValue":o[2]||(o[2]=e=>M.persona.ci=e),valid:M.errorpersona.ci,required:"true",placeholder:"Cedula de Identidad",onInput:o[3]||(o[3]=e=>z.validarCI()),onKeyup:o[4]||(o[4]=e=>z.botonesFuncion())},null,8,["modelValue","valid"]),M.errorpersona.ci?((0,r.uX)(),(0,r.Wv)(ee,{key:0},{default:(0,r.k6)((()=>[(0,r.bF)(q,{icon:"cil-check",class:"text-success"})])),_:1})):((0,r.uX)(),(0,r.Wv)(ee,{key:1},{default:(0,r.k6)((()=>[(0,r.bF)(q,{icon:"cil-x",class:"text-danger"})])),_:1})),M.errorpersona.ci?((0,r.uX)(),(0,r.CE)("label",g,(0,l.v_)(M.errorCI),1)):((0,r.uX)(),(0,r.CE)("label",v,(0,l.v_)(M.errorCI),1))])),_:1}),(0,r.bF)(ae,{class:"mb-3"},{default:(0,r.k6)((()=>[(0,r.bF)(ee,{as:"label"},{default:(0,r.k6)((()=>[(0,r.eW)("Region Exp")])),_:1}),(0,r.bF)(re,{modelValue:M.persona.complemento,"onUpdate:modelValue":o[5]||(o[5]=e=>M.persona.complemento=e),required:"true"},{default:(0,r.k6)((()=>[F,_,L,y,x,V,A,E,W,I])),_:1},8,["modelValue"])])),_:1}),(0,r.bF)(ae,{class:"mb-3"},{default:(0,r.k6)((()=>[(0,r.bF)(ee,{as:"label"},{default:(0,r.k6)((()=>[(0,r.eW)("Nombres ")])),_:1}),(0,r.bF)(oe,{type:"text",modelValue:M.persona.nombre,"onUpdate:modelValue":o[6]||(o[6]=e=>M.persona.nombre=e),placeholder:"Nombres",required:"true"},null,8,["modelValue"])])),_:1}),(0,r.bF)(ae,{class:"mb-3"},{default:(0,r.k6)((()=>[(0,r.bF)(ee,{as:"label"},{default:(0,r.k6)((()=>[(0,r.eW)("A. Paterno ")])),_:1}),(0,r.bF)(oe,{type:"text",modelValue:M.persona.paterno,"onUpdate:modelValue":o[7]||(o[7]=e=>M.persona.paterno=e),placeholder:"Apellido Paterno"},null,8,["modelValue"])])),_:1}),(0,r.bF)(ae,{class:"mb-3"},{default:(0,r.k6)((()=>[(0,r.bF)(ee,{as:"label"},{default:(0,r.k6)((()=>[(0,r.eW)("A. Materno ")])),_:1}),(0,r.bF)(oe,{type:"text",modelValue:M.persona.materno,"onUpdate:modelValue":o[8]||(o[8]=e=>M.persona.materno=e),placeholder:"Apellido Materno"},null,8,["modelValue"])])),_:1}),(0,r.bF)(ae,{class:"mb-3"},{default:(0,r.k6)((()=>[(0,r.bF)(ee,{as:"label"},{default:(0,r.k6)((()=>[(0,r.eW)("Fecha de Nacimiento ")])),_:1}),(0,r.bF)(oe,{type:"date",modelValue:M.persona.fecha,"onUpdate:modelValue":o[9]||(o[9]=e=>M.persona.fecha=e),required:"true"},null,8,["modelValue"])])),_:1}),(0,r.bF)(ae,{class:"mb-3"},{default:(0,r.k6)((()=>[(0,r.bF)(ee,{as:"label"},{default:(0,r.k6)((()=>[(0,r.eW)("Sexo")])),_:1}),(0,r.bF)(re,{modelValue:M.persona.sexo,"onUpdate:modelValue":o[10]||(o[10]=e=>M.persona.sexo=e),required:"true"},{default:(0,r.k6)((()=>[w,P,S])),_:1},8,["modelValue"])])),_:1}),(0,r.bF)(ae,{class:"mb-3"},{default:(0,r.k6)((()=>[(0,r.bF)(ee,{as:"label"},{default:(0,r.k6)((()=>[(0,r.eW)("Celular ")])),_:1}),(0,r.bF)(oe,{type:"text",valid:M.errorpersona.cel,modelValue:M.persona.cel,"onUpdate:modelValue":o[11]||(o[11]=e=>M.persona.cel=e),placeholder:"Numero de Celular",onInput:o[12]||(o[12]=e=>z.validarCelular()),onKeyup:o[13]||(o[13]=e=>z.botonesFuncion()),required:"true"},null,8,["valid","modelValue"]),M.errorpersona.cel?((0,r.uX)(),(0,r.Wv)(ee,{key:0},{default:(0,r.k6)((()=>[(0,r.bF)(q,{icon:"cil-check",class:"text-success"})])),_:1})):((0,r.uX)(),(0,r.Wv)(ee,{key:1},{default:(0,r.k6)((()=>[(0,r.bF)(q,{icon:"cil-x",class:"text-danger"})])),_:1})),M.errorpersona.cel?((0,r.uX)(),(0,r.CE)("label",U,(0,l.v_)(M.errorCelular),1)):((0,r.uX)(),(0,r.CE)("label",$,(0,l.v_)(M.errorCelular),1))])),_:1}),(0,r.bF)(ae,{class:"mb-3"},{default:(0,r.k6)((()=>[(0,r.bF)(ee,{as:"label"},{default:(0,r.k6)((()=>[(0,r.eW)("E-mail ")])),_:1}),(0,r.bF)(oe,{type:"text",valid:M.errorpersona.correo,modelValue:M.persona.correo,"onUpdate:modelValue":o[14]||(o[14]=e=>M.persona.correo=e),placeholder:"Correo Electronico",onInput:o[15]||(o[15]=e=>z.validarCorreo()),onKeyup:o[16]||(o[16]=e=>z.botonesFuncion()),required:"true"},null,8,["valid","modelValue"]),M.errorpersona.correo?((0,r.uX)(),(0,r.Wv)(ee,{key:0},{default:(0,r.k6)((()=>[(0,r.bF)(q,{icon:"cil-check",class:"text-success"})])),_:1})):((0,r.uX)(),(0,r.Wv)(ee,{key:1},{default:(0,r.k6)((()=>[(0,r.bF)(q,{icon:"cil-x",class:"text-danger"})])),_:1})),M.errorpersona.correo?((0,r.uX)(),(0,r.CE)("label",D,(0,l.v_)(M.errorCorreo),1)):((0,r.uX)(),(0,r.CE)("label",X,(0,l.v_)(M.errorCorreo),1))])),_:1})])),_:1}),(0,r.bF)(te,null,{default:(0,r.k6)((()=>[(0,r.bF)(N,{onClick:o[17]||(o[17]=e=>z.clickModalCiudadano(!1)),color:"danger",class:"font",size:"sm"},{default:(0,r.k6)((()=>[(0,r.bF)(q,{icon:"cil-x",class:"me-2"}),(0,r.eW)("Cancelar")])),_:1}),M.botones?((0,r.uX)(),(0,r.Wv)(N,{key:0,type:"submit",class:"font",size:"sm",color:"success"},{default:(0,r.k6)((()=>[(0,r.bF)(q,{icon:"cil-cloud-upload",class:"me-2"}),(0,r.eW)("Agregar")])),_:1})):(0,r.Q3)("",!0)])),_:1})])),_:1})])),_:1},8,["visible"])],64)}a(4114);var z=a(7525),q=a(7950),T=a(903),B=a(9995),N=a(6587),R=a.n(N);T.A.use(B.A);var j={name:"ListaView",components:{},data(){return{titulo:"Lista de Ciudadanos",modalCiudadano:!1,personaService:null,egovfService:null,listaCiudadanos:[],registro:[],listaUnidad:[],botones:!1,usuario:{token:"",cif:"",correo:"",celular:"",pass:"",unidad:"",sigla:"",foto:""},persona:{cif:0,ci:"",complemento:"Seleccionar Region Expedida",nombre:"",paterno:"",materno:"",fecha:"",sexo:"Seleccionar Sexo",cel:"",correo:""},errorCI:"",errorCorreo:"",errorCelular:"",errorpersona:{ci:!1,complemento:!1,cel:!1,correo:!1}}},beforeCreate(){null==this.$cookies.get("cif")&&this.$router.push("/")},created(){this.egovfService=new q.A,this.personaService=new z.A},mounted(){this.getDatos(),this.getListarCiudadano()},methods:{tabla(){this.$nextTick((()=>{R()("#personaTabla").DataTable()}))},getDatos(){null!=this.$cookies.get("cif")&&(this.usuario.token=this.$cookies.get("token"),this.usuario.cif=this.$cookies.get("cif"),this.usuario.correo=this.$cookies.get("correo"),this.usuario.celular=this.$cookies.get("celular"),this.usuario.pass=this.$cookies.get("pass"),this.usuario.unidad=this.$cookies.get("unidad"),this.usuario.sigla=this.$cookies.get("sigla"),this.usuario.foto=this.$cookies.get("foto"),this.egovfService.headersUsuario(this.usuario.token),this.personaService.headersUsuario(this.usuario.token))},async getListarCiudadano(){await this.egovfService.getListaCiudadano().then((e=>{this.listaCiudadanos=e.data,this.tabla()}))},perfil(e){this.$router.push({name:"PerfilCiudadanoView",params:{cifCiudadano:e}})},registrarCiudadano(){this.personaFalse(),this.$swal.fire({title:"Desea Registrar al Ciudadano",icon:"info",showDenyButton:!0,confirmButtonText:"Registrar",denyButtonText:"Cancelar"}).then((e=>{e.isConfirmed?this.personaService.addPersona(this.persona).then((e=>{201==e.status?this.$swal.fire("Datos Guardados Corectamente","","success").then((e=>{e&&location.reload()})):this.$swal.fire("Los Datos no fueron Guardados Error"+e.status,"","error")})):e.isDenied&&this.$swal.fire("Datos Cancelados","","info")}))},validarCI(){const e=this.listaCiudadanos.find((e=>e.ci_com.toString()===this.persona.ci));e?(this.errorCI="La Cédula de identidad ya Existe, revise en el sistema.",this.errorpersona.ci=!1):(this.errorCI="La Cédula de Identidad es valida",this.errorpersona.ci=!0)},validarCelular(){const e=this.listaCiudadanos.find((e=>e.celular===this.persona.cel));e?(this.errorCelular="El Numero de Celular ya existe, verifique su estado en el sistema",this.errorpersona.cel=!1):(this.errorCelular="El Numero de Celular del Ciudadano es valido",this.errorpersona.cel=!0)},validarCorreo(){const e=this.listaCiudadanos.find((e=>e.correo===this.persona.correo));e?(this.errorCorreo="El correo Electronico ya existe ingrese otro o verifique su existencia en el sistema.",this.errorpersona.correo=!1):(this.errorCorreo="El Correo Electronico del Ciudadano es Valido ",this.errorpersona.correo=!0)},personaFalse(){this.errorpersona.ci=!1,this.errorpersona.complemento=!1,this.errorpersona.cel=!1,this.errorpersona.correo=!1},clickModalCiudadano(e){this.modalCiudadano=e},botonesFuncion(){this.errorpersona.ci&&this.errorpersona.cel&&this.errorpersona.correo?this.botones=!0:this.botones=!1}}},K=a(1241);const G=(0,K.A)(j,[["render",M],["__scopeId","data-v-32294a61"]]);var O=G}}]);
//# sourceMappingURL=329.b4821eee.js.map