"use strict";(self["webpackChunkegovf"]=self["webpackChunkegovf"]||[]).push([[172],{7590:function(e,o,s){s.d(o,{A:function(){return l}});var a=s(4373),i=s(1660);const t=i.fw;class l{getPerfil(e){return a.A.get(t+"biometrico/getPerfil",{params:{cif:e}})}getListarCifCero(){return a.A.get(t+"biometrico/listarCifCero")}getHorario(e,o){return a.A.get(t+"horario/getHorario",{params:{gestion:e,cif:o}})}updateBiometrico(e){return a.A.put(t+"biometrico/updateBiometrico",e)}getAvisoAll(){return a.A.get(t+"aviso/getAvisoAll")}getAviso(){return a.A.get(t+"aviso/getAviso")}getObsUsuario(e,o,s){return a.A.get(t+"obs/getObsUsuario",{params:{cif:e,gestion:o,mes:s}})}addObsEmpleado(e){const o={cif:e.cif,uidobs:e.uidobs,fechainicio:e.fechainicio,fechafin:e.fechafin,gestion:e.fechainicio.substring(0,4),mes:e.fechainicio.substring(5,7),di:e.fechainicio.substring(8,10),df:e.fechafin.substring(8,10),detalle:e.detalle,imagen:e.imagen,tipo:e.tipo,hora:e.hora,h:e.hora.substring(0,2),m:e.hora.substring(3,5),url:e.url,estado:0,tipoId:0};return a.A.post(t+"obs/addObs",o)}updateObsEmpleado(e){const o={id:e.id,cif:e.cif,uidobs:e.uidobs,fechainicio:e.fechainicio,fechafin:e.fechafin,gestion:e.fechainicio.substring(0,4),mes:e.fechainicio.substring(5,7),di:e.fechainicio.substring(8,10),df:e.fechafin.substring(8,10),detalle:e.detalle,imagen:e.imagen,tipo:e.tipo,hora:e.hora,h:e.hora.substring(0,2),m:e.hora.substring(3,5),url:e.url,estado:e.estado,tipoId:0};return a.A.put(t+"obs/updateObs",o)}getListaHorario(e,o){return a.A.get(t+"horario/getListaHorario",{params:{cif:e,gestion:o}})}getReporteMes(e){return a.A.get(t+"marcado/reporteMes",{params:{cif:e.cif,gestion:e.gestion,mes:e.mes,di:e.di,df:e.df}})}getReporteMesDia(e){return a.A.get(t+"marcado/reporteMesDia",{params:{cif:e.cif,gestion:e.gestion,mes:e.mes,di:e.di,df:e.df}})}addHorario(e){const o={cif:e.cif,fecha:e.fecha,salida:e.salida,tipo:e.tipo,lem:e.lem,lsm:e.lsm,let:e.let,lst:e.lst,mem:e.mem,msm:e.msm,met:e.met,mst:e.mst,miem:e.miem,mism:e.mism,miet:e.miet,mist:e.mist,jem:e.jem,jsm:e.jsm,jet:e.jet,jst:e.jst,vem:e.vem,vsm:e.vsm,vet:e.vet,vst:e.vst,sem:e.sem,ssm:e.ssm,set:e.set,sst:e.sst,dem:e.dem,dsm:e.dsm,det:e.det,dst:e.dst};return a.A.post(t+"horario/addHorario",o)}addObs(e){const o={cif:e.cif,uidobs:e.uidobs,fechainicio:e.fechainicio,fechafin:e.fechafin,gestion:e.fechainicio.substring(0,4),mes:e.fechainicio.substring(5,7),di:e.fechainicio.substring(8,10),df:e.fechafin.substring(8,10),detalle:e.detalle,imagen:e.imagen,tipo:e.tipo,hora:e.hora,h:e.hora.substring(0,2),m:e.hora.substring(3,5),url:e.url,estado:1,tipoId:0};return a.A.post(t+"obs/addObs",o)}updateObs(e){const o={id:e.id,cif:e.cif,uidobs:e.uidobs,fechainicio:e.fechainicio,fechafin:e.fechafin,gestion:e.gestion,mes:e.mes,di:e.di,df:e.df,detalle:e.detalle,imagen:e.imagen,tipo:e.tipo,hora:e.hora,h:e.h,m:e.m,url:e.url,estado:e.estado,tipoId:e.tipoId};return a.A.put(t+"obs/updateObs",o)}getListaObs(e){return a.A.get(t+"obs/getListaObs",{params:{gestion:e}})}addObsAll(e){const o={id:0,cif:e.cif,sexo:e.sexo,uidobs:e.uidobs,fechainicio:e.fechainicio,fechafin:e.fechafin,gestion:e.fechainicio.substring(0,4),mes:e.fechainicio.substring(5,7),di:e.fechainicio.substring(8,10),df:e.fechafin.substring(8,10),detalle:e.detalle,imagen:e.imagen,tipo:e.tipo,hora:e.hora,h:e.hora.substring(0,2),m:e.hora.substring(3,5),url:e.url,estado:1};return a.A.post(t+"obs/addObsAll",o)}addAviso(e){const o={titulo:e.titulo,detalle:e.detalle,icon:e.icon,estado:1};return a.A.post(t+"aviso/addAviso",o)}updateAviso(e){const o={id:e.id,titulo:e.titulo,detalle:e.detalle,icon:e.icon,estado:e.estado};return a.A.put(t+"aviso/updateAviso",o)}getRecord(e){return a.A.get(t+"marcado/reporteTotal",{params:{gestion:e.gestion,mes:e.mes,tipo:e.tipo}})}getListarBiometrico(){return a.A.get(t+"biometrico/listarBiometrico")}getLBiometricoTipo(e){return a.A.get(t+"biometrico/listarBiometricoTipo",{params:{tipo:e}})}updateBiometricoTipo(e,o){var s=0;1==o&&(s=e.tipoempleado_id);const i={id:0,_01user_id:0,_02nombre:"",_03cif:e.cif,_04estado:0,_05horario_id:0,_06lugar:"",_07id_tipo:s,_08detalle:"",_09sexo:0};return a.A.put(t+"biometrico/updateBiometricoTipo",i)}getObs(e,o,s){return a.A.get(t+"obs/getObs",{params:{cif:e,gestion:o,mes:s}})}estadoBiometrico(e){return console.log(e),a.A.put(t+"biometrico/estadoBiometrico",e)}updateTipo(e,o){return a.A.put(t+"biometrico/updateTipo",{params:{cif:e,tipo:o}})}getListaEquipo(){return a.A.get(t+"equipo/listar")}addEquipo(e){return a.A.post(t+"equipo/addEquipo",e)}updateEquipo(e){return a.A.put(t+"equipo/updateEquipo",e)}}},7950:function(e,o,s){s.d(o,{A:function(){return l}});var a=s(4373),i=s(1660);const t=i.j6;class l{headersUsuario(e){a.A.defaults.headers.common["Authorization"]="Bearer "+e}getEgovf(e){return a.A.get(t+"ciudadano/getEgovf",{params:{cif:e}})}getListaCiudadano(){return a.A.get(t+"ciudadano/getListaCiudadano")}getListaEmpleado(){return a.A.get(t+"ciudadano/getListaEmpleado")}}},7160:function(e,o,s){s.d(o,{A:function(){return l}});var a=s(4373),i=s(1660);const t=i.H4;class l{getListarCifCero(){return a.A.get("biometrico/listarCifCero")}addImagen(e){return a.A.post(t+"upload.php",e)}getUrl(){return t+"imagenes/"}getImage(e){return a.A.get(e,{headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"*"}})}}},2172:function(e,o,s){s.r(o),s.d(o,{default:function(){return qe}});var a=s(6768),i=s(4232),t=s(5130);const l=(0,a.Lk)("br",null,null,-1),r=["value"],c=["value"],n=(0,a.Lk)("br",null,null,-1),d={class:"table"},u=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("th",null,"#"),(0,a.Lk)("th",null,"UidObs"),(0,a.Lk)("th",null,"Tipo"),(0,a.Lk)("th",null,"Estado"),(0,a.Lk)("th",null,"Opciones")])],-1),b=(0,a.Lk)("tfoot",null,[(0,a.Lk)("tr")],-1),f=(0,a.Lk)("h5",null,"Detalles de la Observacion",-1),m={class:"lista"},h={class:"lista"},p={class:"lista"},g={class:"lista"},k={class:"lista"},v={class:"lista"},L={class:"lista"},C=["src"],O=(0,a.Lk)("h5",null,"Registrar una Observacion de Asistencia",-1),A={class:"mb-3 row"},F=(0,a.Lk)("label",{for:"datos",class:"col-4 col-form-label"},"UID - OBS",-1),_={class:"col-8"},D={class:"mb-3 row"},w=(0,a.Lk)("label",{for:"datos",class:"col-4 col-form-label"},"Fecha de Inicio",-1),E={class:"col-8"},y={class:"mb-3 row"},M=(0,a.Lk)("label",{for:"datos",class:"col-4 col-form-label"},"Fecha Fin",-1),T={class:"col-8"},U={class:"mb-3 row"},S=(0,a.Lk)("label",{for:"datos",class:"col-4 col-form-label"},"Detalle",-1),$={class:"col-8"},B={class:"mb-3 row"},q=(0,a.Lk)("label",{for:"tipo",class:"col-4 col-form-label"},"Tipo",-1),I={class:"col-8"},x=(0,a.Lk)("option",{value:"Entrada M."},"Entrada Ma単ana",-1),W=(0,a.Lk)("option",{value:"Salida M."},"Salida Ma単ana",-1),j=(0,a.Lk)("option",{value:"Entrada T."},"Entrada Tarde",-1),R=(0,a.Lk)("option",{value:"Salida T."},"Salida Tarde",-1),X=(0,a.Lk)("option",{value:"continuo"},"Continuo",-1),H=(0,a.Lk)("option",{value:"asueto"},"Asueto",-1),V=[x,W,j,R,X,H],G={key:0,class:"mb-3 row"},J=(0,a.Lk)("label",{for:"datos",class:"col-4 col-form-label"},"Hora",-1),z={class:"col-8"},Q={class:"mb-3 row"},N=(0,a.Lk)("label",{for:"archivo",class:"col-4 col-form-label"},"Documento",-1),K={class:"col-8"},P={class:"btn btn-success font"},Y=(0,a.Lk)("h5",null,"Actualizar la Observacion de Asistencia",-1),Z={class:"mb-3 row"},ee=(0,a.Lk)("label",{for:"datos",class:"col-4 col-form-label"},"UID - OBS",-1),oe={class:"col-8"},se={class:"mb-3 row"},ae=(0,a.Lk)("label",{for:"datos",class:"col-4 col-form-label"},"Fecha de Inicio",-1),ie={class:"col-8"},te={class:"mb-3 row"},le=(0,a.Lk)("label",{for:"datos",class:"col-4 col-form-label"},"Fecha Fin",-1),re={class:"col-8"},ce={class:"mb-3 row"},ne=(0,a.Lk)("label",{for:"datos",class:"col-4 col-form-label"},"Detalle",-1),de={class:"col-8"},ue={class:"mb-3 row"},be=(0,a.Lk)("label",{for:"tipo",class:"col-4 col-form-label"},"Tipo",-1),fe={class:"col-8"},me=(0,a.Lk)("option",{value:"Entrada M."},"Entrada Ma単ana",-1),he=(0,a.Lk)("option",{value:"Salida M."},"Salida Ma単ana",-1),pe=(0,a.Lk)("option",{value:"Entrada T."},"Entrada Tarde",-1),ge=(0,a.Lk)("option",{value:"Salida T."},"Salida Tarde",-1),ke=(0,a.Lk)("option",{value:"continuo"},"Continuo",-1),ve=(0,a.Lk)("option",{value:"asueto"},"Asueto",-1),Le=[me,he,pe,ge,ke,ve],Ce={key:0,class:"mb-3 row"},Oe=(0,a.Lk)("label",{for:"datos",class:"col-4 col-form-label"},"Hora",-1),Ae={class:"col-8"},Fe={class:"mb-3 row"},_e=(0,a.Lk)("label",{for:"archivo",class:"col-4 col-form-label"},"Documento",-1),De={class:"col-8"},we={class:"btn btn-success font"};function Ee(e,o,s,x,W,j){const R=(0,a.g2)("CCol"),X=(0,a.g2)("CIcon"),H=(0,a.g2)("CButton"),me=(0,a.g2)("CRow"),he=(0,a.g2)("CCardHeader"),pe=(0,a.g2)("CCardBody"),ge=(0,a.g2)("CBadge"),ke=(0,a.g2)("CButtonGroup"),ve=(0,a.g2)("CCardFooter"),Ee=(0,a.g2)("CCard"),ye=(0,a.g2)("CModalTitle"),Me=(0,a.g2)("CModalHeader"),Te=(0,a.g2)("ComponenteNombres"),Ue=(0,a.g2)("CAlert"),Se=(0,a.g2)("CModalBody"),$e=(0,a.g2)("CModalFooter"),Be=(0,a.g2)("CModal");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(me,null,{default:(0,a.k6)((()=>[(0,a.bF)(R,{lg:12},{default:(0,a.k6)((()=>[l,(0,a.bF)(Ee,null,{default:(0,a.k6)((()=>[(0,a.bF)(he,{class:"headercolor"},{default:(0,a.k6)((()=>[(0,a.bF)(me,null,{default:(0,a.k6)((()=>[(0,a.bF)(R,{lg:6},{default:(0,a.k6)((()=>[(0,a.eW)("Observaciones")])),_:1}),(0,a.bF)(R,{lg:6,class:"text-end"},{default:(0,a.k6)((()=>[(0,a.bF)(H,{color:"success",class:"font",size:"sm",onClick:o[0]||(o[0]=e=>j.clickModalObs(!0))},{default:(0,a.k6)((()=>[(0,a.bF)(X,{icon:"cil-cloud-upload",class:"me-2"}),(0,a.eW)("Agregar Observaciones")])),_:1})])),_:1})])),_:1})])),_:1}),(0,a.bF)(pe,null,{default:(0,a.k6)((()=>[(0,a.bF)(me,null,{default:(0,a.k6)((()=>[(0,a.bF)(R,{lg:2},{default:(0,a.k6)((()=>[(0,a.eW)("Gestion :")])),_:1}),(0,a.bF)(R,{lg:2},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":o[1]||(o[1]=e=>W.obsgestion=e),class:"form-control"},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(W.listaGestion,(e=>((0,a.uX)(),(0,a.CE)("option",{key:e,value:e},(0,i.v_)(e),9,r)))),128))],512),[[t.u1,W.obsgestion]])])),_:1}),(0,a.bF)(R,{lg:2},{default:(0,a.k6)((()=>[(0,a.eW)("Mes :")])),_:1}),(0,a.bF)(R,{lg:2},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":o[2]||(o[2]=e=>W.obsmes=e),class:"form-control"},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(W.listaMes,(e=>((0,a.uX)(),(0,a.CE)("option",{key:e,value:e.m},(0,i.v_)(e.mes),9,c)))),128))],512),[[t.u1,W.obsmes]]),n])),_:1}),(0,a.bF)(R,{lg:4,class:"text-center"},{default:(0,a.k6)((()=>[(0,a.bF)(H,{color:"success",class:"font",size:"sm",onClick:o[3]||(o[3]=e=>j.getObsUsuario())},{default:(0,a.k6)((()=>[(0,a.bF)(X,{icon:"cil-featured-playlist"}),(0,a.eW)(" Cargar Observaciones")])),_:1})])),_:1})])),_:1})])),_:1}),(0,a.bF)(ve,{class:"table-responsive"},{default:(0,a.k6)((()=>[(0,a.Lk)("table",d,[u,(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(W.listaObs,(e=>((0,a.uX)(),(0,a.CE)("tr",{key:e.id},[(0,a.Lk)("td",null,(0,i.v_)(e.id),1),(0,a.Lk)("td",null,(0,i.v_)(e.uidobs),1),(0,a.Lk)("td",null,(0,i.v_)(e.tipo),1),(0,a.Lk)("td",null,[1===e.estado?((0,a.uX)(),(0,a.Wv)(ge,{key:0,color:"success"},{default:(0,a.k6)((()=>[(0,a.eW)("Aprobado")])),_:1})):(0,a.Q3)("",!0),0===e.estado?((0,a.uX)(),(0,a.Wv)(ge,{key:1,color:"warning"},{default:(0,a.k6)((()=>[(0,a.eW)("En Espera")])),_:1})):(0,a.Q3)("",!0)]),(0,a.Lk)("td",null,[(0,a.bF)(ke,{role:"group"},{default:(0,a.k6)((()=>[(0,a.bF)(H,{color:"success",class:"font",size:"sm",onClick:o=>j.getObsDetalle(e.id)},{default:(0,a.k6)((()=>[(0,a.bF)(X,{icon:"cil-featured-playlist"})])),_:2},1032,["onClick"]),0==e.estado?((0,a.uX)(),(0,a.Wv)(H,{key:0,color:"warning",class:"font",size:"sm",onClick:o=>j.setObs(e.id)},{default:(0,a.k6)((()=>[(0,a.bF)(X,{icon:"cil-pencil"})])),_:2},1032,["onClick"])):(0,a.Q3)("",!0),0==e.estado?((0,a.uX)(),(0,a.Wv)(H,{key:1,color:"danger",class:"font",size:"sm",onClick:o=>j.deleteObs(e.id)},{default:(0,a.k6)((()=>[(0,a.bF)(X,{icon:"cil-trash"})])),_:2},1032,["onClick"])):(0,a.Q3)("",!0)])),_:2},1024)])])))),128))]),b])])),_:1})])),_:1})])),_:1})])),_:1}),(0,a.bF)(Be,{visible:W.modalDetalleObs,onClose:o[7]||(o[7]=e=>j.clickModalDetalleObs(!1))},{default:(0,a.k6)((()=>[(0,a.bF)(Me,{class:"headercolor",dismiss:"",onClose:o[4]||(o[4]=e=>j.clickModalDetalleObs(!1))},{default:(0,a.k6)((()=>[(0,a.bF)(ye,null,{default:(0,a.k6)((()=>[f])),_:1})])),_:1}),(0,a.bF)(Se,null,{default:(0,a.k6)((()=>[(0,a.bF)(Te,{datos:W.datos},null,8,["datos"]),(0,a.bF)(me,null,{default:(0,a.k6)((()=>[(0,a.bF)(R,{lg:12},{default:(0,a.k6)((()=>[(0,a.Lk)("ul",null,[(0,a.Lk)("li",m,"ID : "+(0,i.v_)(W.obsDetalle.id),1),(0,a.Lk)("li",h,"UID : "+(0,i.v_)(W.obsDetalle.uidobs),1),(0,a.Lk)("li",p,"Fecha Inicio : "+(0,i.v_)(W.obsDetalle.fechainicio),1),(0,a.Lk)("li",g,"Fecha Fin: "+(0,i.v_)(W.obsDetalle.fechafin),1),(0,a.Lk)("li",k,"Detalle: "+(0,i.v_)(W.obsDetalle.detalle),1),(0,a.Lk)("li",v,"Tipo de Obs. : "+(0,i.v_)(W.obsDetalle.tipo),1),(0,a.Lk)("li",L,"Hora : "+(0,i.v_)(W.obsDetalle.hora),1)]),1===W.obsDetalle.estado?((0,a.uX)(),(0,a.Wv)(Ue,{key:0,color:"success"},{default:(0,a.k6)((()=>[(0,a.eW)("Aprobado")])),_:1})):(0,a.Q3)("",!0),0===W.obsDetalle.estado?((0,a.uX)(),(0,a.Wv)(Ue,{key:1,color:"warning"},{default:(0,a.k6)((()=>[(0,a.eW)("En Espera")])),_:1})):(0,a.Q3)("",!0)])),_:1}),(0,a.bF)(R,null,{default:(0,a.k6)((()=>[(0,a.Lk)("img",{src:W.obsDetalle.url,alt:"",class:"img-fluid"},null,8,C)])),_:1})])),_:1})])),_:1}),(0,a.bF)($e,null,{default:(0,a.k6)((()=>[(0,a.bF)(H,{onClick:o[5]||(o[5]=e=>j.clickModalDetalleObs(!1)),color:"danger",class:"font"},{default:(0,a.k6)((()=>[(0,a.bF)(X,{icon:"cil-x",class:"me-2"}),(0,a.eW)("Cancelar")])),_:1}),(0,a.bF)(H,{onClick:o[6]||(o[6]=e=>j.downloadImg(W.obsDetalle.url,W.obsDetalle.imagen)),color:"success",class:"font"},{default:(0,a.k6)((()=>[(0,a.bF)(X,{icon:"cil-cloud-download",class:"me-2"}),(0,a.eW)("Descargar Documento")])),_:1})])),_:1})])),_:1},8,["visible"]),(0,a.bF)(Be,{visible:W.modalObs,onClose:o[19]||(o[19]=e=>j.clickModalObs(!1))},{default:(0,a.k6)((()=>[(0,a.Lk)("form",{onSubmit:o[18]||(o[18]=(0,t.D$)((e=>j.addObs()),["prevent"])),enctype:"multipart/form-data"},[(0,a.bF)(Me,{class:"headercolor text-center",dismiss:"",onClose:o[8]||(o[8]=e=>j.clickModalObs(!1))},{default:(0,a.k6)((()=>[(0,a.bF)(ye,null,{default:(0,a.k6)((()=>[O])),_:1})])),_:1}),(0,a.bF)(Se,null,{default:(0,a.k6)((()=>[(0,a.bF)(Te,{datos:W.datos},null,8,["datos"]),(0,a.Lk)("div",A,[F,(0,a.Lk)("div",_,[(0,a.bo)((0,a.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":o[9]||(o[9]=e=>W.obs.uidobs=e),required:"true",placeholder:"Cite u Hoja de Ruta"},null,512),[[t.Jo,W.obs.uidobs]])])]),(0,a.Lk)("div",D,[w,(0,a.Lk)("div",E,[(0,a.bo)((0,a.Lk)("input",{type:"date",class:"form-control","onUpdate:modelValue":o[10]||(o[10]=e=>W.obs.fechainicio=e),required:"true"},null,512),[[t.Jo,W.obs.fechainicio]])])]),(0,a.Lk)("div",y,[M,(0,a.Lk)("div",T,[(0,a.bo)((0,a.Lk)("input",{type:"date",class:"form-control","onUpdate:modelValue":o[11]||(o[11]=e=>W.obs.fechafin=e),required:"true"},null,512),[[t.Jo,W.obs.fechafin]])])]),(0,a.Lk)("div",U,[S,(0,a.Lk)("div",$,[(0,a.bo)((0,a.Lk)("textarea",{class:"form-control","onUpdate:modelValue":o[12]||(o[12]=e=>W.obs.detalle=e),required:"true"},null,512),[[t.Jo,W.obs.detalle]])])]),(0,a.Lk)("div",B,[q,(0,a.Lk)("div",I,[(0,a.bo)((0,a.Lk)("select",{class:"form-control","onUpdate:modelValue":o[13]||(o[13]=e=>W.obs.tipo=e),required:"true",onChange:o[14]||(o[14]=e=>j.getTipo())},V,544),[[t.u1,W.obs.tipo]])])]),"asueto"!=W.obs.tipo?((0,a.uX)(),(0,a.CE)("div",G,[J,(0,a.Lk)("div",z,[(0,a.bo)((0,a.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":o[15]||(o[15]=e=>W.obs.hora=e)},null,512),[[t.Jo,W.obs.hora]])])])):(0,a.Q3)("",!0),(0,a.Lk)("div",Q,[N,(0,a.Lk)("div",K,[(0,a.Lk)("input",{type:"file",ref:"file",class:"form-control",accept:"image/png,image/jpeg",onChange:o[16]||(o[16]=e=>j.selectFile()),required:"true"},null,544)])])])),_:1}),(0,a.bF)($e,null,{default:(0,a.k6)((()=>[(0,a.bF)(H,{onClick:o[17]||(o[17]=e=>j.clickModalObs(!1)),color:"danger",class:"font"},{default:(0,a.k6)((()=>[(0,a.bF)(X,{icon:"cil-x",class:"me-2"}),(0,a.eW)("Cancelar")])),_:1}),(0,a.Lk)("button",P,[(0,a.bF)(X,{icon:"cil-check-alt",class:"me-2"}),(0,a.eW)(" Agregar Observacion")])])),_:1})],32)])),_:1},8,["visible"]),(0,a.bF)(Be,{visible:W.modalObsEditar,onClose:o[31]||(o[31]=e=>j.clickModalObsEditar(!1))},{default:(0,a.k6)((()=>[(0,a.Lk)("form",{onSubmit:o[30]||(o[30]=(0,t.D$)((e=>j.updateObs()),["prevent"])),enctype:"multipart/form-data"},[(0,a.bF)(Me,{class:"headercolor text-center",dismiss:"",onClose:o[20]||(o[20]=e=>j.clickModalObsEditar(!1))},{default:(0,a.k6)((()=>[(0,a.bF)(ye,null,{default:(0,a.k6)((()=>[Y])),_:1})])),_:1}),(0,a.bF)(Se,null,{default:(0,a.k6)((()=>[(0,a.bF)(Te,{datos:W.datos},null,8,["datos"]),(0,a.Lk)("div",Z,[ee,(0,a.Lk)("div",oe,[(0,a.bo)((0,a.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":o[21]||(o[21]=e=>W.uobs.uidobs=e),required:"true",placeholder:"Cite u Hoja de Ruta"},null,512),[[t.Jo,W.uobs.uidobs]])])]),(0,a.Lk)("div",se,[ae,(0,a.Lk)("div",ie,[(0,a.bo)((0,a.Lk)("input",{type:"date",class:"form-control","onUpdate:modelValue":o[22]||(o[22]=e=>W.uobs.fechainicio=e),required:"true"},null,512),[[t.Jo,W.uobs.fechainicio]])])]),(0,a.Lk)("div",te,[le,(0,a.Lk)("div",re,[(0,a.bo)((0,a.Lk)("input",{type:"date",class:"form-control","onUpdate:modelValue":o[23]||(o[23]=e=>W.uobs.fechafin=e),required:"true"},null,512),[[t.Jo,W.uobs.fechafin]])])]),(0,a.Lk)("div",ce,[ne,(0,a.Lk)("div",de,[(0,a.bo)((0,a.Lk)("textarea",{class:"form-control","onUpdate:modelValue":o[24]||(o[24]=e=>W.uobs.detalle=e),required:"true"},null,512),[[t.Jo,W.uobs.detalle]])])]),(0,a.Lk)("div",ue,[be,(0,a.Lk)("div",fe,[(0,a.bo)((0,a.Lk)("select",{class:"form-control","onUpdate:modelValue":o[25]||(o[25]=e=>W.uobs.tipo=e),required:"true",onChange:o[26]||(o[26]=o=>e.getuTipo())},Le,544),[[t.u1,W.uobs.tipo]])])]),"asueto"!=W.uobs.tipo?((0,a.uX)(),(0,a.CE)("div",Ce,[Oe,(0,a.Lk)("div",Ae,[(0,a.bo)((0,a.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":o[27]||(o[27]=e=>W.uobs.hora=e)},null,512),[[t.Jo,W.uobs.hora]])])])):(0,a.Q3)("",!0),(0,a.Lk)("div",Fe,[_e,(0,a.Lk)("div",De,[(0,a.Lk)("input",{type:"file",ref:"file",class:"form-control",accept:"image/png,image/jpeg",onChange:o[28]||(o[28]=e=>j.selectFile()),required:"true"},null,544)])])])),_:1}),(0,a.bF)($e,null,{default:(0,a.k6)((()=>[(0,a.bF)(H,{onClick:o[29]||(o[29]=e=>j.clickModalObsEditar(!1)),color:"danger",class:"font"},{default:(0,a.k6)((()=>[(0,a.bF)(X,{icon:"cil-x",class:"me-2"}),(0,a.eW)("Cancelar")])),_:1}),(0,a.Lk)("button",we,[(0,a.bF)(X,{icon:"cil-check-alt",class:"me-2"}),(0,a.eW)(" Actualizar Observacion")])])),_:1})],32)])),_:1},8,["visible"])],64)}s(4114),s(4603),s(7566),s(8721);var ye=s(8512),Me=s(7590),Te=s(7950),Ue=s(7160),Se={name:"ObservacionesView",components:{ComponenteNombres:ye.A},data(){return{archivo:"",sccService:null,egovfService:null,uploadService:null,modalDetalleObs:!1,modalObsEditar:!1,listaGestion:[],listaMes:[{m:"01",mes:"Enero"},{m:"02",mes:"Febrero"},{m:"03",mes:"Marzo"},{m:"04",mes:"Abril"},{m:"05",mes:"Mayo"},{m:"06",mes:"Junio"},{m:"07",mes:"Julio"},{m:"08",mes:"Agosto"},{m:"09",mes:"Septiembre"},{m:"10",mes:"Octubre"},{m:"11",mes:"Noviembre"},{m:"12",mes:"Diciembre"}],usuario:{token:"",cif:"",correo:"",celular:"",pass:"",unidad:"",sigla:""},obsgestion:0,obsmes:0,listaObs:[],obsDetalle:{id:0,uidobs:"",fechainicio:"",fechafin:"",detalle:"",imagen:"",tipo:"",hora:"",url:"",estado:0},datos:{cif:0,nombre:"",apellido:""},egovf:{idPersona:0,nombre:"",paterno:"",materno:"",fecha:"",sexo:0,idUsuario:0,cif:0,matricula:0,ci:"",ci_com:0,complemento:"",correo:"",celular:"",pass:"",unidad:"",dependiente:"",sigla:""},modalObs:!1,obs:{cif:null,uidobs:"",fechainicio:"",fechafin:"",detalle:"Referencia por la que pide su Observaci坦n",imagen:"",tipo:"Seleccionar Tipo",hora:"08:30",url:""},uobs:{id:0,cif:null,uidobs:"",fechainicio:"",fechafin:"",detalle:"",imagen:"",tipo:"",hora:"",url:""}}},mounted(){this.cifCiudadano=this.$cookies.get("cif"),this.getDatos(),this.getGestion(),this.getEgovf()},created(){this.sccService=new Me.A,this.egovfService=new Te.A,this.uploadService=new Ue.A},methods:{selectFile(){this.archivo=this.$refs.file.files[0]},getDatos(){null!=this.$cookies.get("cif")&&(this.usuario.token=this.$cookies.get("token"),this.usuario.cif=this.$cookies.get("cif"),this.usuario.correo=this.$cookies.get("correo"),this.usuario.celular=this.$cookies.get("celular"),this.usuario.pass=this.$cookies.get("pass"),this.usuario.unidad=this.$cookies.get("unidad"),this.usuario.sigla=this.$cookies.get("sigla"))},getGestion(){var e=[];const o=new Date;this.obsgestion=o.getFullYear();for(var s=2021;s<=this.obsgestion;s++)e.push(s);this.listaGestion=e},async getObsUsuario(){await this.sccService.getObsUsuario(this.usuario.cif,this.obsgestion,this.obsmes).then((e=>{this.listaObs=e.data})),0==this.listaObs.length&&this.$swal.fire("No se encontro ninguna Observacion","","info")},getObsDetalle(e){this.listaObs.forEach((o=>{o.id===e&&(this.obsDetalle.id=o.id,this.obsDetalle.uidobs=o.uidobs,this.obsDetalle.fechainicio=o.fechainicio,this.obsDetalle.fechafin=o.fechafin,this.obsDetalle.detalle=o.detalle,this.obsDetalle.imagen=o.imagen,this.obsDetalle.tipo=o.tipo,this.obsDetalle.hora=o.hora,this.obsDetalle.url=o.url,this.obsDetalle.estado=o.estado)})),this.clickModalDetalleObs(!0)},clickModalDetalleObs(e){this.modalDetalleObs=e},async getEgovf(){this.egovfService.headersUsuario(this.usuario.token),await this.egovfService.getEgovf(this.usuario.cif).then((e=>{this.egovf=e.data,this.datos.cif=this.egovf.cif,this.datos.nombre=this.egovf.nombre,this.datos.apellido=this.egovf.paterno+" "+this.egovf.materno}))},async downloadImg(e,o){const s=await(await fetch(e)).blob(),a=URL.createObjectURL(s);Object.assign(document.createElement("a"),{href:a,download:o}).click(),URL.revokeObjectURL(a)},clickModalObs(e){this.modalObs=e},getTipo(){"Entrada M."==this.obs.tipo&&(this.obs.hora="08:30"),"Salida M."==this.obs.tipo&&(this.obs.hora="12:30"),"Entrada T."==this.obs.tipo&&(this.obs.hora="14:30"),"Salida T."==this.obs.tipo&&(this.obs.hora="18:30"),"continuo"==this.obs.tipo&&(this.obs.hora="16:30"),"asueto"==this.obs.tipo&&(this.obs.hora="08:30")},async addObs(){const e=new FormData;e.append("archivo",this.archivo);try{await this.uploadService.addImagen(e).then((e=>{200==e.status?(this.obs.url=this.uploadService.getUrl()+e.data.nombre,this.obs.imagen=e.data.nombre,this.obs.cif=this.usuario.cif,this.$swal.fire({title:"Deseas Agregar la Observacion de Tu Asistencia ?",showDenyButton:!0,icon:"info",confirmButtonText:"Aceptar",denyButtonText:"Cancelar"}).then((e=>{e.isConfirmed?this.sccService.addObsEmpleado(this.obs).then((e=>{201==e.status?this.$swal.fire("La Observacion fue Agregada Corectamente","Recuerda que para que tenga efecto debe de ser aprobada por tu inmediato superior","success").then((e=>{e&&location.reload()})):this.$swal.fire("La Observacion no pudo ser Registrada",""+e.status,"error")})):e.isDenied&&this.$swal.fire("Datos Cancelados","","info")}))):this.$swal.fire("El archivo no pudo ser Guardado  ","","error")}))}catch(o){this.$swal.fire("El archivo no pudo ser Guardado  "+o,"","error")}},async updateObs(){const e=new FormData;e.append("archivo",this.archivo);try{await this.uploadService.addImagen(e).then((e=>{200==e.status?(this.uobs.url=this.uploadService.getUrl()+e.data.nombre,this.uobs.imagen=e.data.nombre,this.uobs.cif=this.usuario.cif,this.$swal.fire({title:"Deseas Actualizar la Observacion de Tu Asistencia ?",showDenyButton:!0,icon:"info",confirmButtonText:"Aceptar",denyButtonText:"Cancelar"}).then((e=>{e.isConfirmed?this.sccService.updateObsEmpleado(this.uobs).then((e=>{200==e.status?this.$swal.fire("La Observacion fue Actualizada Corectamente","Recuerda que para que tenga efecto debe de ser aprobada por tu inmediato superior","success").then((e=>{e&&location.reload()})):this.$swal.fire("La Observacion no pudo ser Registrada",""+e.status,"error")})):e.isDenied&&this.$swal.fire("Datos Cancelados","","info")}))):this.$swal.fire("El archivo no pudo ser Guardado  ","","error")}))}catch(o){this.$swal.fire("El archivo no pudo ser Guardado  "+o,"","error")}},clickModalObsEditar(e){this.modalObsEditar=e},setObs(e){this.listaObs.forEach((o=>{o.id===e&&(this.uobs.id=e,this.uobs.uidobs=o.uidobs,this.uobs.fechainicio=o.fechainicio,this.uobs.fechafin=o.fechafin,this.uobs.detalle=o.detalle,this.uobs.imagen=o.imagen,this.uobs.tipo=o.tipo,this.uobs.hora=o.hora,this.uobs.url=o.url)})),this.clickModalObsEditar(!0)},async deleteObs(e){var o={id:0,cif:0,uidobs:"",fechainicio:"",fechafin:"",gestion:0,mes:0,di:0,df:0,detalle:"",imagen:"",tipo:"",hora:"",h:0,m:0,url:"",estado:0,tipoId:0};this.listaObs.forEach((s=>{s.id==e&&(o=s,o.estado=2)})),await this.$swal.fire({title:"Desea Eliminar la Observacion ? ",showDenyButton:!0,icon:"error",confirmButtonText:"Aceptar",denyButtonText:"Cancelar"}).then((e=>{e.isConfirmed?this.sccService.updateObsEmpleado(o).then((e=>{200==e.status?this.$swal.fire("Observacion Eliminada Corectamente","","success").then((e=>{e&&location.reload()})):this.$swal.fire("Los Datos no fueron Guardados Error"+e.status,"","error")})):e.isDenied&&this.$swal.fire("Datos Cancelados","","info")}))}}},$e=s(1241);const Be=(0,$e.A)(Se,[["render",Ee]]);var qe=Be},8512:function(e,o,s){s.d(o,{A:function(){return g}});var a=s(6768),i=s(4232);const t={class:"mb-3 row"},l={class:"card-title"},r={class:"mb-3 row"},c=(0,a.Lk)("label",{for:"nombre",class:"col-4"},"Nombre : ",-1),n={for:"nombre",class:"col-8"},d={class:"mb-3 row"},u=(0,a.Lk)("label",{for:"apellido",class:"col-4"},"Apellidos : ",-1),b={for:"nombre",class:"col-8"};function f(e,o,s,f,m,h){return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",t,[(0,a.Lk)("h4",l,"CIF : "+(0,i.v_)(s.datos.cif),1)]),(0,a.Lk)("div",r,[c,(0,a.Lk)("label",n,(0,i.v_)(s.datos.nombre),1)]),(0,a.Lk)("div",d,[u,(0,a.Lk)("label",b,(0,i.v_)(s.datos.apellido),1)])],64)}var m={name:"ComponenteNombres",props:["datos"]},h=s(1241);const p=(0,h.A)(m,[["render",f]]);var g=p}}]);
//# sourceMappingURL=172.04af2904.js.map