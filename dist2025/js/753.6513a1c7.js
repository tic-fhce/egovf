"use strict";(self["webpackChunkegovf"]=self["webpackChunkegovf"]||[]).push([[753],{7950:function(e,o,r){r.d(o,{A:function(){return t}});var a=r(4373),l=r(1660);const s=l.j6;class t{headersUsuario(e){a.A.defaults.headers.common["Authorization"]="Bearer "+e}getEgovf(e){return a.A.get(s+"ciudadano/getEgovf",{params:{cif:e}})}getListaCiudadano(){return a.A.get(s+"ciudadano/getListaCiudadano")}getListaEmpleado(){return a.A.get(s+"ciudadano/getListaEmpleado")}}},7525:function(e,o,r){r.d(o,{A:function(){return t}});var a=r(4373),l=r(1660);const s=l.j6;class t{headersUsuario(e){a.A.defaults.headers.common["Authorization"]="Bearer "+e}addPersona(e){var o=e.fecha.split("-"),r=o[2]+"/"+o[1]+"/"+o[0];const l={cif:0,ci:e.ci,complemento:e.complemento,nombre:e.nombre.charAt(0).toUpperCase()+e.nombre.slice(1),paterno:e.paterno.charAt(0).toUpperCase()+e.paterno.slice(1),materno:e.materno.charAt(0).toUpperCase()+e.materno.slice(1),fecha:r,sexo:e.sexo,cel:e.cel,correo:e.correo};return a.A.post(s+"persona/addPersona",l)}getListaCiudadanos(){return a.A.get(s+"listaPersona")}getListaPersonas(){return a.A.get(s+"listaPersonas")}getPersona(e){return a.A.get(s+"getPerfil",{params:{cif:e}})}}},2753:function(e,o,r){r.r(o),r.d(o,{default:function(){return Le}});var a=r(6768),l=r(4232),s=r(5130);const t=e=>((0,a.Qi)("data-v-8b05e08e"),e=e(),(0,a.jt)(),e),n={class:"table-responsive"},i={id:"personaTabla",class:"table table-striped table-hover"},c=t((()=>(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("th",null,"ID"),(0,a.Lk)("th",null,"Foto"),(0,a.Lk)("th",null,"CIF"),(0,a.Lk)("th",null,"Datos"),(0,a.Lk)("th",null,"Contacto"),(0,a.Lk)("th",null,"Unidad"),(0,a.Lk)("th",null,"Operaciones")])],-1))),u={scope:"row"},d=t((()=>(0,a.Lk)("br",null,null,-1))),p=t((()=>(0,a.Lk)("br",null,null,-1))),k={class:"fontabla"},h={class:"mb-3 row"},m=t((()=>(0,a.Lk)("label",{for:"ci",class:"col-6 col-form-label"},[(0,a.Lk)("p",null," Celulda de Identidad.")],-1))),f={class:"col-6"},C={key:0,style:{color:"green"}},b={key:1,style:{color:"red"}},L={class:"mb-3 row"},v=t((()=>(0,a.Lk)("label",{for:"region",class:"col-6 col-form-label"},[(0,a.Lk)("p",null," Region Exp.")],-1))),g={class:"col-6"},F=t((()=>(0,a.Lk)("option",null,"Seleccionar Region Expedida",-1))),_=t((()=>(0,a.Lk)("option",{value:"lp"},"La Paz",-1))),y=t((()=>(0,a.Lk)("option",{value:"sc"},"Santa Cruz",-1))),A=t((()=>(0,a.Lk)("option",{value:"cb"},"Cochabamba",-1))),x=t((()=>(0,a.Lk)("option",{value:"or"},"Oruro",-1))),E=t((()=>(0,a.Lk)("option",{value:"pt"},"Potosi",-1))),w=t((()=>(0,a.Lk)("option",{value:"tr"},"Tarija",-1))),I=t((()=>(0,a.Lk)("option",{value:"ch"},"Chuquisaca",-1))),S=t((()=>(0,a.Lk)("option",{value:"bn"},"Beni",-1))),U=t((()=>(0,a.Lk)("option",{value:"pd"},"Pando",-1))),P=[F,_,y,A,x,E,w,I,S,U],$={class:"mb-3 row"},M=t((()=>(0,a.Lk)("label",{for:"nombre",class:"col-6 col-form-label"},[(0,a.Lk)("p",null,"Nombres.")],-1))),D={class:"col-6"},V={class:"mb-3 row"},q=t((()=>(0,a.Lk)("label",{for:"paterno",class:"col-6 col-form-label"},"A. Paterno.",-1))),X={class:"col-6"},B={class:"mb-3 row"},z=t((()=>(0,a.Lk)("label",{for:"materno",class:"col-6 col-form-label"},"A. Materno.",-1))),T={class:"col-6"},W={class:"mb-3 row"},J=t((()=>(0,a.Lk)("label",{for:"fecha",class:"col-6 col-form-label"},[(0,a.Lk)("p",null,"Fecha de Nacimiento.")],-1))),N={class:"col-6"},R={class:"mb-3 row"},K=t((()=>(0,a.Lk)("label",{for:"sexo",class:"col-6 col-form-label"},[(0,a.Lk)("p",null,"Sexo")],-1))),j={class:"col-6"},G=t((()=>(0,a.Lk)("option",null,"Seleccionar Sexo",-1))),H=t((()=>(0,a.Lk)("option",{value:"1"},"Femenino",-1))),O=t((()=>(0,a.Lk)("option",{value:"2"},"Masculino",-1))),Q=[G,H,O],Y={class:"mb-3 row"},Z=t((()=>(0,a.Lk)("label",{for:"celular",class:"col-6 col-form-label"},[(0,a.Lk)("p",null,"Celular.")],-1))),ee={class:"col-6"},oe={key:0,style:{color:"green"}},re={key:1,style:{color:"red"}},ae={class:"mb-3 row"},le=t((()=>(0,a.Lk)("label",{for:"correo",class:"col-6 col-form-label"},[(0,a.Lk)("p",null,"E-mail.")],-1))),se={class:"col-6"},te={key:0,style:{color:"green"}},ne={key:1,style:{color:"red"}},ie={key:0,class:"btn btn-success font"};function ce(e,o,r,t,F,_){const y=(0,a.g2)("CCol"),A=(0,a.g2)("CIcon"),x=(0,a.g2)("CButton"),E=(0,a.g2)("CRow"),w=(0,a.g2)("CCardHeader"),I=(0,a.g2)("CAvatar"),S=(0,a.g2)("CCardBody"),U=(0,a.g2)("CCard"),G=(0,a.g2)("CModalTitle"),H=(0,a.g2)("CModalHeader"),O=(0,a.g2)("CModalBody"),ce=(0,a.g2)("CModalFooter"),ue=(0,a.g2)("CModal");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(E,null,{default:(0,a.k6)((()=>[(0,a.bF)(y,{xs:12},{default:(0,a.k6)((()=>[(0,a.bF)(U,null,{default:(0,a.k6)((()=>[(0,a.bF)(w,{class:"headercolor"},{default:(0,a.k6)((()=>[(0,a.bF)(E,null,{default:(0,a.k6)((()=>[(0,a.bF)(y,{lg:6},{default:(0,a.k6)((()=>[(0,a.eW)((0,l.v_)(F.titulo),1)])),_:1}),(0,a.bF)(y,{lg:6,class:"text-end"},{default:(0,a.k6)((()=>[(0,a.bF)(x,{onClick:o[0]||(o[0]=e=>_.clickModalCiudadano(!0)),color:"success",class:"font",size:"sm"},{default:(0,a.k6)((()=>[(0,a.bF)(A,{icon:"cil-cloud-upload",class:"me-2"}),(0,a.eW)("Agregar")])),_:1})])),_:1})])),_:1})])),_:1}),(0,a.bF)(S,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",n,[(0,a.Lk)("table",i,[c,(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(F.listaCiudadanos,(e=>((0,a.uX)(),(0,a.CE)("tr",{key:e.idPersona},[(0,a.Lk)("th",u,(0,l.v_)(e.idPersona),1),(0,a.Lk)("td",null,[(0,a.bF)(I,{src:e.foto,size:"md"},null,8,["src"])]),(0,a.Lk)("td",null,(0,l.v_)(e.cif),1),(0,a.Lk)("td",null,[(0,a.eW)((0,l.v_)(e.nombre)+" "+(0,l.v_)(e.paterno)+" "+(0,l.v_)(e.materno),1),d,(0,a.eW)(" "+(0,l.v_)(e.ci),1),p,(0,a.Lk)("label",k,(0,l.v_)(e.correo),1)]),(0,a.Lk)("td",null,(0,l.v_)(e.celular),1),(0,a.Lk)("td",null,(0,l.v_)(e.sigla),1),(0,a.Lk)("td",null,[(0,a.bF)(x,{class:"font",color:"success",onClick:o=>_.perfil(e.cif),size:"sm"},{default:(0,a.k6)((()=>[(0,a.bF)(A,{icon:"cil-user",class:"me-2"}),(0,a.eW)("Perfil")])),_:2},1032,["onClick"])])])))),128))])])])])),_:1})])),_:1})])),_:1})])),_:1}),(0,a.bF)(ue,{visible:F.modalCiudadano,onClose:o[19]||(o[19]=e=>_.clickModalCiudadano(!1))},{default:(0,a.k6)((()=>[(0,a.Lk)("form",{onSubmit:o[18]||(o[18]=(0,s.D$)((e=>_.registrarCiudadano()),["prevent"]))},[(0,a.bF)(H,{class:"headercolor",dismiss:"",onClose:o[1]||(o[1]=e=>_.clickModalCiudadano(!1))},{default:(0,a.k6)((()=>[(0,a.bF)(G,null,{default:(0,a.k6)((()=>[(0,a.Lk)("h4",null,[(0,a.bF)(A,{icon:"cil-user",size:"xl"}),(0,a.eW)(" Agregar Nuevo Ciudadano")])])),_:1})])),_:1}),(0,a.bF)(O,null,{default:(0,a.k6)((()=>[(0,a.Lk)("div",h,[m,(0,a.Lk)("div",f,[(0,a.bo)((0,a.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":o[2]||(o[2]=e=>F.persona.ci=e),placeholder:"Cedula de Identidad",onInput:o[3]||(o[3]=e=>_.validarCI()),onKeyup:o[4]||(o[4]=e=>_.botonesFuncion()),required:"true"},null,544),[[s.Jo,F.persona.ci]]),F.errorpersona.ci?((0,a.uX)(),(0,a.CE)("p",C,(0,l.v_)(F.errorCI),1)):((0,a.uX)(),(0,a.CE)("p",b,(0,l.v_)(F.errorCI),1))])]),(0,a.Lk)("div",L,[v,(0,a.Lk)("div",g,[(0,a.bo)((0,a.Lk)("select",{class:"form-control","onUpdate:modelValue":o[5]||(o[5]=e=>F.persona.complemento=e),required:"true"},P,512),[[s.u1,F.persona.complemento]])])]),(0,a.Lk)("div",$,[M,(0,a.Lk)("div",D,[(0,a.bo)((0,a.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":o[6]||(o[6]=e=>F.persona.nombre=e),placeholder:"Nombres",required:"true"},null,512),[[s.Jo,F.persona.nombre]])])]),(0,a.Lk)("div",V,[q,(0,a.Lk)("div",X,[(0,a.bo)((0,a.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":o[7]||(o[7]=e=>F.persona.paterno=e),placeholder:"Apellido Paterno"},null,512),[[s.Jo,F.persona.paterno]])])]),(0,a.Lk)("div",B,[z,(0,a.Lk)("div",T,[(0,a.bo)((0,a.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":o[8]||(o[8]=e=>F.persona.materno=e),placeholder:"Apellido Materno"},null,512),[[s.Jo,F.persona.materno]])])]),(0,a.Lk)("div",W,[J,(0,a.Lk)("div",N,[(0,a.bo)((0,a.Lk)("input",{type:"date",class:"form-control","onUpdate:modelValue":o[9]||(o[9]=e=>F.persona.fecha=e),required:"true"},null,512),[[s.Jo,F.persona.fecha]])])]),(0,a.Lk)("div",R,[K,(0,a.Lk)("div",j,[(0,a.bo)((0,a.Lk)("select",{class:"form-control","onUpdate:modelValue":o[10]||(o[10]=e=>F.persona.sexo=e),required:"true"},Q,512),[[s.u1,F.persona.sexo]])])]),(0,a.Lk)("div",Y,[Z,(0,a.Lk)("div",ee,[(0,a.bo)((0,a.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":o[11]||(o[11]=e=>F.persona.cel=e),placeholder:"Numero de Celular",onInput:o[12]||(o[12]=e=>_.validarCelular()),onKeyup:o[13]||(o[13]=e=>_.botonesFuncion()),required:"true"},null,544),[[s.Jo,F.persona.cel]]),F.errorpersona.cel?((0,a.uX)(),(0,a.CE)("p",oe,(0,l.v_)(F.errorCelular),1)):((0,a.uX)(),(0,a.CE)("p",re,(0,l.v_)(F.errorCelular),1))])]),(0,a.Lk)("div",ae,[le,(0,a.Lk)("div",se,[(0,a.bo)((0,a.Lk)("input",{type:"email",class:"form-control","onUpdate:modelValue":o[14]||(o[14]=e=>F.persona.correo=e),placeholder:"Correo Electronico",onInput:o[15]||(o[15]=e=>_.validarCorreo()),onKeyup:o[16]||(o[16]=e=>_.botonesFuncion()),required:"true"},null,544),[[s.Jo,F.persona.correo]]),F.errorpersona.correo?((0,a.uX)(),(0,a.CE)("p",te,(0,l.v_)(F.errorCorreo),1)):((0,a.uX)(),(0,a.CE)("p",ne,(0,l.v_)(F.errorCorreo),1))])])])),_:1}),(0,a.bF)(ce,null,{default:(0,a.k6)((()=>[(0,a.bF)(x,{onClick:o[17]||(o[17]=e=>_.clickModalCiudadano(!1)),color:"danger",class:"font"},{default:(0,a.k6)((()=>[(0,a.bF)(A,{icon:"cil-x",class:"me-2"}),(0,a.eW)("Cancelar")])),_:1}),F.botones?((0,a.uX)(),(0,a.CE)("button",ie,[(0,a.bF)(A,{icon:"cil-cloud-upload",class:"me-2"}),(0,a.eW)("Agregar")])):(0,a.Q3)("",!0)])),_:1})],32)])),_:1},8,["visible"])],64)}r(4114);var ue=r(7525),de=r(7950),pe=r(903),ke=r(9995),he=r(6587),me=r.n(he);pe.A.use(ke.A);var fe={name:"ListaView",components:{},data(){return{titulo:"Lista de Ciudadanos",modalCiudadano:!1,personaService:null,egovfService:null,listaCiudadanos:[],registro:[],listaUnidad:[],botones:!1,usuario:{token:"",cif:"",correo:"",celular:"",pass:"",unidad:"",sigla:""},persona:{cif:0,ci:"",complemento:"Seleccionar Region Expedida",nombre:"",paterno:"",materno:"",fecha:"",sexo:"Seleccionar Sexo",cel:"",correo:""},errorCI:"",errorCorreo:"",errorCelular:"",errorpersona:{ci:!1,complemento:!1,cel:!1,correo:!1}}},beforeCreate(){null==this.$cookies.get("cif")&&this.$router.push("/")},created(){this.egovfService=new de.A,this.personaService=new ue.A},mounted(){this.getDatos(),this.getListarCiudadano()},methods:{tabla(){this.$nextTick((()=>{me()("#personaTabla").DataTable()}))},getDatos(){null!=this.$cookies.get("cif")&&(this.usuario.token=this.$cookies.get("token"),this.usuario.cif=this.$cookies.get("cif"),this.usuario.correo=this.$cookies.get("correo"),this.usuario.celular=this.$cookies.get("celular"),this.usuario.pass=this.$cookies.get("pass"),this.usuario.unidad=this.$cookies.get("unidad"),this.usuario.sigla=this.$cookies.get("sigla"),this.egovfService.headersUsuario(this.usuario.token),this.personaService.headersUsuario(this.usuario.token))},async getListarCiudadano(){await this.egovfService.getListaCiudadano().then((e=>{this.listaCiudadanos=e.data,this.tabla()}))},perfil(e){this.$router.push({name:"PerfilCiudadanoView",params:{cifCiudadano:e}})},registrarCiudadano(){this.personaFalse(),this.$swal.fire({title:"Desea Registrar al Ciudadano",icon:"info",showDenyButton:!0,confirmButtonText:"Registrar",denyButtonText:"Cancelar"}).then((e=>{e.isConfirmed?this.personaService.addPersona(this.persona).then((e=>{console.log(e),201==e.status?this.$swal.fire("Datos Guardados Corectamente","","success").then((e=>{e&&location.reload()})):this.$swal.fire("Los Datos no fueron Guardados Error"+e.status,"","error")})):e.isDenied&&this.$swal.fire("Datos Cancelados","","info")}))},validarCI(){const e=this.listaCiudadanos.find((e=>e.ci_com.toString()===this.persona.ci));e?(this.errorCI="La Cédula de identidad ya Existe, revise en el sistema.",this.errorpersona.ci=!1):(this.errorCI="La Cédula de Identidad es valida",this.errorpersona.ci=!0)},validarCelular(){const e=this.listaCiudadanos.find((e=>e.celular===this.persona.cel));e?(this.errorCelular="El Numero de Celular ya existe, verifique su estado en el sistema",this.errorpersona.cel=!1):(this.errorCelular="El Numero de Celular es valido",this.errorpersona.cel=!0)},validarCorreo(){const e=this.listaCiudadanos.find((e=>e.correo===this.persona.correo));e?(this.errorCorreo="El correo Electronico ya existe ingrese otro o verifique su existencia en el sistema.",this.errorpersona.correo=!1):(this.errorCorreo="Correo electronico Valido",this.errorpersona.correo=!0)},personaFalse(){this.errorpersona.ci=!1,this.errorpersona.complemento=!1,this.errorpersona.cel=!1,this.errorpersona.correo=!1},clickModalCiudadano(e){this.modalCiudadano=e},botonesFuncion(){this.errorpersona.ci&&this.errorpersona.cel&&this.errorpersona.correo?this.botones=!0:this.botones=!1}}},Ce=r(1241);const be=(0,Ce.A)(fe,[["render",ce],["__scopeId","data-v-8b05e08e"]]);var Le=be}}]);
//# sourceMappingURL=753.6513a1c7.js.map