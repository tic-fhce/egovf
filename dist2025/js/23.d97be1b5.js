"use strict";(self["webpackChunkegovf"]=self["webpackChunkegovf"]||[]).push([[23],{7950:function(e,t,l){l.d(t,{A:function(){return a}});var s=l(4373),r=l(1660);const o=r.j6;class a{headersUsuario(e){s.A.defaults.headers.common["Authorization"]="Bearer "+e}getEgovf(e){return s.A.get(o+"ciudadano/getEgovf",{params:{cif:e}})}getListaCiudadano(){return s.A.get(o+"ciudadano/getListaCiudadano")}getListaEmpleado(){return s.A.get(o+"ciudadano/getListaEmpleado")}}},9023:function(e,t,l){l.r(t),l.d(t,{default:function(){return ke}});var s=l(6768),r=l(4232);const o=e=>((0,s.Qi)("data-v-1e106448"),e=e(),(0,s.jt)(),e),a={class:"oculto"},i=o((()=>(0,s.Lk)("br",null,null,-1))),n=o((()=>(0,s.Lk)("br",null,null,-1))),u=o((()=>(0,s.Lk)("br",null,null,-1))),c=o((()=>(0,s.Lk)("br",null,null,-1))),d={class:"table table-striped table-hover",id:"printDatos"},h=o((()=>(0,s.Lk)("tr",null,[(0,s.Lk)("td",{colspan:"5",class:"text-center"},[(0,s.Lk)("h4",null,"Datos de Usuario Registrado en Biometricos")])],-1))),g={class:"table table-striped table-hover",id:"printHorario"},p=o((()=>(0,s.Lk)("tr",null,[(0,s.Lk)("td",{colspan:"4",class:"text-center"},[(0,s.Lk)("h4",null,"Horarios del Usuario")])],-1))),k={class:"table table-striped table-hover",id:"printMarcado"},f=o((()=>(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",null,"#"),(0,s.Lk)("th",null,"Dia"),(0,s.Lk)("th",null,"Lugar"),(0,s.Lk)("th",null,"Turno"),(0,s.Lk)("th",null,"Hora M."),(0,s.Lk)("th",null,"Min. R."),(0,s.Lk)("th",null,"Obs.")])],-1))),b=o((()=>(0,s.Lk)("br",null,null,-1))),m=o((()=>(0,s.Lk)("br",null,null,-1))),v=o((()=>(0,s.Lk)("br",null,null,-1))),L=o((()=>(0,s.Lk)("br",null,null,-1))),_=o((()=>(0,s.Lk)("br",null,null,-1))),F=o((()=>(0,s.Lk)("br",null,null,-1))),C=o((()=>(0,s.Lk)("br",null,null,-1))),S=o((()=>(0,s.Lk)("br",null,null,-1))),E={key:0,class:"badge bg-danger"},x={key:1},W=o((()=>(0,s.Lk)("br",null,null,-1))),y={key:2,class:"badge bg-danger"},R={key:3},A=o((()=>(0,s.Lk)("br",null,null,-1))),I={key:4,class:"badge bg-danger"},z={key:5},M=o((()=>(0,s.Lk)("br",null,null,-1))),D={key:6,class:"badge bg-danger"},w={key:7},X=o((()=>(0,s.Lk)("br",null,null,-1))),H=o((()=>(0,s.Lk)("br",null,null,-1))),P=o((()=>(0,s.Lk)("br",null,null,-1))),$=o((()=>(0,s.Lk)("br",null,null,-1))),T=o((()=>(0,s.Lk)("th",null,null,-1))),U=o((()=>(0,s.Lk)("th",null,null,-1))),B=o((()=>(0,s.Lk)("th",null,null,-1))),J=o((()=>(0,s.Lk)("th",null,null,-1))),j=o((()=>(0,s.Lk)("th",null,"Total Retraso",-1))),V=o((()=>(0,s.Lk)("th",null,"min.",-1))),G=o((()=>(0,s.Lk)("th",null,null,-1))),K=o((()=>(0,s.Lk)("th",null,null,-1))),Y=o((()=>(0,s.Lk)("th",null,null,-1))),N=o((()=>(0,s.Lk)("th",null,null,-1))),q=o((()=>(0,s.Lk)("th",null,"Total Salidas Anticipadas",-1))),Q=o((()=>(0,s.Lk)("th",null,"min.",-1))),O=o((()=>(0,s.Lk)("th",null,null,-1))),Z=o((()=>(0,s.Lk)("th",null,null,-1))),ee=o((()=>(0,s.Lk)("th",null,null,-1))),te=o((()=>(0,s.Lk)("th",null,null,-1))),le=o((()=>(0,s.Lk)("th",null,"Total Dias de Descuento",-1))),se=o((()=>(0,s.Lk)("th",null,null,-1))),re={class:"oculto"};function oe(e,t,l,o,oe,ae){const ie=(0,s.g2)("CCardHeader"),ne=(0,s.g2)("CCardBody"),ue=(0,s.g2)("CCard"),ce=(0,s.g2)("CCol"),de=(0,s.g2)("CRow"),he=(0,s.g2)("CIcon"),ge=(0,s.g2)("CButton"),pe=(0,s.g2)("CBadge"),ke=(0,s.g2)("QrcodeVue"),fe=(0,s.g2)("CCardFooter");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.Lk)("div",a,(0,r.v_)(oe.reporte.cif),1),(0,s.bF)(de,null,{default:(0,s.k6)((()=>[(0,s.bF)(ce,{lg:4},{default:(0,s.k6)((()=>[i,(0,s.bF)(ue,null,{default:(0,s.k6)((()=>[(0,s.bF)(ie,{class:"headercolor text-center"},{default:(0,s.k6)((()=>[(0,s.eW)(" Total Dias de Descuento ")])),_:1}),(0,s.bF)(ne,{class:"text-center"},{default:(0,s.k6)((()=>[(0,s.Lk)("h2",null,(0,r.v_)(oe.totalsin),1)])),_:1})])),_:1})])),_:1}),(0,s.bF)(ce,{lg:4},{default:(0,s.k6)((()=>[n,(0,s.bF)(ue,null,{default:(0,s.k6)((()=>[(0,s.bF)(ie,{class:"headercolor text-center"},{default:(0,s.k6)((()=>[(0,s.eW)(" Total Minutos ")])),_:1}),(0,s.bF)(ne,{class:"text-center"},{default:(0,s.k6)((()=>[(0,s.Lk)("h2",null,(0,r.v_)(oe.totalretraso),1)])),_:1})])),_:1})])),_:1}),(0,s.bF)(ce,{lg:4},{default:(0,s.k6)((()=>[u,(0,s.bF)(ue,null,{default:(0,s.k6)((()=>[(0,s.bF)(ie,{class:"headercolor text-center"},{default:(0,s.k6)((()=>[(0,s.eW)(" Total de Salidas ")])),_:1}),(0,s.bF)(ne,{class:"text-center"},{default:(0,s.k6)((()=>[(0,s.Lk)("h2",null,(0,r.v_)(oe.totalanticipado),1)])),_:1})])),_:1})])),_:1})])),_:1}),c,(0,s.bF)(de,null,{default:(0,s.k6)((()=>[(0,s.bF)(ce,{lg:12},{default:(0,s.k6)((()=>[(0,s.bF)(ue,null,{default:(0,s.k6)((()=>[(0,s.bF)(ie,{class:"headercolor"},{default:(0,s.k6)((()=>[(0,s.bF)(de,null,{default:(0,s.k6)((()=>[(0,s.bF)(ce,{lg:8,class:"text-center"},{default:(0,s.k6)((()=>[(0,s.eW)("Reporte de Asistencia mes de "+(0,r.v_)(oe.mes)+" de "+(0,r.v_)(oe.reporte.gestion),1)])),_:1}),(0,s.bF)(ce,{lg:4,class:"text-center"},{default:(0,s.k6)((()=>[(0,s.bF)(ge,{onClick:t[0]||(t[0]=e=>ae.mensage()),color:"success",class:"font",size:"sm"},{default:(0,s.k6)((()=>[(0,s.bF)(he,{icon:"cil-cloud-download",class:"me-2"}),(0,s.eW)("Descargar PDF")])),_:1})])),_:1})])),_:1})])),_:1}),(0,s.bF)(ne,null,{default:(0,s.k6)((()=>[(0,s.bF)(de,{class:"oculto"},{default:(0,s.k6)((()=>[(0,s.bF)(ce,{lg:12,class:"table-responsive"},{default:(0,s.k6)((()=>[(0,s.Lk)("table",d,[h,((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(oe.reporte.listaPerfil,(e=>((0,s.uX)(),(0,s.CE)("tr",{key:e.id},[(0,s.Lk)("td",null,[(0,s.bF)(pe,{color:"light"},{default:(0,s.k6)((()=>[(0,s.eW)("ID-B : "+(0,r.v_)(e.id),1)])),_:2},1024)]),(0,s.Lk)("td",null,[(0,s.bF)(pe,{color:"light"},{default:(0,s.k6)((()=>[(0,s.eW)("User ID : "+(0,r.v_)(e.user_id),1)])),_:2},1024)]),(0,s.Lk)("td",null,[(0,s.bF)(pe,{color:"light"},{default:(0,s.k6)((()=>[(0,s.eW)("Nombre : "+(0,r.v_)(e.nombre),1)])),_:2},1024)]),(0,s.Lk)("td",null,[(0,s.bF)(pe,{color:"light"},{default:(0,s.k6)((()=>[(0,s.eW)("Lugar : "+(0,r.v_)(e.detalle),1)])),_:2},1024)]),(0,s.Lk)("td",null,[(0,s.bF)(pe,{color:"light"},{default:(0,s.k6)((()=>[(0,s.eW)("Sigla : "+(0,r.v_)(e.lugar),1)])),_:2},1024)])])))),128))])])),_:1})])),_:1}),(0,s.bF)(de,{class:"oculto"},{default:(0,s.k6)((()=>[(0,s.bF)(ce,{lg:12,class:"table-responsive"},{default:(0,s.k6)((()=>[(0,s.Lk)("table",g,[p,((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(oe.reporte.listaHorario,(e=>((0,s.uX)(),(0,s.CE)("tr",{key:e.horario_id},[(0,s.Lk)("td",null,[(0,s.bF)(pe,{color:"light"},{default:(0,s.k6)((()=>[(0,s.eW)("ID Horario : "+(0,r.v_)(e.horario_id),1)])),_:2},1024)]),(0,s.Lk)("td",null,[(0,s.bF)(pe,{color:"light"},{default:(0,s.k6)((()=>[(0,s.eW)("Valido del : "+(0,r.v_)(e.fecha),1)])),_:2},1024)]),(0,s.Lk)("td",null,[(0,s.bF)(pe,{color:"light"},{default:(0,s.k6)((()=>[(0,s.eW)("Hasta "+(0,r.v_)(e.valido),1)])),_:2},1024)])])))),128))])])),_:1})])),_:1}),(0,s.bF)(de,null,{default:(0,s.k6)((()=>[(0,s.bF)(ce,{lg:12,class:"table-responsive"},{default:(0,s.k6)((()=>[(0,s.Lk)("table",k,[f,(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(oe.listaReporte,(e=>((0,s.uX)(),(0,s.CE)("tr",{key:e.id},[(0,s.Lk)("td",null,(0,r.v_)(e.id),1),(0,s.Lk)("td",null,[(0,s.eW)((0,r.v_)(e.dia)+" "+(0,r.v_)(e.day),1),b,(0,s.bF)(pe,{color:"dark"},{default:(0,s.k6)((()=>[(0,s.eW)((0,r.v_)(e.fecha),1)])),_:2},1024),m]),(0,s.Lk)("td",null,[(0,s.bF)(pe,{color:"success"},{default:(0,s.k6)((()=>[(0,s.eW)((0,r.v_)(e.lugar[0]),1)])),_:2},1024),v,(0,s.bF)(pe,{color:"success"},{default:(0,s.k6)((()=>[(0,s.eW)((0,r.v_)(e.lugar[1]),1)])),_:2},1024),L,(0,s.bF)(pe,{color:"success"},{default:(0,s.k6)((()=>[(0,s.eW)((0,r.v_)(e.lugar[2]),1)])),_:2},1024),_,(0,s.bF)(pe,{color:"success"},{default:(0,s.k6)((()=>[(0,s.eW)((0,r.v_)(e.lugar[3]),1)])),_:2},1024)]),(0,s.Lk)("td",null,[(0,s.bF)(pe,{color:"success"},{default:(0,s.k6)((()=>[(0,s.eW)((0,r.v_)(e.turno[0]),1)])),_:2},1024),F,(0,s.eW)((0,r.v_)(e.turno[1]),1),C,(0,s.eW)((0,r.v_)(e.turno[2]),1),S,(0,s.eW)((0,r.v_)(e.turno[3]),1)]),(0,s.Lk)("td",null,["Sin Marcar"==e.hora[0]?((0,s.uX)(),(0,s.CE)("span",E,(0,r.v_)(e.hora[0]),1)):((0,s.uX)(),(0,s.CE)("span",x,(0,r.v_)(e.hora[0]),1)),W,"Sin Marcar"==e.hora[1]?((0,s.uX)(),(0,s.CE)("span",y,(0,r.v_)(e.hora[1]),1)):((0,s.uX)(),(0,s.CE)("span",R,(0,r.v_)(e.hora[1]),1)),A,"Sin Marcar"==e.hora[2]?((0,s.uX)(),(0,s.CE)("span",I,(0,r.v_)(e.hora[2]),1)):((0,s.uX)(),(0,s.CE)("span",z,(0,r.v_)(e.hora[2]),1)),M,"Sin Marcar"==e.hora[3]?((0,s.uX)(),(0,s.CE)("span",D,(0,r.v_)(e.hora[3]),1)):((0,s.uX)(),(0,s.CE)("span",w,(0,r.v_)(e.hora[3]),1))]),(0,s.Lk)("td",null,[(0,s.eW)((0,r.v_)(e.retraso[0]),1),X,(0,s.eW)((0,r.v_)(e.retraso[1]),1),H,(0,s.eW)((0,r.v_)(e.retraso[2]),1),P,(0,s.eW)((0,r.v_)(e.retraso[3]),1)]),(0,s.Lk)("td",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.obsDtoReporte,(e=>((0,s.uX)(),(0,s.CE)("div",{class:"obserbaciones",key:e.id},[(0,s.bF)(pe,{color:"warning"},{default:(0,s.k6)((()=>[(0,s.eW)((0,r.v_)(e.uidobs)+" "+(0,r.v_)(e.tipo)+" "+(0,r.v_)(e.hora),1)])),_:2},1024),$])))),128))])])))),128))]),(0,s.Lk)("tfoot",null,[(0,s.Lk)("tr",null,[T,U,B,J,j,(0,s.Lk)("th",null,[(0,s.Lk)("h2",null,(0,r.v_)(oe.totalretraso),1)]),V]),(0,s.Lk)("tr",null,[G,K,Y,N,q,(0,s.Lk)("th",null,[(0,s.Lk)("h2",null,(0,r.v_)(oe.totalanticipado),1)]),Q]),(0,s.Lk)("tr",null,[O,Z,ee,te,le,(0,s.Lk)("th",null,[(0,s.Lk)("h2",null,(0,r.v_)(oe.totalsin),1)]),se])])])])),_:1})])),_:1})])),_:1}),(0,s.bF)(fe,null,{default:(0,s.k6)((()=>[(0,s.Lk)("div",re,[(0,s.bF)(ke,{value:oe.sms,size:oe.size,level:"H",ref:"qr"},null,8,["value","size"])])])),_:1})])),_:1})])),_:1})])),_:1})],64)}l(4114);var ae=l(9877),ie=l(1749),ne=l(5839),ue=l.n(ne),ce=l(7950),de=l(7590),he={name:"UsuarioReporteView",components:{QrcodeVue:ae.A},data(){return{titulo:"Reporte de Asistencia",sccService:null,egovfService:null,uri:"",listaReporte:[],cifCiudadano:"",usuario:{token:"",cif:"",correo:"",celular:"",pass:"",unidad:"",sigla:"",foto:""},reporte:{cif:0,sigla:"",gestion:0,mes:0,di:0,df:0,listaPerfil:[],listaHorario:[],persona:{id:null,ci:"",nombre:"",paterno:"",materno:"",celular:"",correo:"",foto:""}},egovf:{idPersona:0,nombre:"",paterno:"",materno:"",fecha:"",sexo:0,idUsuario:0,cif:0,matricula:0,ci:"",ci_com:0,complemento:"",correo:"",celular:"",pass:"",unidad:"",dependiente:"",sigla:"",foto:""},totalretraso:0,totalanticipado:0,totalsin:0,mes:"",sms:"",size:300}},mounted(){this.uri=this.$route.params.uri,this.cifCiudadano=this.$cookies.get("cif"),this.reporte.cif=this.uri.substring(0,11),this.reporte.gestion=this.uri.substring(12,16),this.reporte.mes=this.uri.substring(17,19),this.reporte.di=this.uri.substring(20,22),this.reporte.df=this.uri.slice(23),this.reporte.uri=this.uri,this.getDatos(),this.getEgovf(),this.getMes(),this.getReporteBiometrico(),this.getReporteMes()},beforeCreate(){null==this.$cookies.get("cif")&&this.$router.push("/")},created(){this.sccService=new de.A,this.egovfService=new ce.A},methods:{getDatos(){null!=this.$cookies.get("cif")&&(this.usuario.token=this.$cookies.get("token"),this.usuario.cif=this.$cookies.get("cif"),this.usuario.correo=this.$cookies.get("correo"),this.usuario.celular=this.$cookies.get("celular"),this.usuario.pass=this.$cookies.get("pass"),this.usuario.unidad=this.$cookies.get("unidad"),this.usuario.sigla=this.$cookies.get("sigla"),this.usuario.foto=this.$cookies.get("foto"))},async getEgovf(){this.egovfService.headersUsuario(this.usuario.token),await this.egovfService.getEgovf(this.usuario.cif).then((e=>{this.egovf=e.data})),this.reporte.sigla=this.egovf.sigla,this.reporte.persona.id=this.egovf.idPersona,this.reporte.persona.ci=this.egovf.ci,this.reporte.persona.nombre=this.egovf.nombre,this.reporte.persona.paterno=this.egovf.paterno,this.reporte.persona.materno=this.egovf.materno,this.reporte.persona.celular=this.egovf.celular,this.reporte.persona.correo=this.egovf.correo,this.reporte.persona.foto=this.egovf.foto},async getReporteMes(){await this.sccService.getReporteMes(this.reporte).then((e=>{this.listaReporte=e.data,this.sumaRetraso()})).catch((e=>{console.log(e)}))},async getReporteBiometrico(){await this.sccService.getPerfil(this.usuario.cif).then((e=>{this.reporte.listaPerfil=e.data})),this.getListaHorario()},async getListaHorario(){await this.sccService.getListaHorario(this.usuario.cif,this.reporte.gestion).then((e=>{this.reporte.listaHorario=e.data}))},sumaRetraso(){let e=0,t=0,l=0;this.listaReporte.forEach((s=>{const r=s.retraso.some((e=>e>0)),o=s.hora.includes("Sin Marcar");(r||o)&&(l+=1),s.retraso.forEach(((l,s)=>{s%2===0?e+=parseInt(l,10):t+=parseInt(l,10)}))})),this.totalretraso=e,this.totalanticipado=t,this.totalsin=l;const s="/libreReporte"+this.uri;this.sms="Cif:"+this.reporte.cif+" TR: "+this.totalretraso+"min TA: "+this.totalanticipado+"min https://svfhce.umsa.bo/#"+s},getMes(){1==this.reporte.mes&&(this.mes="Enero"),2==this.reporte.mes&&(this.mes="Febrero"),3==this.reporte.mes&&(this.mes="Marzo"),4==this.reporte.mes&&(this.mes="Abril"),5==this.reporte.mes&&(this.mes="Mayo"),6==this.reporte.mes&&(this.mes="Junio"),7==this.reporte.mes&&(this.mes="Julio"),8==this.reporte.mes&&(this.mes="Agosto"),9==this.reporte.mes&&(this.mes="Septiembre"),10==this.reporte.mes&&(this.mes="Octubre"),11==this.reporte.mes&&(this.mes="Noviembre"),12==this.reporte.mes&&(this.mes="Diciembre")},pdf(){var e=new Image;const t=new ie["default"]("p","mm","letter"),l=this.$refs.qr.$el,s=l.toDataURL("image/jpeg",.8);t.setFontSize(10),e.src="https://fhcevirtual.umsa.bo/egovf-img/imagenes/logoticjpg.jpg",t.addImage(e,"JPEG",43,14,15,10),e.src="https://fhcevirtual.umsa.bo/egovf-img/imagenes/logofhce.jpg",t.addImage(e,"JPEG",215/7.8,14,15,10),e.src="https://fhcevirtual.umsa.bo/egovf-img/imagenes/logoumsa.jpg",t.addImage(e,"JPEG",21.5,12,6,12),t.addImage(s,"JPEG",160,12,40,40),t.setFontSize(12),t.setFont(void 0,"bold"),t.text("Universidad Mayor de San Andrés",107.5,18,{align:"center"}),t.setFontSize(10),t.setFont(void 0,"normal"),t.text("Facultad de Humanidades y Ciencias de la Educación",107.5,23,{align:"center"}),t.setFontSize(8),t.text("Unidad de Tecnologías de la Información y la Comunicación  UMSA-FHCE",107.5,28,{align:"center"}),t.setFontSize(15),t.text("Datos de Personales :",20,40),t.setFontSize(10),e.src=this.reporte.persona.foto,t.addImage(e,"JPEG",20,47,30,30),t.text("CIF : "+this.reporte.cif,52,50),t.text("Nombre : "+this.reporte.persona.nombre,52,55),t.text("Apellidos : "+this.reporte.persona.paterno+" "+this.reporte.persona.materno,52,60),t.text("Celular : "+this.reporte.persona.celular,52,65),t.text("Unidad : "+this.reporte.sigla,52,70),t.text("ID app : "+this.reporte.persona.id,120,50),t.text("C.I. : "+this.reporte.persona.ci,120,55),t.text("Correo : "+this.reporte.persona.correo,120,60),t.setFontSize(15),t.text("Retraso : "+this.totalretraso+" min.",120,75),t.text("Salida Anticipada : "+this.totalanticipado+" min.",120,85),t.setFontSize(10);var r=95;20903198600!=this.reporte.cif?(t.text("Lic. Jaime A. Montecinos Marquez",53.75,r+25,{align:"center"}),t.text("Responsable Unidad TIC.",53.75,r+30,{align:"center"}),t.text("Vo. Bo.",162,r+25,{align:"center"}),t.text("Inmediato Superior",162,r+30,{align:"center"})):(t.text("Vo. Bo.",107.5,r+25,{align:"center"}),t.text("Inmediato Superior",107.5,r+30,{align:"center"})),r+=45,ue()(t,{theme:"striped",startY:r,margin:{left:20},styles:{fontSize:8},html:"#printDatos",showFoot:"lastPage"}),r=t.lastAutoTable.finalY,r+=10,ue()(t,{startY:r,margin:{left:20},styles:{fontSize:8},html:"#printHorario",showFoot:"lastPage"}),r=t.lastAutoTable.finalY,t.setFontSize(15),t.text("Reporte de Asistencia "+this.mes+" "+this.reporte.gestion,107.5,r+10,{align:"center"}),ue()(t,{startY:r+15,margin:{left:15},styles:{fontSize:7.5},html:"#printMarcado",showFoot:"lastPage"}),t.save(this.reporte.cif+"reporte.pdf")},mensage(){this.$swal.fire({title:"No estas Autorizado para realizar la Impresion de tu Reporte",icon:"error"})}}},ge=l(1241);const pe=(0,ge.A)(he,[["render",oe],["__scopeId","data-v-1e106448"]]);var ke=pe}}]);
//# sourceMappingURL=23.d97be1b5.js.map