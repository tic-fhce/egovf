"use strict";(self["webpackChunkegovf"]=self["webpackChunkegovf"]||[]).push([[294],{1133:function(e,o,a){a.d(o,{A:function(){return l}});var i=a(4373),t=a(1660);const s=t.Qy;class l{getEmpleado(e){return i.A.get(s+"empleado/getEmpleado",{params:{cif:e}})}getListaTipoEmpleado(){return i.A.get(s+"tipo/listar")}getListarEmpleadoModuloCif(e){return i.A.get(s+"modulo/getListarEmpleadoModuloCif",{params:{cif:e}})}getListarEmpleadoModulo(e){return i.A.get(s+"modulo/getListarEmpleadoModulo",{params:{cif:e}})}addContrato(e){const o=new Date;let a=e.numerocontrato;const t={cif:e.cif,numero_contrato:a.toUpperCase(),servicio:e.servicio,unidad:e.unidad,inicio:e.inicio,fin:e.fin,gestion:o.getFullYear(),detalle:e.detalle,idTipoEmpleado:e.idTipoEmpleado};return console.log(t),i.A.post(s+"contrato/addContrato",t)}setContrato(e){let o=e.numerocontrato;const a={id:e.id,cif:e.cif,numero_contrato:o.toUpperCase(),servicio:e.servicio,unidad:e.unidad,inicio:e.inicio,fin:e.fin,gestion:e.gestion,detalle:e.detalle,idTipoEmpleado:e.idTipoEmpleado};return i.A.put(s+"contrato/actualizarContrato",a)}getTipoEmpleado(e){return i.A.get(s+"tipo/getTipoEmpleado",{params:{id:e}})}getListaEmpleado(e){return i.A.get(s+"empleado/getListaEmpleado",{params:{tipo:e}})}getListaModulo(){return i.A.get(s+"modulo/listar")}addEmpleadoModulo(e){const o={_01cif:e.cif,_02id_modulo:e.id_modulo,_03estado:1};return i.A.post(s+"empmodulo/addEmpleadoModulo",o)}updateEstado(e,o){const a=new Date,t={id:e.id,_01cif:e.cif,_02tipo_empleado_id:e.tipoempleado_id,_03fecha:e.fecha,_04estado:o,_05salida:a.toLocaleDateString("en-CA")};return i.A.put(s+"empleado/updateEmpleado",t)}getListaEmpleadoTipo(e){return i.A.get(s+"empleado/listarTipo",{params:{tipo:e}})}}},7590:function(e,o,a){a.d(o,{A:function(){return l}});var i=a(4373),t=a(1660);const s=t.fw;class l{getPerfil(e){return i.A.get(s+"biometrico/getPerfil",{params:{cif:e}})}getListarCifCero(){return i.A.get(s+"biometrico/listarCifCero")}getHorario(e,o){return i.A.get(s+"horario/getHorario",{params:{gestion:e,cif:o}})}updateBiometrico(e){return i.A.put(s+"biometrico/updateBiometrico",e)}getAvisoAll(){return i.A.get(s+"aviso/getAvisoAll")}getAviso(){return i.A.get(s+"aviso/getAviso")}getObsUsuario(e,o,a){return i.A.get(s+"obs/getObsUsuario",{params:{cif:e,gestion:o,mes:a}})}addObsEmpleado(e){const o={cif:e.cif,uidobs:e.uidobs,fechainicio:e.fechainicio,fechafin:e.fechafin,gestion:e.fechainicio.substring(0,4),mes:e.fechainicio.substring(5,7),di:e.fechainicio.substring(8,10),df:e.fechafin.substring(8,10),detalle:e.detalle,imagen:e.imagen,tipo:e.tipo,hora:e.hora,h:e.hora.substring(0,2),m:e.hora.substring(3,5),url:e.url,estado:0,tipoId:0};return i.A.post(s+"obs/addObs",o)}updateObsEmpleado(e){const o={id:e.id,cif:e.cif,uidobs:e.uidobs,fechainicio:e.fechainicio,fechafin:e.fechafin,gestion:e.fechainicio.substring(0,4),mes:e.fechainicio.substring(5,7),di:e.fechainicio.substring(8,10),df:e.fechafin.substring(8,10),detalle:e.detalle,imagen:e.imagen,tipo:e.tipo,hora:e.hora,h:e.hora.substring(0,2),m:e.hora.substring(3,5),url:e.url,estado:e.estado,tipoId:0};return i.A.put(s+"obs/updateObs",o)}getListaHorario(e,o){return i.A.get(s+"horario/getListaHorario",{params:{cif:e,gestion:o}})}getReporteMes(e){return i.A.get(s+"marcado/reporteMes",{params:{cif:e.cif,gestion:e.gestion,mes:e.mes,di:e.di,df:e.df}})}getReporteMesDia(e){return i.A.get(s+"marcado/reporteMesDia",{params:{cif:e.cif,gestion:e.gestion,mes:e.mes,di:e.di,df:e.df}})}addHorario(e){const o={cif:e.cif,fecha:e.fecha,salida:e.salida,tipo:e.tipo,lem:e.lem,lsm:e.lsm,let:e.let,lst:e.lst,mem:e.mem,msm:e.msm,met:e.met,mst:e.mst,miem:e.miem,mism:e.mism,miet:e.miet,mist:e.mist,jem:e.jem,jsm:e.jsm,jet:e.jet,jst:e.jst,vem:e.vem,vsm:e.vsm,vet:e.vet,vst:e.vst,sem:e.sem,ssm:e.ssm,set:e.set,sst:e.sst,dem:e.dem,dsm:e.dsm,det:e.det,dst:e.dst};return i.A.post(s+"horario/addHorario",o)}addObs(e){const o={cif:e.cif,uidobs:e.uidobs,fechainicio:e.fechainicio,fechafin:e.fechafin,gestion:e.fechainicio.substring(0,4),mes:e.fechainicio.substring(5,7),di:e.fechainicio.substring(8,10),df:e.fechafin.substring(8,10),detalle:e.detalle,imagen:e.imagen,tipo:e.tipo,hora:e.hora,h:e.hora.substring(0,2),m:e.hora.substring(3,5),url:e.url,estado:1,tipoId:0};return i.A.post(s+"obs/addObs",o)}updateObs(e){const o={id:e.id,cif:e.cif,uidobs:e.uidobs,fechainicio:e.fechainicio,fechafin:e.fechafin,gestion:e.gestion,mes:e.mes,di:e.di,df:e.df,detalle:e.detalle,imagen:e.imagen,tipo:e.tipo,hora:e.hora,h:e.h,m:e.m,url:e.url,estado:e.estado,tipoId:e.tipoId};return i.A.put(s+"obs/updateObs",o)}getListaObs(e){return i.A.get(s+"obs/getListaObs",{params:{gestion:e}})}addObsAll(e){const o={id:0,cif:e.cif,sexo:e.sexo,uidobs:e.uidobs,fechainicio:e.fechainicio,fechafin:e.fechafin,gestion:e.fechainicio.substring(0,4),mes:e.fechainicio.substring(5,7),di:e.fechainicio.substring(8,10),df:e.fechafin.substring(8,10),detalle:e.detalle,imagen:e.imagen,tipo:e.tipo,hora:e.hora,h:e.hora.substring(0,2),m:e.hora.substring(3,5),url:e.url,estado:1};return i.A.post(s+"obs/addObsAll",o)}addAviso(e){const o={titulo:e.titulo,detalle:e.detalle,icon:e.icon,estado:1};return i.A.post(s+"aviso/addAviso",o)}updateAviso(e){const o={id:e.id,titulo:e.titulo,detalle:e.detalle,icon:e.icon,estado:e.estado};return i.A.put(s+"aviso/updateAviso",o)}getRecord(e){return i.A.get(s+"marcado/reporteTotal",{params:{gestion:e.gestion,mes:e.mes,tipo:e.tipo}})}getListarBiometrico(){return i.A.get(s+"biometrico/listarBiometrico")}getLBiometricoTipo(e){return i.A.get(s+"biometrico/listarBiometricoTipo",{params:{tipo:e}})}updateBiometricoTipo(e,o){var a=0;1==o&&(a=e.tipoempleado_id);const t={id:0,_01user_id:0,_02nombre:"",_03cif:e.cif,_04estado:0,_05horario_id:0,_06lugar:"",_07id_tipo:a,_08detalle:"",_09sexo:0};return i.A.put(s+"biometrico/updateBiometricoTipo",t)}getObs(e,o,a){return i.A.get(s+"obs/getObs",{params:{cif:e,gestion:o,mes:a}})}estadoBiometrico(e){return console.log(e),i.A.put(s+"biometrico/estadoBiometrico",e)}updateTipo(e,o){return i.A.put(s+"biometrico/updateTipo",{params:{cif:e,tipo:o}})}getListaEquipo(){return i.A.get(s+"equipo/listar")}addEquipo(e){return i.A.post(s+"equipo/addEquipo",e)}updateEquipo(e){return i.A.put(s+"equipo/updateEquipo",e)}}},7950:function(e,o,a){a.d(o,{A:function(){return l}});var i=a(4373),t=a(1660);const s=t.j6;class l{headersUsuario(e){i.A.defaults.headers.common["Authorization"]="Bearer "+e}getEgovf(e){return i.A.get(s+"ciudadano/getEgovf",{params:{cif:e}})}getListaCiudadano(){return i.A.get(s+"ciudadano/getListaCiudadano")}getListaEmpleado(){return i.A.get(s+"ciudadano/getListaEmpleado")}}},7160:function(e,o,a){a.d(o,{A:function(){return l}});var i=a(4373),t=a(1660);const s=t.H4;class l{getListarCifCero(){return i.A.get("biometrico/listarCifCero")}addImagen(e){return i.A.post(s+"upload.php",e)}getUrl(){return s+"imagenes/"}getImage(e){return i.A.get(e,{headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"*"}})}}},2294:function(e,o,a){a.r(o),a.d(o,{default:function(){return Ao}});var i=a(6768),t=a(4232),s=a(5130);const l=e=>((0,i.Qi)("data-v-cc332ce8"),e=e(),(0,i.jt)(),e),r={class:"d-none d-md-flex me-auto"},c={class:"table-responsive"},n={class:"table",id:"obsTabla"},d=l((()=>(0,i.Lk)("thead",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("th",null,"ID"),(0,i.Lk)("th",null,"CIF"),(0,i.Lk)("th",null,"Empleado"),(0,i.Lk)("th",null,"UidObs"),(0,i.Lk)("th",null,"Tipo"),(0,i.Lk)("th",null,"Detalle"),(0,i.Lk)("th",null,"Opciones")])],-1))),u={scope:"row"},b=l((()=>(0,i.Lk)("tfoot",null,[(0,i.Lk)("tr")],-1))),m=l((()=>(0,i.Lk)("h5",null,"Agregar Observaciones de Asistencia",-1))),f={class:"mb-3 row"},p=l((()=>(0,i.Lk)("label",{for:"tipo",class:"col-4 col-form-label"},"Tipo",-1))),h={class:"col-8"},g=["value"],k={class:"mb-3 row"},v=l((()=>(0,i.Lk)("label",{for:"sexo",class:"col-4 col-form-label"},"Caracteristica",-1))),L={class:"col-8"},C=l((()=>(0,i.Lk)("option",{value:"0"},"Todos",-1))),A=l((()=>(0,i.Lk)("option",{value:"1"},"Femenino",-1))),E=l((()=>(0,i.Lk)("option",{value:"2"},"Masculino",-1))),O=[C,A,E],_={class:"mb-3 row"},F=l((()=>(0,i.Lk)("label",{for:"datos",class:"col-4 col-form-label"},"UID - OBS",-1))),D={class:"col-8"},w={class:"mb-3 row"},T=l((()=>(0,i.Lk)("label",{for:"datos",class:"col-4 col-form-label"},"Fecha de Inicio",-1))),M={class:"col-8"},y={class:"mb-3 row"},I=l((()=>(0,i.Lk)("label",{for:"datos",class:"col-4 col-form-label"},"Fecha Fin",-1))),S={class:"col-8"},$={class:"mb-3 row"},x=l((()=>(0,i.Lk)("label",{for:"datos",class:"col-4 col-form-label"},"Detalle",-1))),B={class:"col-8"},U={class:"mb-3 row"},q=l((()=>(0,i.Lk)("label",{for:"tipo",class:"col-4 col-form-label"},"Tipo",-1))),W={class:"col-8"},H=l((()=>(0,i.Lk)("option",{value:"Entrada M."},"Entrada Mañana",-1))),V=l((()=>(0,i.Lk)("option",{value:"Salida M."},"Salida Mañana",-1))),z=l((()=>(0,i.Lk)("option",{value:"Entrada T."},"Entrada Tarde",-1))),j=l((()=>(0,i.Lk)("option",{value:"Salida T."},"Salida Tarde",-1))),J=l((()=>(0,i.Lk)("option",{value:"continuo"},"Continuo",-1))),G=l((()=>(0,i.Lk)("option",{value:"horas"},"Horas de Servicio",-1))),X=l((()=>(0,i.Lk)("option",{value:"extraordinario"},"Horario Extraordinario",-1))),R=l((()=>(0,i.Lk)("option",{value:"comision"},"Comisión",-1))),P=l((()=>(0,i.Lk)("option",{value:"permiso"},"Permiso",-1))),Q=l((()=>(0,i.Lk)("option",{value:"asueto"},"Asueto",-1))),K=[H,V,z,j,J,G,X,R,P,Q],Y={class:"mb-3 row"},N=l((()=>(0,i.Lk)("label",{for:"datos",class:"col-4 col-form-label"},"Hora",-1))),Z={class:"col-8"},ee={class:"mb-3 row"},oe=l((()=>(0,i.Lk)("label",{for:"archivo",class:"col-4 col-form-label"},"Documento",-1))),ae={class:"col-8"},ie={class:"btn btn-success font"},te=l((()=>(0,i.Lk)("h5",null,"Detalles de la Observacion",-1))),se={class:"mb-3 row"},le={class:"card-title"},re={class:"lista"},ce=l((()=>(0,i.Lk)("strong",null,"ID: ",-1))),ne={class:"lista"},de=l((()=>(0,i.Lk)("strong",null,"UID: ",-1))),ue={class:"lista"},be=l((()=>(0,i.Lk)("strong",null,"Fecha Inicio: ",-1))),me={class:"lista"},fe=l((()=>(0,i.Lk)("strong",null,"Fecha Fin: ",-1))),pe={class:"lista"},he=l((()=>(0,i.Lk)("strong",null,"Detalle: ",-1))),ge={class:"lista"},ke=l((()=>(0,i.Lk)("strong",null,"Tipo de Obs. : ",-1))),ve={class:"lista"},Le=l((()=>(0,i.Lk)("strong",null,"Hora: ",-1))),Ce=["src"],Ae=l((()=>(0,i.Lk)("h5",null,"Actualizar la Observacion de Asistencia",-1))),Ee={class:"mb-3 row"},Oe=l((()=>(0,i.Lk)("label",{for:"cif",class:"col-4 col-form-label"},"CIF",-1))),_e={class:"col-8"},Fe={class:"mb-3 row"},De=l((()=>(0,i.Lk)("label",{for:"datos",class:"col-4 col-form-label"},"UID - OBS",-1))),we={class:"col-8"},Te={class:"mb-3 row"},Me=l((()=>(0,i.Lk)("label",{for:"datos",class:"col-4 col-form-label"},"Fecha de Inicio",-1))),ye={class:"col-8"},Ie={class:"mb-3 row"},Se=l((()=>(0,i.Lk)("label",{for:"datos",class:"col-4 col-form-label"},"Fecha Fin",-1))),$e={class:"col-8"},xe={class:"mb-3 row"},Be=l((()=>(0,i.Lk)("label",{for:"datos",class:"col-4 col-form-label"},"Detalle",-1))),Ue={class:"col-8"},qe={class:"mb-3 row"},We=l((()=>(0,i.Lk)("label",{for:"tipo",class:"col-4 col-form-label"},"Tipo",-1))),He={class:"col-8"},Ve=l((()=>(0,i.Lk)("option",{value:"Entrada M."},"Entrada Mañana",-1))),ze=l((()=>(0,i.Lk)("option",{value:"Salida M."},"Salida Mañana",-1))),je=l((()=>(0,i.Lk)("option",{value:"Entrada T."},"Entrada Tarde",-1))),Je=l((()=>(0,i.Lk)("option",{value:"Salida T."},"Salida Tarde",-1))),Ge=l((()=>(0,i.Lk)("option",{value:"continuo"},"Continuo",-1))),Xe=l((()=>(0,i.Lk)("option",{value:"horas"},"Horas de Servicio",-1))),Re=l((()=>(0,i.Lk)("option",{value:"extraordinario"},"Horario Extraordinario",-1))),Pe=l((()=>(0,i.Lk)("option",{value:"comision"},"Comisión",-1))),Qe=l((()=>(0,i.Lk)("option",{value:"permiso"},"Permiso",-1))),Ke=l((()=>(0,i.Lk)("option",{value:"asueto"},"Asueto",-1))),Ye=[Ve,ze,je,Je,Ge,Xe,Re,Pe,Qe,Ke],Ne={class:"mb-3 row"},Ze=l((()=>(0,i.Lk)("label",{for:"datos",class:"col-4 col-form-label"},"Hora",-1))),eo={class:"col-8"},oo=["src"],ao={class:"btn btn-success font"},io=l((()=>(0,i.Lk)("h5",null,"Actualizar Imagen de Observacion",-1))),to={class:"mb-3 row"},so=l((()=>(0,i.Lk)("label",{for:"imagen",class:"col-4 col-form-label"},"Documento",-1))),lo={class:"col-8"},ro=["src"],co={class:"btn btn-success font"};function no(e,o,a,l,C,A){const E=(0,i.g2)("CCol"),H=(0,i.g2)("CIcon"),V=(0,i.g2)("CDropdownToggle"),z=(0,i.g2)("CButton"),j=(0,i.g2)("CDropdownItem"),J=(0,i.g2)("CDropdownMenu"),G=(0,i.g2)("CDropdown"),X=(0,i.g2)("CRow"),R=(0,i.g2)("CCardHeader"),P=(0,i.g2)("CButtonGroup"),Q=(0,i.g2)("CCardBody"),Ve=(0,i.g2)("CCard"),ze=(0,i.g2)("CModalTitle"),je=(0,i.g2)("CModalHeader"),Je=(0,i.g2)("CModalBody"),Ge=(0,i.g2)("CModalFooter"),Xe=(0,i.g2)("CModal"),Re=(0,i.g2)("CAlert");return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.bF)(X,null,{default:(0,i.k6)((()=>[(0,i.bF)(E,{xs:12},{default:(0,i.k6)((()=>[(0,i.bF)(Ve,null,{default:(0,i.k6)((()=>[(0,i.bF)(R,{class:"headercolor"},{default:(0,i.k6)((()=>[(0,i.bF)(X,null,{default:(0,i.k6)((()=>[(0,i.bF)(E,{lg:6},{default:(0,i.k6)((()=>[(0,i.Lk)("label",r,(0,t.v_)(C.titulo),1)])),_:1}),(0,i.bF)(E,{lg:6,class:"text-end"},{default:(0,i.k6)((()=>[(0,i.bF)(G,{variant:"btn-group"},{default:(0,i.k6)((()=>[(0,i.bF)(V,{color:"success",class:"font",size:"sm"},{default:(0,i.k6)((()=>[(0,i.bF)(H,{icon:"cil-menu",class:"me-2"}),(0,i.eW)("Opciones ")])),_:1}),(0,i.bF)(J,null,{default:(0,i.k6)((()=>[(0,i.bF)(j,null,{default:(0,i.k6)((()=>[(0,i.bF)(z,{onClick:o[0]||(o[0]=e=>A.clickModalObs(!0)),size:"sm"},{default:(0,i.k6)((()=>[(0,i.eW)(" Agregar Observaciones ")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,i.bF)(Q,null,{default:(0,i.k6)((()=>[(0,i.Lk)("div",c,[(0,i.Lk)("table",n,[d,(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(C.listaObsCiudadanos,(e=>((0,i.uX)(),(0,i.CE)("tr",{key:e.id},[(0,i.Lk)("th",u,(0,t.v_)(e.id),1),(0,i.Lk)("td",null,(0,t.v_)(e.cif),1),(0,i.Lk)("td",null,(0,t.v_)(e.nombre),1),(0,i.Lk)("td",null,(0,t.v_)(e.uidobs),1),(0,i.Lk)("td",null,(0,t.v_)(e.tipo),1),(0,i.Lk)("td",null,(0,t.v_)(e.detalle),1),(0,i.Lk)("td",null,[(0,i.bF)(P,{role:"group"},{default:(0,i.k6)((()=>[(0,i.bF)(z,{color:"success",class:"font",size:"sm",onClick:o=>A.getObsDetalle(e.id)},{default:(0,i.k6)((()=>[(0,i.bF)(H,{icon:"cil-featured-playlist"})])),_:2},1032,["onClick"]),(0,i.bF)(z,{color:"warning",class:"font",size:"sm",onClick:o=>A.setObs(e.id)},{default:(0,i.k6)((()=>[(0,i.bF)(H,{icon:"cil-pencil"})])),_:2},1032,["onClick"]),(0,i.bF)(z,{color:"secondary",class:"font",size:"sm",onClick:o=>A.setImg(e.id)},{default:(0,i.k6)((()=>[(0,i.bF)(H,{icon:"cil-clipboard"})])),_:2},1032,["onClick"])])),_:2},1024)])])))),128))]),b])])])),_:1})])),_:1})])),_:1})])),_:1}),(0,i.bF)(Xe,{visible:C.modalObs,onClose:o[14]||(o[14]=e=>A.clickModalObs(!1))},{default:(0,i.k6)((()=>[(0,i.Lk)("form",{onSubmit:o[13]||(o[13]=(0,s.D$)((e=>A.addObsAll()),["prevent"])),enctype:"multipart/form-data"},[(0,i.bF)(je,{class:"headercolor",dismiss:"",onClose:o[1]||(o[1]=e=>A.clickModalObs(!1))},{default:(0,i.k6)((()=>[(0,i.bF)(ze,{class:"text-center"},{default:(0,i.k6)((()=>[m])),_:1})])),_:1}),(0,i.bF)(Je,null,{default:(0,i.k6)((()=>[(0,i.Lk)("div",f,[p,(0,i.Lk)("div",h,[(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":o[2]||(o[2]=e=>C.obsall.cif=e),class:"form-control",required:"true"},[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(C.listaTipoEmpleado,(e=>((0,i.uX)(),(0,i.CE)("option",{value:e.id,key:e.id},(0,t.v_)(e.detalle),9,g)))),128))],512),[[s.u1,C.obsall.cif]])])]),(0,i.Lk)("div",k,[v,(0,i.Lk)("div",L,[(0,i.bo)((0,i.Lk)("select",{class:"form-control","onUpdate:modelValue":o[3]||(o[3]=e=>C.obsall.sexo=e),required:"true"},O,512),[[s.u1,C.obsall.sexo]])])]),(0,i.Lk)("div",_,[F,(0,i.Lk)("div",D,[(0,i.bo)((0,i.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":o[4]||(o[4]=e=>C.obsall.uidobs=e),required:"true"},null,512),[[s.Jo,C.obsall.uidobs]])])]),(0,i.Lk)("div",w,[T,(0,i.Lk)("div",M,[(0,i.bo)((0,i.Lk)("input",{type:"date",class:"form-control","onUpdate:modelValue":o[5]||(o[5]=e=>C.obsall.fechainicio=e),required:"true"},null,512),[[s.Jo,C.obsall.fechainicio]])])]),(0,i.Lk)("div",y,[I,(0,i.Lk)("div",S,[(0,i.bo)((0,i.Lk)("input",{type:"date",class:"form-control","onUpdate:modelValue":o[6]||(o[6]=e=>C.obsall.fechafin=e),required:"true"},null,512),[[s.Jo,C.obsall.fechafin]])])]),(0,i.Lk)("div",$,[x,(0,i.Lk)("div",B,[(0,i.bo)((0,i.Lk)("textarea",{class:"form-control","onUpdate:modelValue":o[7]||(o[7]=e=>C.obsall.detalle=e),required:"true"},null,512),[[s.Jo,C.obsall.detalle]])])]),(0,i.Lk)("div",U,[q,(0,i.Lk)("div",W,[(0,i.bo)((0,i.Lk)("select",{class:"form-control","onUpdate:modelValue":o[8]||(o[8]=e=>C.obsall.tipo=e),required:"true",onChange:o[9]||(o[9]=e=>A.getTipo())},K,544),[[s.u1,C.obsall.tipo]])])]),(0,i.Lk)("div",Y,[N,(0,i.Lk)("div",Z,[(0,i.bo)((0,i.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":o[10]||(o[10]=e=>C.obsall.hora=e)},null,512),[[s.Jo,C.obsall.hora]])])]),(0,i.Lk)("div",ee,[oe,(0,i.Lk)("div",ae,[(0,i.Lk)("input",{type:"file",ref:"obsfile",class:"form-control",accept:"image/png,image/jpeg",onChange:o[11]||(o[11]=e=>A.selectFile()),required:"true"},null,544)])])])),_:1}),(0,i.bF)(Ge,null,{default:(0,i.k6)((()=>[(0,i.bF)(z,{onClick:o[12]||(o[12]=e=>A.clickModalObs(!1)),color:"danger",class:"font"},{default:(0,i.k6)((()=>[(0,i.bF)(H,{icon:"cil-x",class:"me-2"}),(0,i.eW)("Cancelar ")])),_:1}),(0,i.Lk)("button",ie,[(0,i.bF)(H,{icon:"cil-check-alt",class:"me-2"}),(0,i.eW)(" Agregar Observaciones ")])])),_:1})],32)])),_:1},8,["visible"]),(0,i.bF)(Xe,{visible:C.modalDetalleObs,onClose:o[18]||(o[18]=e=>A.clickModalDetalleObs(!1))},{default:(0,i.k6)((()=>[(0,i.bF)(je,{class:"headercolor",dismiss:"",onClose:o[15]||(o[15]=e=>A.clickModalDetalleObs(!1))},{default:(0,i.k6)((()=>[(0,i.bF)(ze,null,{default:(0,i.k6)((()=>[te])),_:1})])),_:1}),(0,i.bF)(Je,null,{default:(0,i.k6)((()=>[(0,i.Lk)("div",se,[(0,i.Lk)("h4",le,"CIF : "+(0,t.v_)(C.obsDetalle.cif),1)]),(0,i.bF)(X,null,{default:(0,i.k6)((()=>[(0,i.bF)(E,{lg:12},{default:(0,i.k6)((()=>[(0,i.Lk)("ul",null,[(0,i.Lk)("li",re,[ce,(0,i.eW)((0,t.v_)(C.obsDetalle.id),1)]),(0,i.Lk)("li",ne,[de,(0,i.eW)((0,t.v_)(C.obsDetalle.uidobs),1)]),(0,i.Lk)("li",ue,[be,(0,i.eW)((0,t.v_)(C.obsDetalle.fechainicio),1)]),(0,i.Lk)("li",me,[fe,(0,i.eW)(" "+(0,t.v_)(C.obsDetalle.fechafin),1)]),(0,i.Lk)("li",pe,[he,(0,i.eW)((0,t.v_)(C.obsDetalle.detalle),1)]),(0,i.Lk)("li",ge,[ke,(0,i.eW)((0,t.v_)(C.obsDetalle.tipo),1)]),(0,i.Lk)("li",ve,[Le,(0,i.eW)((0,t.v_)(C.obsDetalle.hora),1)])]),1===C.obsDetalle.estado?((0,i.uX)(),(0,i.Wv)(Re,{key:0,color:"success"},{default:(0,i.k6)((()=>[(0,i.eW)("Aprobado")])),_:1})):(0,i.Q3)("",!0),0===C.obsDetalle.estado?((0,i.uX)(),(0,i.Wv)(Re,{key:1,color:"warning"},{default:(0,i.k6)((()=>[(0,i.eW)("En Espera")])),_:1})):(0,i.Q3)("",!0)])),_:1}),(0,i.bF)(E,null,{default:(0,i.k6)((()=>[(0,i.Lk)("img",{src:C.obsDetalle.url,alt:"",class:"img-fluid"},null,8,Ce)])),_:1})])),_:1})])),_:1}),(0,i.bF)(Ge,null,{default:(0,i.k6)((()=>[(0,i.bF)(z,{onClick:o[16]||(o[16]=e=>A.clickModalDetalleObs(!1)),color:"danger",class:"font"},{default:(0,i.k6)((()=>[(0,i.bF)(H,{icon:"cil-x",class:"me-2"}),(0,i.eW)("Cancelar ")])),_:1}),(0,i.bF)(z,{onClick:o[17]||(o[17]=e=>A.updateObsEstado(C.obsDetalle.id,1)),color:"success",class:"font"},{default:(0,i.k6)((()=>[(0,i.bF)(H,{icon:"cil-check-alt",class:"me-2"}),(0,i.eW)("Aprobar ")])),_:1})])),_:1})])),_:1},8,["visible"]),(0,i.bF)(Xe,{visible:C.modalObsEditar,onClose:o[29]||(o[29]=e=>A.clickModalObsEditar(!1))},{default:(0,i.k6)((()=>[(0,i.Lk)("form",{onSubmit:o[28]||(o[28]=(0,s.D$)((e=>A.updateObsEmpleado()),["prevent"]))},[(0,i.bF)(je,{class:"headercolor text-center",dismiss:"",onClose:o[19]||(o[19]=e=>A.clickModalObsEditar(!1))},{default:(0,i.k6)((()=>[(0,i.bF)(ze,null,{default:(0,i.k6)((()=>[Ae])),_:1})])),_:1}),(0,i.bF)(Je,null,{default:(0,i.k6)((()=>[(0,i.Lk)("div",Ee,[Oe,(0,i.Lk)("div",_e,[(0,i.bo)((0,i.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":o[20]||(o[20]=e=>C.uobs.cif=e),required:"true",placeholder:"CIF"},null,512),[[s.Jo,C.uobs.cif]])])]),(0,i.Lk)("div",Fe,[De,(0,i.Lk)("div",we,[(0,i.bo)((0,i.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":o[21]||(o[21]=e=>C.uobs.uidobs=e),required:"true",placeholder:"Cite u Hoja de Ruta"},null,512),[[s.Jo,C.uobs.uidobs]])])]),(0,i.Lk)("div",Te,[Me,(0,i.Lk)("div",ye,[(0,i.bo)((0,i.Lk)("input",{type:"date",class:"form-control","onUpdate:modelValue":o[22]||(o[22]=e=>C.uobs.fechainicio=e),required:"true"},null,512),[[s.Jo,C.uobs.fechainicio]])])]),(0,i.Lk)("div",Ie,[Se,(0,i.Lk)("div",$e,[(0,i.bo)((0,i.Lk)("input",{type:"date",class:"form-control","onUpdate:modelValue":o[23]||(o[23]=e=>C.uobs.fechafin=e),required:"true"},null,512),[[s.Jo,C.uobs.fechafin]])])]),(0,i.Lk)("div",xe,[Be,(0,i.Lk)("div",Ue,[(0,i.bo)((0,i.Lk)("textarea",{class:"form-control","onUpdate:modelValue":o[24]||(o[24]=e=>C.uobs.detalle=e),required:"true"},null,512),[[s.Jo,C.uobs.detalle]])])]),(0,i.Lk)("div",qe,[We,(0,i.Lk)("div",He,[(0,i.bo)((0,i.Lk)("select",{class:"form-control","onUpdate:modelValue":o[25]||(o[25]=e=>C.uobs.tipo=e),required:"true"},Ye,512),[[s.u1,C.uobs.tipo]])])]),(0,i.Lk)("div",Ne,[Ze,(0,i.Lk)("div",eo,[(0,i.bo)((0,i.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":o[26]||(o[26]=e=>C.uobs.hora=e)},null,512),[[s.Jo,C.uobs.hora]])])]),(0,i.bF)(E,null,{default:(0,i.k6)((()=>[(0,i.Lk)("img",{src:C.uobs.url,alt:"",class:"img-fluid"},null,8,oo)])),_:1})])),_:1}),(0,i.bF)(Ge,null,{default:(0,i.k6)((()=>[(0,i.bF)(z,{onClick:o[27]||(o[27]=e=>A.clickModalObsEditar(!1)),color:"danger",class:"font"},{default:(0,i.k6)((()=>[(0,i.bF)(H,{icon:"cil-x",class:"me-2"}),(0,i.eW)("Cancelar ")])),_:1}),(0,i.Lk)("button",ao,[(0,i.bF)(H,{icon:"cil-check-alt",class:"me-2"}),(0,i.eW)(" Actualizar Observacion ")])])),_:1})],32)])),_:1},8,["visible"]),(0,i.bF)(Xe,{visible:C.modalImgEditar,onClose:o[34]||(o[34]=e=>A.clickModalImgEditar(!1))},{default:(0,i.k6)((()=>[(0,i.Lk)("form",{onSubmit:o[33]||(o[33]=(0,s.D$)((e=>A.updateImgEmpleado()),["prevent"])),enctype:"multipart/form-data"},[(0,i.bF)(je,{class:"headercolor text-center",dismiss:"",onClose:o[30]||(o[30]=e=>A.clickModalImgEditar(!1))},{default:(0,i.k6)((()=>[(0,i.bF)(ze,null,{default:(0,i.k6)((()=>[io])),_:1})])),_:1}),(0,i.bF)(Je,null,{default:(0,i.k6)((()=>[(0,i.Lk)("div",to,[so,(0,i.Lk)("div",lo,[(0,i.Lk)("input",{type:"file",ref:"obsfileimg",class:"form-control",accept:"image/png,image/jpeg",onChange:o[31]||(o[31]=e=>A.selectFileImg()),required:"true"},null,544)])]),(0,i.bF)(E,null,{default:(0,i.k6)((()=>[(0,i.Lk)("img",{src:C.uobs.url,alt:"",class:"img-fluid"},null,8,ro)])),_:1})])),_:1}),(0,i.bF)(Ge,null,{default:(0,i.k6)((()=>[(0,i.bF)(z,{onClick:o[32]||(o[32]=e=>A.clickModalImgEditar(!1)),color:"danger",class:"font"},{default:(0,i.k6)((()=>[(0,i.bF)(H,{icon:"cil-x",class:"me-2"}),(0,i.eW)("Cancelar ")])),_:1}),(0,i.Lk)("button",co,[(0,i.bF)(H,{icon:"cil-check-alt",class:"me-2"}),(0,i.eW)(" Actualizar Observacion ")])])),_:1})],32)])),_:1},8,["visible"])],64)}a(4114);var uo=a(7950),bo=a(7160),mo=a(1133),fo=a(7590),po=a(903),ho=a(9995),go=a(6587),ko=a.n(go);po.A.use(ho.A);var vo={name:"ObsView",components:{},data(){return{titulo:"Observaciones",modalObs:!1,modalDetalleObs:!1,modalObsEditar:!1,modalImgEditar:!1,egovfService:null,uploadService:null,sccService:null,empleadoService:null,listaGestion:[],listaObs:[],listaTipoEmpleado:[],listaCiudadanoEmpleado:[],listaObsCiudadanos:[],listaMes:[{m:"01",mes:"Enero"},{m:"02",mes:"Febrero"},{m:"03",mes:"Marzo"},{m:"04",mes:"Abril"},{m:"05",mes:"Mayo"},{m:"06",mes:"Junio"},{m:"07",mes:"Julio"},{m:"08",mes:"Agosto"},{m:"09",mes:"Septiembre"},{m:"10",mes:"Octubre"},{m:"11",mes:"Noviembre"},{m:"12",mes:"Diciembre"}],archivo:"",usuario:{token:"",cif:"",correo:"",celular:"",pass:"",unidad:"",sigla:""},obsall:{cif:null,uidobs:"",sexo:"",fechainicio:"",fechafin:"",detalle:"",tipo:"Seleccionar Tipo",hora:"08:30",url:""},obsDetalle:{id:0,cif:0,uidobs:"",fechainicio:"",fechafin:"",detalle:"",imagen:"",tipo:"",hora:"",url:"",estado:0},uobs:{id:0,cif:null,uidobs:"",fechainicio:"",fechafin:"",detalle:"",imagen:"",tipo:"",hora:"",url:""}}},beforeCreate(){null==this.$cookies.get("cif")&&this.$router.push("/")},created(){this.egovfService=new uo.A,this.sccService=new fo.A,this.uploadService=new bo.A,this.empleadoService=new mo.A},mounted(){this.getDatos(),this.getGestion(),this.getListaTipoEmpleado()},methods:{selectFile(){this.archivo=this.$refs.obsfile.files[0]},selectFileImg(){this.archivo=this.$refs.obsfileimg.files[0]},tablaObs(){this.$nextTick((()=>{ko()("#obsTabla").DataTable()}))},getDatos(){null!=this.$cookies.get("cif")&&(this.usuario.token=this.$cookies.get("token"),this.usuario.cif=this.$cookies.get("cif"),this.usuario.correo=this.$cookies.get("correo"),this.usuario.celular=this.$cookies.get("celular"),this.usuario.pass=this.$cookies.get("pass"),this.usuario.unidad=this.$cookies.get("unidad"),this.usuario.sigla=this.$cookies.get("sigla"),this.usuario.foto=this.$cookies.get("foto"))},async getListaTipoEmpleado(){await this.empleadoService.getListaTipoEmpleado().then((e=>{this.listaTipoEmpleado=e.data}))},async addObsAll(){const e=new FormData;e.append("archivo",this.archivo);try{await this.uploadService.addImagen(e).then((e=>{200==e.status?(this.obsall.url=this.uploadService.getUrl()+e.data.nombre,this.obsall.imagen=e.data.nombre,this.$swal.fire({title:"Desea agregar la Observacione de Asistencia a los Empleados?",showDenyButton:!0,icon:"info",confirmButtonText:"Aceptar",denyButtonText:"Cancelar"}).then((e=>{e.isConfirmed?this.sccService.addObsAll(this.obsall).then((e=>{200==e.status?this.$swal.fire("Las Observaciones fueron Agregados Corectamente ","","success").then((e=>{e&&location.reload()})):this.$swal.fire("Las Observaciones no fueron Guardados Error"+e.status,"","error")})):e.isDenied&&this.$swal.fire("Datos Cancelados","","info")}))):this.$swal.fire("El archivo no pudo ser Guardado  ","","error")}))}catch(o){this.$swal.fire("El archivo no pudo ser Guardado  "+o,"error")}},getGestion(){var e=[];const o=new Date;for(var a=o.getFullYear(),i=2021;i<=a;i++)e.push(i);this.listaGestion=e,this.getListaObs(a)},async getListaObs(e){await this.sccService.getListaObs(e).then((e=>{this.listaObs=e.data})),this.getListaCiudadanoEmpleado()},async getListaCiudadanoEmpleado(){await this.egovfService.getListaEmpleado().then((e=>{this.listaCiudadanoEmpleado=e.data})),this.getListaObsCiudadano()},getListaObsCiudadano(){this.listaObsCiudadanos=[],this.listaCiudadanoEmpleado.forEach((e=>{this.listaObs.forEach((o=>{var a={id:0,cif:0,nombre:"",uidobs:"",tipo:"",detalle:""};return e.cif!=o.cif||(a.id=o.id,a.cif=o.cif,a.nombre=e.nombre+" "+e.paterno+" "+e.materno,a.uidobs=o.uidobs,a.tipo=o.tipo,a.detalle=o.detalle,this.listaObsCiudadanos.push(a),!1)}))})),this.tablaObs()},getObsDetalle(e){this.listaObs.forEach((o=>{o.id===e&&(this.obsDetalle.id=o.id,this.obsDetalle.cif=o.cif,this.obsDetalle.uidobs=o.uidobs,this.obsDetalle.fechainicio=o.fechainicio,this.obsDetalle.fechafin=o.fechafin,this.obsDetalle.detalle=o.detalle,this.obsDetalle.imagen=o.imagen,this.obsDetalle.tipo=o.tipo,this.obsDetalle.hora=o.hora,this.obsDetalle.url=o.url,this.obsDetalle.estado=o.estado)})),this.clickModalDetalleObs(!0)},async updateObsEstado(e,o){var a={id:0,cif:0,uidobs:"",fechainicio:"",fechafin:"",gestion:0,mes:0,di:0,df:0,detalle:"",imagen:"",tipo:"",hora:"",h:0,m:0,url:"",estado:0};this.listaObs.forEach((i=>{i.id==e&&(a.id=i.id,a.cif=i.cif,a.uidobs=i.uidobs,a.fechainicio=i.fechainicio,a.fechafin=i.fechafin,a.gestion=i.gestion,a.mes=i.mes,a.di=i.di,a.df=i.df,a.detalle=i.detalle,a.imagen=i.imagen,a.tipo=i.tipo,a.hora=i.hora,a.h=i.h,a.m=i.m,a.url=i.url,a.estado=o)})),await this.$swal.fire({title:"Desea Aprobar la Observacion ? ",showDenyButton:!0,icon:"info",confirmButtonText:"Aceptar",denyButtonText:"Cancelar"}).then((e=>{e.isConfirmed?this.sccService.updateObs(a).then((e=>{200==e.status?this.$swal.fire("Observacion Actualizada Corectamente","","success").then((e=>{e&&location.reload()})):this.$swal.fire("Los Datos no fueron Guardados Error",""+e.status,"error")})):e.isDenied&&this.$swal.fire("Datos Cancelados","","info")}))},async updateObsEmpleado(){this.$swal.fire({title:"Deseas Actualizar la Observacion de Tu Asistencia ?",showDenyButton:!0,icon:"info",confirmButtonText:"Aceptar",denyButtonText:"Cancelar"}).then((e=>{e.isConfirmed?this.sccService.updateObsEmpleado(this.uobs).then((e=>{200==e.status?this.$swal.fire("La Observacion fue Actualizada Corectamente","","success").then((e=>{e&&location.reload()})):this.$swal.fire("La Observacion no pudo ser Registrada",""+e.status,"error")})):e.isDenied&&this.$swal.fire("Datos Cancelados","","info")}))},async updateImgEmpleado(){const e=new FormData;e.append("archivo",this.archivo);try{await this.uploadService.addImagen(e).then((e=>{200==e.status?(this.uobs.url=this.uploadService.getUrl()+e.data.nombre,this.uobs.imagen=e.data.nombre,this.$swal.fire({title:"Desea agregar la Observacione de Asistencia a los Empleados?",showDenyButton:!0,icon:"info",confirmButtonText:"Aceptar",denyButtonText:"Cancelar"}).then((e=>{e.isConfirmed?this.sccService.updateObsEmpleado(this.uobs).then((e=>{200==e.status?this.$swal.fire("El Documento fue Actualizado Corectamente ","","success").then((e=>{e&&location.reload()})):this.$swal.fire("El Documento no fue Guardad Error"+e.status,"","error")})):e.isDenied&&this.$swal.fire("Datos Cancelados","","info")}))):this.$swal.fire("El archivo no pudo ser Guardado  ","","error")}))}catch(o){this.$swal.fire("El archivo no pudo ser Guardado  "+o,"error")}},setObs(e){this.listaObs.forEach((o=>{o.id===e&&(this.uobs.id=e,this.uobs.cif=o.cif,this.uobs.uidobs=o.uidobs,this.uobs.fechainicio=o.fechainicio,this.uobs.fechafin=o.fechafin,this.uobs.detalle=o.detalle,this.uobs.imagen=o.imagen,this.uobs.tipo=o.tipo,this.uobs.hora=o.hora,this.uobs.url=o.url)})),this.clickModalObsEditar(!0)},setImg(e){this.listaObs.forEach((o=>{o.id===e&&(this.uobs.id=e,this.uobs.cif=o.cif,this.uobs.uidobs=o.uidobs,this.uobs.fechainicio=o.fechainicio,this.uobs.fechafin=o.fechafin,this.uobs.detalle=o.detalle,this.uobs.imagen=o.imagen,this.uobs.tipo=o.tipo,this.uobs.hora=o.hora,this.uobs.url=o.url)})),this.clickModalImgEditar(!0)},clickModalObs(e){this.modalObs=e},clickModalDetalleObs(e){this.modalDetalleObs=e},clickModalObsEditar(e){this.modalObsEditar=e},clickModalImgEditar(e){this.modalImgEditar=e},moduloScc(e){this.$router.push({name:"ModuloSccView",params:{cifCiudadano:e}})},getTipo(){"Entrada M."==this.obsall.tipo&&(this.obsall.hora="08:30"),"Salida M."==this.obsall.tipo&&(this.obsall.hora="12:30"),"Entrada T."==this.obsall.tipo&&(this.obsall.hora="14:30"),"Salida T."==this.obsall.tipo&&(this.obsall.hora="18:30"),"continuo"==this.obsall.tipo&&(this.obsall.hora="16:30"),"asueto"==this.obsall.tipo&&(this.obsall.hora="08:30")}}},Lo=a(1241);const Co=(0,Lo.A)(vo,[["render",no],["__scopeId","data-v-cc332ce8"]]);var Ao=Co}}]);
//# sourceMappingURL=294.71d404a7.js.map