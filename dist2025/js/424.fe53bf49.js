"use strict";(self["webpackChunkegovf"]=self["webpackChunkegovf"]||[]).push([[424],{7950:function(t,e,s){s.d(e,{A:function(){return l}});var i=s(4373),a=s(1660);const o=a.j6;class l{headersUsuario(t){i.A.defaults.headers.common["Authorization"]="Bearer "+t}getEgovf(t){return i.A.get(o+"ciudadano/getEgovf",{params:{cif:t}})}getListaCiudadano(){return i.A.get(o+"ciudadano/getListaCiudadano")}getListaEmpleado(){return i.A.get(o+"ciudadano/getListaEmpleado")}}},1424:function(t,e,s){s.r(e),s.d(e,{default:function(){return j}});var i=s(6768),a=s(4232);const o=(0,i.Lk)("h2",{class:"text-center"},"Estadisticas de Asistencia",-1),l={class:"table-responsive"},n={class:"table table-striped table-hover",id:"printAsistencia"},r=(0,i.Lk)("thead",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("th",null,"#"),(0,i.Lk)("th",null,"Detalle"),(0,i.Lk)("th",null,"Cantidad"),(0,i.Lk)("th",null,"%")])],-1),d=(0,i.Lk)("td",null,"1",-1),c=(0,i.Lk)("td",null,"Excelente",-1),u=(0,i.Lk)("td",null,"2",-1),h=(0,i.Lk)("td",null,"Regular",-1),g=(0,i.Lk)("td",null,"3",-1),k=(0,i.Lk)("td",null,"En Linea Roja",-1),m=(0,i.Lk)("td",null,"4",-1),L=(0,i.Lk)("td",null,"Llamada de Atencion",-1),f=(0,i.Lk)("tr",null,null,-1),p=(0,i.Lk)("h2",{class:"text-center"},"Ranking de Asistencias",-1),v=(0,i.Lk)("hr",null,null,-1),b={class:"table-responsive"},C={class:"table table-striped table-hover",id:"printRecord"},F=(0,i.Lk)("thead",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("th",null,"#"),(0,i.Lk)("th",null,"CIF"),(0,i.Lk)("th",null,"C.I."),(0,i.Lk)("th",null,"Nombres y Apellidos"),(0,i.Lk)("th",null,"Min. R"),(0,i.Lk)("th",null,"Min. S.A."),(0,i.Lk)("th",null,"Total dias de Descuento")])],-1),_=(0,i.Lk)("tfoot",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("th"),(0,i.Lk)("th"),(0,i.Lk)("th"),(0,i.Lk)("th"),(0,i.Lk)("th"),(0,i.Lk)("th"),(0,i.Lk)("th")])],-1);function A(t,e,s,A,R,x){const E=(0,i.g2)("CCol"),S=(0,i.g2)("CIcon"),w=(0,i.g2)("CButton"),y=(0,i.g2)("CRow"),M=(0,i.g2)("CCardHeader"),$=(0,i.g2)("CCardBody"),j=(0,i.g2)("CCard");return(0,i.uX)(),(0,i.Wv)(y,null,{default:(0,i.k6)((()=>[(0,i.bF)(E,{xs:12},{default:(0,i.k6)((()=>[(0,i.bF)(j,null,{default:(0,i.k6)((()=>[(0,i.bF)(M,{class:"headercolor"},{default:(0,i.k6)((()=>[(0,i.bF)(y,null,{default:(0,i.k6)((()=>[(0,i.bF)(E,{lg:8,class:"text-center"},{default:(0,i.k6)((()=>[(0,i.eW)("Ranking De Asistencias mes de "+(0,a.v_)(R.mes)+" del "+(0,a.v_)(R.record.gestion),1)])),_:1}),(0,i.bF)(E,{lg:4,class:"text-end"},{default:(0,i.k6)((()=>[(0,i.bF)(w,{color:"success",class:"font",onClick:e[0]||(e[0]=t=>x.pdfRecord()),size:"sm"},{default:(0,i.k6)((()=>[(0,i.bF)(S,{icon:"cil-cloud-download",class:"me-2"}),(0,i.eW)("Descargar PDF")])),_:1})])),_:1})])),_:1})])),_:1}),(0,i.bF)($,null,{default:(0,i.k6)((()=>[(0,i.bF)(y,null,{default:(0,i.k6)((()=>[o,(0,i.Lk)("div",l,[(0,i.Lk)("table",n,[r,(0,i.Lk)("tbody",null,[(0,i.Lk)("tr",null,[d,c,(0,i.Lk)("td",null,(0,a.v_)(R.stadist.excelente),1),(0,i.Lk)("td",null,(0,a.v_)((R.stadist.excelente/R.ln*100).toFixed(2))+"%",1)]),(0,i.Lk)("tr",null,[u,h,(0,i.Lk)("td",null,(0,a.v_)(R.stadist.regular),1),(0,i.Lk)("td",null,(0,a.v_)((R.stadist.regular/R.ln*100).toFixed(2))+"%",1)]),(0,i.Lk)("tr",null,[g,k,(0,i.Lk)("td",null,(0,a.v_)(R.stadist.roja),1),(0,i.Lk)("td",null,(0,a.v_)((R.stadist.roja/R.ln*100).toFixed(2))+"%",1)]),(0,i.Lk)("tr",null,[m,L,(0,i.Lk)("td",null,(0,a.v_)(R.stadist.atencion),1),(0,i.Lk)("td",null,(0,a.v_)((R.stadist.atencion/R.ln*100).toFixed(2))+"%",1)]),f])])])])),_:1}),(0,i.bF)(y,null,{default:(0,i.k6)((()=>[p,v,(0,i.Lk)("div",b,[(0,i.Lk)("table",C,[F,(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(R.listaR,(t=>((0,i.uX)(),(0,i.CE)("tr",{key:t.id},[(0,i.Lk)("td",null,(0,a.v_)(t.id),1),(0,i.Lk)("td",null,[(0,i.bF)(w,{color:"success",class:"font",onClick:e=>x.getReporteMes(t.cif)},{default:(0,i.k6)((()=>[(0,i.eW)((0,a.v_)(t.cif),1)])),_:2},1032,["onClick"])]),(0,i.Lk)("td",null,(0,a.v_)(t.ci),1),(0,i.Lk)("td",null,(0,a.v_)(t.nombre),1),(0,i.Lk)("td",null,(0,a.v_)(t.retraso),1),(0,i.Lk)("td",null,(0,a.v_)(t.antisipado),1),(0,i.Lk)("td",null,(0,a.v_)(t.pena),1)])))),128))]),_])])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}s(4114);var R=s(7590),x=s(7950),E=s(1749),S=s(5839),w=s.n(S),y={name:"RecordView",components:{},data(){return{sccService:null,listaPersona:[],listaCiudadanoEmpleado:[],listaR:null,ln:0,mes:"",uri:"",usuario:{token:"",cif:"",correo:"",celular:"",pass:"",unidad:"",sigla:""},record:{gestion:2023,mes:0,tipo:0,di:"00",df:"00"},stadist:{excelente:0,regular:0,roja:0,atencion:0}}},beforeCreate(){null==this.$cookies.get("cif")&&this.$router.push("/")},created(){this.sccService=new R.A,this.egovfService=new x.A},mounted(){this.uri=this.$route.params.uri,this.record.gestion=this.uri.substring(0,4),this.record.mes=this.uri.substring(5,7),this.record.tipo=this.uri.substring(8),this.getMes(),this.getDatos(),this.getListaCiudadanoEmpleado()},methods:{getDatos(){null!=this.$cookies.get("cif")&&(this.usuario.token=this.$cookies.get("token"),this.usuario.cif=this.$cookies.get("cif"),this.usuario.correo=this.$cookies.get("correo"),this.usuario.celular=this.$cookies.get("celular"),this.usuario.pass=this.$cookies.get("pass"),this.usuario.unidad=this.$cookies.get("unidad"),this.usuario.sigla=this.$cookies.get("sigla"),this.usuario.foto=this.$cookies.get("foto"),this.egovfService.headersUsuario(this.usuario.token))},getMes(){1==this.record.mes&&(this.mes="Enero"),2==this.record.mes&&(this.mes="Febrero"),3==this.record.mes&&(this.mes="Marzo"),4==this.record.mes&&(this.mes="Abril"),5==this.record.mes&&(this.mes="Mayo"),6==this.record.mes&&(this.mes="Junio"),7==this.record.mes&&(this.mes="Julio"),8==this.record.mes&&(this.mes="Agosto"),9==this.record.mes&&(this.mes="Septiembre"),10==this.record.mes&&(this.mes="Octubre"),11==this.record.mes&&(this.mes="Noviembre"),12==this.record.mes&&(this.mes="Diciembre")},async getListaCiudadanoEmpleado(){await this.egovfService.getListaEmpleado().then((t=>{this.listaCiudadanoEmpleado=t.data,this.getRecord()}))},getReporteMes(t){window.open(this.$router.resolve({name:"ReporteView",params:{uri:t+"j"+this.record.gestion+"m"+this.record.mes+"m"+this.record.di+"k"+this.record.df}}).href,"_blank")},async getRecord(){await this.sccService.getRecord(this.record).then((t=>{this.listaRecord=t.data}));var t=1;this.listaR=[],this.listaRecord.forEach((e=>{this.listaCiudadanoEmpleado.forEach((s=>{var i={id:0,cif:0,ci:"",nombre:"",retraso:0,antisipado:0,pena:0};return s.cif!=e.cif||(i.id=t,i.cif=s.cif,i.ci=s.ci,i.nombre=s.nombre+" "+s.paterno+" "+s.materno,i.retraso=e.retraso,i.antisipado=e.antisipado,i.pena=e.pena,0==e.retraso&&(this.stadist.excelente=this.stadist.excelente+1),e.retraso>=1&&e.retraso<=25&&(this.stadist.regular=this.stadist.regular+1),e.retraso>=26&&e.retraso<=59&&(this.stadist.roja=this.stadist.roja+1),e.retraso>=60&&(this.stadist.atencion=this.stadist.atencion+1),t+=1,this.listaR.push(i),!1)})),this.ln=this.ln+1}))},pdfRecord(){var t=new Image;const e=new E["default"]("p","mm","letter");t.src="https://fhcevirtual.umsa.bo/egovf-img/imagenes/logoticjpg.jpg",e.addImage(t,"JPEG",43,14,15,10),t.src="https://fhcevirtual.umsa.bo/egovf-img/imagenes/logofhce.jpg",e.addImage(t,"JPEG",215/7.8,14,15,10),t.src="https://fhcevirtual.umsa.bo/egovf-img/imagenes/logoumsa.jpg",e.addImage(t,"JPEG",21.5,12,6,12),e.setFontSize(12),e.setFont(void 0,"bold"),e.text("Universidad Mayor de San Andrés",107.5,18,{align:"center"}),e.setFontSize(10),e.setFont(void 0,"normal"),e.text("Facultad de Humanidades y Ciencias de la Educación",107.5,23,{align:"center"}),e.setFontSize(8),e.text("Unidad de Tecnologías de la Información y la Comunicación  UMSA-FHCE",107.5,28,{align:"center"}),e.setFontSize(12),e.text("Ranking de Asistencias Mes de "+this.mes+" del "+this.record.gestion,107.5,45,{align:"center"}),e.setFontSize(10);var s=50;e.text("Lic. Jaime A. Montecinos Marquez",53.75,s+25,{align:"center"}),e.text("Responsable Unidad TIC.",53.75,s+30,{align:"center"}),e.text("Vo. Bo.",162,s+25,{align:"center"}),e.text("Inmediato Superior",162,s+30,{align:"center"}),s+=45,e.text("Estadisticas de Asistencia",107.5,s,{align:"center"}),s+=5,w()(e,{startY:s,margin:{left:20},styles:{fontSize:8},html:"#printAsistencia",showFoot:"lastPage"}),s=e.lastAutoTable.finalY,e.setFontSize(15),w()(e,{startY:s+15,margin:{left:20},styles:{fontSize:8},html:"#printRecord",showFoot:"lastPage"}),e.save(this.mes+this.record.gestion+"record.pdf")}}},M=s(1241);const $=(0,M.A)(y,[["render",A]]);var j=$}}]);
//# sourceMappingURL=424.fe53bf49.js.map